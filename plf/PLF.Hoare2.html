<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link href="../common/css/tapl.css" rel="stylesheet" type="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>PLF.Hoare2</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library PLF.Hoare2</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab91"></a><h1 class="section">Hoare2: Hoare Logic, Part II</h1>

</div>
<div class="code">

<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Set</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Warnings</span></a> "-notation-overridden,-parsing,-deprecated-hint-without-locality".<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Set</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Warnings</span></a> "-intuition-auto-with-star".<br/>
<span class="id" title="keyword">From</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Stdlib</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Require</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Import</span></a> <span class="id" title="library">Strings.String</span>.<br/>
<span class="id" title="keyword">From</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">PLF</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Require</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Import</span></a> <a class="idref" href="PLF.Maps.html#"><span class="id" title="library">Maps</span></a>.<br/>
<span class="id" title="keyword">From</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Stdlib</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Require</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Import</span></a> <span class="id" title="library">Bool</span>.<br/>
<span class="id" title="keyword">From</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Stdlib</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Require</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Import</span></a> <span class="id" title="library">Arith</span>.<br/>
<span class="id" title="keyword">From</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Stdlib</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Require</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Import</span></a> <span class="id" title="library">EqNat</span>.<br/>
<span class="id" title="keyword">From</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Stdlib</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Require</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Import</span></a> <span class="id" title="library">PeanoNat</span>. <span class="id" title="keyword">Import</span> <span class="id" title="module">Nat</span>.<br/>
<span class="id" title="keyword">From</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Stdlib</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Require</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Import</span></a> <span class="id" title="library">Lia</span>.<br/>
<span class="id" title="keyword">From</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">PLF</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Require</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Export</span></a> <a class="idref" href="PLF.Imp.html#"><span class="id" title="library">Imp</span></a>.<br/>
<span class="id" title="keyword">From</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">PLF</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Require</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Import</span></a> <a class="idref" href="PLF.Hoare.html#"><span class="id" title="library">Hoare</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Set</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Default</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Goal</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Selector</span></a> "!".<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="FILL_IN_HERE" class="idref" href="#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.Hoare.html#:::'True'"><span class="id" title="notation">True</span></a><a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab92"></a><h1 class="section">Decorated Programs</h1>

<div class="paragraph"> </div>

 The beauty of Hoare Logic is that it is <i>structure-guided</i>: the
    structure of proofs exactly follows the structure of programs.

<div class="paragraph"> </div>

    We can record the essential ideas of a Hoare-logic proof --
    omitting low-level calculational details -- by "decorating" a
    program with appropriate assertions on each of its commands.

<div class="paragraph"> </div>

    Such a <i>decorated program</i> carries within itself an argument for
    its own correctness. 
<div class="paragraph"> </div>

 For example, consider the program:

<div class="paragraph"> </div>

    X := m;
    Z := p;
    while X &lt;&gt; 0 do
      Z := Z - 1;
      X := X - 1
    end
 Here is one possible specification for this program, in the
    form of a Hoare triple:

<div class="paragraph"> </div>

    <a href=" True "> True </a>
    X := m;
    Z := p;
    while X &lt;&gt; 0 do
      Z := Z - 1;
      X := X - 1
    end
    <a href=" Z = p - m "> Z = p - m </a>
 (Note the <i>parameters</i> <span class="inlinecode"><span class="id" title="var">m</span></span> and <span class="inlinecode"><span class="id" title="var">p</span></span>, which stand for
   fixed-but-arbitrary numbers.  Formally, they are simply Coq
   variables of type <span class="inlinecode"><span class="id" title="var">nat</span></span>.) 
<div class="paragraph"> </div>

 Here is a decorated version of this program, embodying a
    proof of this specification:

<div class="paragraph"> </div>

    <a href=" True "> True </a> -&gt;&gt;
    <a href=" m = m "> m = m </a>
      X := m
                         <a href=" X = m "> X = m </a> -&gt;&gt;
                         <a href=" X = m /\ p = p "> X = m /\ p = p </a>;
      Z := p;
                         <a href=" X = m /\ Z = p "> X = m /\ Z = p </a> -&gt;&gt;
                         <a href=" Z - X = p - m "> Z - X = p - m </a>
      while X &lt;&gt; 0 do
                         <a href=" Z - X = p - m /\ X <> 0 "> Z - X = p - m /\ X <> 0 </a> -&gt;&gt;
                         <a href=" (Z - 1) - (X - 1) = p - m "> (Z - 1) - (X - 1) = p - m </a>
        Z := Z - 1
                         <a href=" Z - (X - 1) = p - m "> Z - (X - 1) = p - m </a>;
        X := X - 1
                         <a href=" Z - X = p - m "> Z - X = p - m </a>
      end
    <a href=" Z - X = p - m /\ ~ (X <> 0) "> Z - X = p - m /\ ~ (X <> 0) </a> -&gt;&gt;
    <a href=" Z = p - m "> Z = p - m </a>

<div class="paragraph"> </div>

 Concretely, a decorated program consists of the program's text
    interleaved with assertions (sometimes multiple assertions
    separated by implications). 
<div class="paragraph"> </div>

 A decorated program can be viewed as a compact representation of a
    proof in Hoare Logic: the assertions surrounding each command
    specify the Hoare triple to be proved for that part of the program
    using one of the Hoare Logic rules, and the structure of the
    program itself shows how to assemble all these individual steps
    into a proof for the whole program. 
<div class="paragraph"> </div>

 Our goal is to verify such decorated programs "mostly
    automatically."  But, before we can verify anything, we need to be
    able to <i>find</i> a proof for a given specification, and for this we
    need to discover the right assertions. This can be done in an
    almost mechanical way, with the exception of finding loop
    invariants. In the remainder of this section we explain in detail
    how to construct decorations for several short programs, all of
    which are loop-free or have simple loop invariants. We'll return
    to finding more interesting loop invariants later in the chapter. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab93"></a><h2 class="section">Example: Swapping</h2>

<div class="paragraph"> </div>

 Consider the following program, which swaps the values of two
    variables using addition and subtraction (instead of by assigning
    to a temporary variable).

<div class="paragraph"> </div>

       X := X + Y;
       Y := X - Y;
       X := X - Y

<div class="paragraph"> </div>

    We can give a proof, in the form of decorations, that this program is
    correct -- i.e., it really swaps <span class="inlinecode"><span class="id" title="var">X</span></span> and <span class="inlinecode"><span class="id" title="var">Y</span></span> -- as follows.

<div class="paragraph"> </div>

    (1)    <a href=" X = m /\ Y = n "> X = m /\ Y = n </a> -&gt;&gt;
    (2)    <a href=" (X + Y) - ((X + Y) - Y) = n /\ (X + Y) - Y = m "> (X + Y) - ((X + Y) - Y) = n /\ (X + Y) - Y = m </a>
             X := X + Y
    (3)                     <a href=" X - (X - Y) = n /\ X - Y = m "> X - (X - Y) = n /\ X - Y = m </a>;
             Y := X - Y
    (4)                     <a href=" X - Y = n /\ Y = m "> X - Y = n /\ Y = m </a>;
             X := X - Y
    (5)    <a href=" X = n /\ Y = m "> X = n /\ Y = m </a>

<div class="paragraph"> </div>

    The decorations can be constructed as follows:

<div class="paragraph"> </div>

<ul class="doclist">
<li> We begin with the undecorated program (the unnumbered lines).

<div class="paragraph"> </div>


</li>
<li> We add the specification -- i.e., the outer precondition (1)
        and postcondition (5). In the precondition, we use parameters
        <span class="inlinecode"><span class="id" title="var">m</span></span> and <span class="inlinecode"><span class="id" title="var">n</span></span> to remember the initial values of variables <span class="inlinecode"><span class="id" title="var">X</span></span>
        and <span class="inlinecode"><span class="id" title="var">Y</span></span> so that we can refer to them in the postcondition (5).

<div class="paragraph"> </div>


</li>
<li> We work backwards, mechanically, starting from (5) and
        proceeding until we get to (2). At each step, we obtain the
        precondition of the assignment from its postcondition by
        substituting the assigned variable with the right-hand-side of
        the assignment. For instance, we obtain (4) by substituting
        <span class="inlinecode"><span class="id" title="var">X</span></span> with <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> in (5), and we obtain (3) by substituting <span class="inlinecode"><span class="id" title="var">Y</span></span>
        with <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> in (4).

</li>
</ul>

<div class="paragraph"> </div>

    Finally, we verify that (1) logically implies (2) -- i.e., that
    the step from (1) to (2) is a valid use of the law of
    consequence -- by doing a bit of high-school algebra.
 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab94"></a><h2 class="section">Example: Simple Conditionals</h2>

<div class="paragraph"> </div>

 Here is a simple decorated program using conditionals:

<div class="paragraph"> </div>

      (1)   <a href=" True "> True </a>
              if X &lt;= Y then
      (2)                    <a href=" True /\ X <= Y "> True /\ X <= Y </a> -&gt;&gt;
      (3)                    <a href=" (Y - X) + X = Y \/ (Y - X) + Y = X "> (Y - X) + X = Y \/ (Y - X) + Y = X </a>
                Z := Y - X
      (4)                    <a href=" Z + X = Y \/ Z + Y = X "> Z + X = Y \/ Z + Y = X </a>
              else
      (5)                    <a href=" True /\ ~(X <= Y) "> True /\ ~(X <= Y) </a> -&gt;&gt;
      (6)                    <a href=" (X - Y) + X = Y \/ (X - Y) + Y = X "> (X - Y) + X = Y \/ (X - Y) + Y = X </a>
                Z := X - Y
      (7)                    <a href=" Z + X = Y \/ Z + Y = X "> Z + X = Y \/ Z + Y = X </a>
              end
      (8)   <a href=" Z + X = Y \/ Z + Y = X "> Z + X = Y \/ Z + Y = X </a>

<div class="paragraph"> </div>

These decorations can be constructed as follows:

<div class="paragraph"> </div>

<ul class="doclist">
<li> We start with the outer precondition (1) and postcondition (8).

<div class="paragraph"> </div>


</li>
<li> Following the format dictated by the <span class="inlinecode"><span class="id" title="var">hoare_if</span></span> rule, we copy the
    postcondition (8) to (4) and (7). We conjoin the precondition (1)
    with the guard of the conditional to obtain (2). We conjoin (1)
    with the negated guard of the conditional to obtain (5).

<div class="paragraph"> </div>


</li>
<li> In order to use the assignment rule and obtain (3), we substitute
    <span class="inlinecode"><span class="id" title="var">Z</span></span> by <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">X</span></span> in (4). To obtain (6) we substitute <span class="inlinecode"><span class="id" title="var">Z</span></span> by <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">Y</span></span>
    in (7).

<div class="paragraph"> </div>


</li>
<li> Finally, we verify that (2) implies (3) and (5) implies (6). Both
    of these implications crucially depend on the ordering of <span class="inlinecode"><span class="id" title="var">X</span></span> and
    <span class="inlinecode"><span class="id" title="var">Y</span></span> obtained from the guard. For instance, knowing that <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">≤</span> <span class="inlinecode"><span class="id" title="var">Y</span></span>
    ensures that subtracting <span class="inlinecode"><span class="id" title="var">X</span></span> from <span class="inlinecode"><span class="id" title="var">Y</span></span> and then adding back <span class="inlinecode"><span class="id" title="var">X</span></span>
    produces <span class="inlinecode"><span class="id" title="var">Y</span></span>, as required by the first disjunct of (3). Similarly,
    knowing that <span class="inlinecode">¬</span> <span class="inlinecode">(<span class="id" title="var">X</span></span> <span class="inlinecode">≤</span> <span class="inlinecode"><span class="id" title="var">Y</span>)</span> ensures that subtracting <span class="inlinecode"><span class="id" title="var">Y</span></span> from <span class="inlinecode"><span class="id" title="var">X</span></span>
    and then adding back <span class="inlinecode"><span class="id" title="var">Y</span></span> produces <span class="inlinecode"><span class="id" title="var">X</span></span>, as needed by the second
    disjunct of (6). Note that <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> does <i>not</i> hold for
    arbitrary natural numbers <span class="inlinecode"><span class="id" title="var">n</span></span> and <span class="inlinecode"><span class="id" title="var">m</span></span> (for example, <span class="inlinecode">3</span> <span class="inlinecode">-</span> <span class="inlinecode">5</span> <span class="inlinecode">+</span> <span class="inlinecode">5</span> <span class="inlinecode">=</span>
    <span class="inlinecode">5</span>). 
</li>
</ul>

<div class="paragraph"> </div>

<a id="lab95"></a><h4 class="section">Exercise: 2 stars, standard, optional (if_minus_plus_reloaded)</h4>


<div class="paragraph"> </div>

    N.b.: Although this exercise is marked optional, it is an
    excellent warm-up for the (non-optional) <span class="inlinecode"><span class="id" title="var">if_minus_plus_correct</span></span>
    exercise below!

<div class="paragraph"> </div>

    Fill in valid decorations for the following program: 
</div>
<div class="code">
</div>

<div class="doc">
    Briefly justify each use of <span class="inlinecode">-&gt;&gt;</span>.

<div class="paragraph"> </div>

 <font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab96"></a><h2 class="section">Example: Reduce to Zero</h2>

<div class="paragraph"> </div>

 Here is a <span class="inlinecode"><span class="id" title="var">while</span></span> loop that is so simple that <span class="inlinecode"><span class="id" title="var">True</span></span> suffices
    as a loop invariant.

<div class="paragraph"> </div>

        (1)    <a href=" True "> True </a>
                 while X &lt;&gt; 0 do
        (2)                  <a href=" True /\ X <> 0 "> True /\ X <> 0 </a> -&gt;&gt;
        (3)                  <a href=" True "> True </a>
                   X := X - 1
        (4)                  <a href=" True "> True </a>
                 end
        (5)    <a href=" True /\ ~(X <> 0) "> True /\ ~(X <> 0) </a> -&gt;&gt;
        (6)    <a href=" X = 0 "> X = 0 </a>

<div class="paragraph"> </div>

   The decorations can be constructed as follows:

<div class="paragraph"> </div>

<ul class="doclist">
<li> Start with the outer precondition (1) and postcondition (6).

<div class="paragraph"> </div>


</li>
<li> Following the format dictated by the <span class="inlinecode"><span class="id" title="var">hoare_while</span></span> rule, we copy
       (1) to (4). We conjoin (1) with the guard to obtain (2). We also
       conjoin (1) with the negation of the guard to obtain (5).

<div class="paragraph"> </div>


</li>
<li> Because the final postcondition (6) does not syntactically match (5),
       we add an implication between them.

<div class="paragraph"> </div>


</li>
<li> Using the assignment rule with assertion (4), we trivially substitute
       and obtain assertion (3).

<div class="paragraph"> </div>


</li>
<li> We add the implication between (2) and (3).

</li>
</ul>

<div class="paragraph"> </div>

   Finally we check that the implications do hold; both are trivial. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab97"></a><h2 class="section">Example: Division</h2>

<div class="paragraph"> </div>

 Let's do one more example of simple reasoning about a loop.

<div class="paragraph"> </div>

    The following Imp program calculates the integer quotient and
    remainder of parameters <span class="inlinecode"><span class="id" title="var">m</span></span> and <span class="inlinecode"><span class="id" title="var">n</span></span>.

<div class="paragraph"> </div>

       X := m;
       Y := 0;
       while n &lt;= X do
         X := X - n;
         Y := Y + 1
       end;

<div class="paragraph"> </div>

    If we replace <span class="inlinecode"><span class="id" title="var">m</span></span> and <span class="inlinecode"><span class="id" title="var">n</span></span> by concrete numbers and execute the program, it
    will terminate with the variable <span class="inlinecode"><span class="id" title="var">X</span></span> set to the remainder when <span class="inlinecode"><span class="id" title="var">m</span></span>
    is divided by <span class="inlinecode"><span class="id" title="var">n</span></span> and <span class="inlinecode"><span class="id" title="var">Y</span></span> set to the quotient. 
<div class="paragraph"> </div>

 In order to give a specification to this program we need to
    remember that dividing <span class="inlinecode"><span class="id" title="var">m</span></span> by <span class="inlinecode"><span class="id" title="var">n</span></span> produces a remainder <span class="inlinecode"><span class="id" title="var">X</span></span> and a
    quotient <span class="inlinecode"><span class="id" title="var">Y</span></span> such that <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">×</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&lt;</span> <span class="inlinecode"><span class="id" title="var">n</span></span>.

<div class="paragraph"> </div>

    It turns out that we get lucky with this program and don't have to
    think very hard about the loop invariant: the loop invariant is just
    the first conjunct, <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">×</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>, and we can use this to
    decorate the program.

<div class="paragraph"> </div>

      (1)  <a href=" True "> True </a> -&gt;&gt;
      (2)  <a href=" n * 0 + m = m "> n * 0 + m = m </a>
             X := m;
      (3)                     <a href=" n * 0 + X = m "> n * 0 + X = m </a>
             Y := 0;
      (4)                     <a href=" n * Y + X = m "> n * Y + X = m </a>
             while n &lt;= X do
      (5)                     <a href=" n * Y + X = m /\ n <= X "> n * Y + X = m /\ n <= X </a> -&gt;&gt;
      (6)                     <a href=" n * (Y + 1) + (X - n) = m "> n * (Y + 1) + (X - n) = m </a>
               X := X - n;
      (7)                     <a href=" n * (Y + 1) + X = m "> n * (Y + 1) + X = m </a>
               Y := Y + 1
      (8)                     <a href=" n * Y + X = m "> n * Y + X = m </a>
             end
      (9)  <a href=" n * Y + X = m /\ ~ (n <= X) "> n * Y + X = m /\ ~ (n <= X) </a> -&gt;&gt;
     (10)  <a href=" n * Y + X = m /\ X < n "> n * Y + X = m /\ X < n </a>

<div class="paragraph"> </div>

    Assertions (4), (5), (8), and (9) are derived mechanically from
    the loop invariant and the loop's guard.  Assertions (8), (7), and (6)
    are derived using the assignment rule going backwards from (8)
    to (6).  Assertions (4), (3), and (2) are again backwards
    applications of the assignment rule.

<div class="paragraph"> </div>

    Now that we've decorated the program it only remains to check that
    the uses of the consequence rule are correct -- i.e., that (1)
    implies (2), that (5) implies (6), and that (9) implies (10). This
    is indeed the case:
<ul class="doclist">
<li> (1) -&gt;&gt; (2):  trivial, by algebra.

</li>
<li> (5) -&gt;&gt; (6):  because <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">≤</span> <span class="inlinecode"><span class="id" title="var">X</span></span>, we are guaranteed that the
        subtraction in (6) does not get zero-truncated.  We can
        therefore rewrite (6) as <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">×</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">n</span></span> and cancel the
        <span class="inlinecode"><span class="id" title="var">n</span></span>s, which results in the left conjunct of (5).

</li>
<li> (9) -&gt;&gt; (10):  if <span class="inlinecode">¬</span> <span class="inlinecode">(<span class="id" title="var">n</span></span> <span class="inlinecode">≤</span> <span class="inlinecode"><span class="id" title="var">X</span>)</span> then <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&lt;</span> <span class="inlinecode"><span class="id" title="var">n</span></span>.  That's straightforward
        from high-school algebra.

</li>
</ul>
    So, we have a valid decorated program. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab98"></a><h2 class="section">From Decorated Programs to Formal Proofs</h2>

<div class="paragraph"> </div>

 From an informal proof in the form of a decorated program, it is
    "easy in principle" to read off a formal proof using the Coq
    theorems corresponding to the Hoare Logic rules, but these proofs
    can be a bit long and fiddly. 
<div class="paragraph"> </div>

 Note that we do <i>not</i> unfold the definition of <span class="inlinecode"><span class="id" title="var">valid_hoare_triple</span></span>
    anywhere in this proof: the point of the game we're playing now
    is to use the Hoare rules as a self-contained logic for reasoning
    about programs. 
<div class="paragraph"> </div>

 For example... 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="reduce_to_zero" class="idref" href="#reduce_to_zero"><span class="id" title="definition">reduce_to_zero</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Imp.html#com"><span class="id" title="inductive">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Imp.html#:com:com_scope:'while'_x_'do'_x_'end'"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Imp.html#:com:com_scope:'while'_x_'do'_x_'end'"><span class="id" title="notation">do</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#91e9aa710642047a93142bdf557f1a1b"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#:com:com_scope:'while'_x_'do'_x_'end'"><span class="id" title="notation">end</span></a> <a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="reduce_to_zero_correct'" class="idref" href="#reduce_to_zero_correct'"><span class="id" title="lemma">reduce_to_zero_correct'</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a><a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#reduce_to_zero"><span class="id" title="definition">reduce_to_zero</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a><a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">unfold</span></a> <a class="idref" href="PLF.Hoare2.html#reduce_to_zero"><span class="id" title="definition">reduce_to_zero</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_consequence_post"><span class="id" title="lemma">hoare_consequence_post</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_while"><span class="id" title="lemma">hoare_while</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">×</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_asgn"><span class="id" title="lemma">hoare_asgn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">×</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">unfold</span></a> <a class="idref" href="PLF.Hoare.html#assertion_sub"><span class="id" title="definition">assertion_sub</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a> "-&gt;&gt;". <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">simpl</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">intros</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">exact</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">st</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Inv</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">GuardFalse</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">unfold</span></a> <a class="idref" href="PLF.Hoare.html#bassertion"><span class="id" title="definition">bassertion</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">GuardFalse</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">simpl</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">GuardFalse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <span class="id" title="lemma">not_true_iff_false</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">GuardFalse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <span class="id" title="lemma">negb_false_iff</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">GuardFalse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <span class="id" title="lemma">eqb_eq</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">GuardFalse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">GuardFalse</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
In <span class="inlinecode"><span class="id" title="var">Hoare</span></span> we introduced a series of tactics named
    <span class="inlinecode"><span class="id" title="var">assertion_auto</span></span> to automate proofs involving assertions.

<div class="paragraph"> </div>

    The following declaration introduces a more sophisticated tactic
    that will help with proving assertions throughout the rest of this
    chapter.  You don't need to understand the details, but briefly:
    it uses <span class="inlinecode"><span class="id" title="tactic">split</span></span> repeatedly to turn all the conjunctions into
    separate subgoals, tries to use several theorems about booleans
    and (in)equalities, then uses <span class="inlinecode"><span class="id" title="tactic">eauto</span></span> and <span class="inlinecode"><span class="id" title="var">lia</span></span> to finish off as
    many subgoals as possible. What's left after <span class="inlinecode"><span class="id" title="var">verify_assertion</span></span> does
    its thing should be just the "interesting parts" of the proof --
    which, if we're lucky, might be nothing at all! 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">verify_assertion</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">repeat</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">split</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">simpl</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">unfold</span></a> <a class="idref" href="PLF.Hoare.html#assert_implies"><span class="id" title="definition">assert_implies</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">unfold</span></a> <a class="idref" href="PLF.Hoare.html#bassertion"><span class="id" title="definition">bassertion</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">unfold</span></a> <a class="idref" href="PLF.Imp.html#beval"><span class="id" title="definition">beval</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">unfold</span></a> <a class="idref" href="PLF.Imp.html#aeval"><span class="id" title="definition">aeval</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">unfold</span></a> <a class="idref" href="PLF.Hoare.html#assertion_sub"><span class="id" title="definition">assertion_sub</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">intros</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">repeat</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">simpl</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <a class="idref" href="PLF.Maps.html#t_update_eq"><span class="id" title="axiom">t_update_eq</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">||</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">try</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <a class="idref" href="PLF.Maps.html#t_update_neq"><span class="id" title="axiom">t_update_neq</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[|</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">intro</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">X</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">inversion</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">X</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">fail</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)]));</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">simpl</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">repeat</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">goal</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">repeat</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <span class="id" title="lemma">not_true_iff_false</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">repeat</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <span class="id" title="lemma">not_false_iff_true</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">repeat</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <span class="id" title="lemma">negb_true_iff</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">repeat</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <span class="id" title="lemma">negb_false_iff</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">repeat</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <span class="id" title="lemma">eqb_eq</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">repeat</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <span class="id" title="lemma">eqb_neq</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">repeat</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <span class="id" title="abbreviation">leb_iff</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">repeat</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <span class="id" title="lemma">leb_iff_conv</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">try</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">subst</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">simpl</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">repeat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">goal</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">st</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Imp.html#state"><span class="id" title="definition">state</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">goal</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">st</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">clear</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">st</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">*;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">clear</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">try</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eauto</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">try</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">lia</span></a>.<br/>

<br/>
</div>

<div class="doc">
This makes it pretty easy to verify <span class="inlinecode"><span class="id" title="var">reduce_to_zero</span></span>: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="reduce_to_zero_correct'''" class="idref" href="#reduce_to_zero_correct'''"><span class="id" title="lemma">reduce_to_zero_correct'''</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a><a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#reduce_to_zero"><span class="id" title="definition">reduce_to_zero</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a><a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">unfold</span></a> <a class="idref" href="PLF.Hoare2.html#reduce_to_zero"><span class="id" title="definition">reduce_to_zero</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_consequence_post"><span class="id" title="lemma">hoare_consequence_post</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_while"><span class="id" title="lemma">hoare_while</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">×</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_asgn"><span class="id" title="lemma">hoare_asgn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">×</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">verify_assertion</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">verify_assertion</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
This example shows that it is conceptually straightforward to read
    off the main elements of a formal proof from a decorated program.
    Indeed, the process is so straightforward that it can be
    automated, as we will see next. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab99"></a><h1 class="section">Formal Decorated Programs</h1>

<div class="paragraph"> </div>

 Our informal conventions for decorated programs amount to a
    way of "displaying" Hoare triples, in which commands are annotated
    with enough embedded assertions that checking the validity of a
    triple is reduced to simple logical and algebraic calculations
    showing that some assertions imply others.

<div class="paragraph"> </div>

    In this section, we show that this presentation style can be made
    completely formal -- and indeed that checking the validity of
    decorated programs can be largely automated.  
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab100"></a><h2 class="section">Syntax</h2>

<div class="paragraph"> </div>

 The first thing we need to do is to formalize a variant of the
    syntax of Imp commands that includes embedded assertions, which
    we'll call "decorations."  We call the new commands <i>decorated
    commands</i>, or <span class="inlinecode"><span class="id" title="var">dcom</span></span>s.

<div class="paragraph"> </div>

    The choice of exactly where to put assertions in the definition of
    <span class="inlinecode"><span class="id" title="var">dcom</span></span> is a bit subtle.  The simplest thing to do would be to
    annotate every <span class="inlinecode"><span class="id" title="var">dcom</span></span> with a precondition and postcondition --
    something like this... 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="DComFirstTry" class="idref" href="#DComFirstTry"><span class="id" title="module">DComFirstTry</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="DComFirstTry.dcom" class="idref" href="#DComFirstTry.dcom"><span class="id" title="definition, inductive"><span id="DComFirstTry.dcom_rect" class="id"><span id="DComFirstTry.dcom_ind" class="id"><span id="DComFirstTry.dcom_rec" class="id"><span id="DComFirstTry.dcom_sind" class="id">dcom</span></span></span></span></span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Type</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DComFirstTry.DCSkip" class="idref" href="#DComFirstTry.DCSkip"><span class="id" title="constructor">DCSkip</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P:3" class="idref" href="#P:3"><span class="id" title="binder">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DComFirstTry.DCSeq" class="idref" href="#DComFirstTry.DCSeq"><span class="id" title="constructor">DCSeq</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P:4" class="idref" href="#P:4"><span class="id" title="binder">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d1:5" class="idref" href="#d1:5"><span class="id" title="binder">d1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom:1"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="Q:6" class="idref" href="#Q:6"><span class="id" title="binder">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d2:7" class="idref" href="#d2:7"><span class="id" title="binder">d2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom:1"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="R:8" class="idref" href="#R:8"><span class="id" title="binder">R</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DComFirstTry.DCAsgn" class="idref" href="#DComFirstTry.DCAsgn"><span class="id" title="constructor">DCAsgn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="X:9" class="idref" href="#X:9"><span class="id" title="binder">X</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <span class="id" title="inductive">string</span><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="a:10" class="idref" href="#a:10"><span class="id" title="binder">a</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Imp.html#aexp"><span class="id" title="inductive">aexp</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="Q:11" class="idref" href="#Q:11"><span class="id" title="binder">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DComFirstTry.DCIf" class="idref" href="#DComFirstTry.DCIf"><span class="id" title="constructor">DCIf</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P:12" class="idref" href="#P:12"><span class="id" title="binder">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="b:13" class="idref" href="#b:13"><span class="id" title="binder">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Imp.html#bexp"><span class="id" title="inductive">bexp</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P1:14" class="idref" href="#P1:14"><span class="id" title="binder">P1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d1:15" class="idref" href="#d1:15"><span class="id" title="binder">d1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom:1"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P2:16" class="idref" href="#P2:16"><span class="id" title="binder">P2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d2:17" class="idref" href="#d2:17"><span class="id" title="binder">d2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom:1"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="Q:18" class="idref" href="#Q:18"><span class="id" title="binder">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DComFirstTry.DCWhile" class="idref" href="#DComFirstTry.DCWhile"><span class="id" title="constructor">DCWhile</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P:19" class="idref" href="#P:19"><span class="id" title="binder">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="b:20" class="idref" href="#b:20"><span class="id" title="binder">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Imp.html#bexp"><span class="id" title="inductive">bexp</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P1:21" class="idref" href="#P1:21"><span class="id" title="binder">P1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d:22" class="idref" href="#d:22"><span class="id" title="binder">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom:1"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P2:23" class="idref" href="#P2:23"><span class="id" title="binder">P2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="Q:24" class="idref" href="#Q:24"><span class="id" title="binder">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DComFirstTry.DCPre" class="idref" href="#DComFirstTry.DCPre"><span class="id" title="constructor">DCPre</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P:25" class="idref" href="#P:25"><span class="id" title="binder">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d:26" class="idref" href="#d:26"><span class="id" title="binder">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom:1"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DComFirstTry.DCPost" class="idref" href="#DComFirstTry.DCPost"><span class="id" title="constructor">DCPost</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d:27" class="idref" href="#d:27"><span class="id" title="binder">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom:1"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="Q:28" class="idref" href="#Q:28"><span class="id" title="binder">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="PLF.Hoare2.html#DComFirstTry"><span class="id" title="module">DComFirstTry</span></a>.<br/>

<br/>
</div>

<div class="doc">
But this would result in <i>very</i> verbose decorated programs with a
    lot of repeated annotations: even a simple program like
    <span class="inlinecode"><span class="id" title="var">skip</span>;<span class="id" title="var">skip</span></span> would be decorated like this,

<div class="paragraph"> </div>

        <a href="P">P</a> (<a href="P">P</a> skip <a href="P">P</a>) ; (<a href="P">P</a> skip <a href="P">P</a>) <a href="P">P</a>

<div class="paragraph"> </div>

    with pre- and post-conditions around each <span class="inlinecode"><span class="id" title="var">skip</span></span>, plus identical
    pre- and post-conditions on the semicolon! 
<div class="paragraph"> </div>

 In other words, we don't want both preconditions and
    postconditions on each command, because a sequence of two commands
    would contain redundant decorations--the postcondition of the
    first likely being the same as the precondition of the second.

<div class="paragraph"> </div>

    Instead, the formal syntax of decorated commands omits
    preconditions whenever possible, trying to embed just the
    postcondition. 
<div class="paragraph"> </div>

<ul class="doclist">
<li> The <span class="inlinecode"><span class="id" title="var">skip</span></span> command, for example, is decorated only with its
      postcondition

<div class="paragraph"> </div>

      skip <a href=" Q "> Q </a>

<div class="paragraph"> </div>

      on the assumption that the precondition will be provided by the
      context.

<div class="paragraph"> </div>

      We carry the same assumption through the other syntactic forms:
      each decorated command is assumed to carry its own postcondition
      within itself but take its precondition from its context in
      which it is used. 
</li>
</ul>

<div class="paragraph"> </div>

<ul class="doclist">
<li> Sequences <span class="inlinecode"><span class="id" title="var">d1</span></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="var">d2</span></span> need no additional decorations.

<div class="paragraph"> </div>

      Why?

<div class="paragraph"> </div>

      Because inside <span class="inlinecode"><span class="id" title="var">d2</span></span> there will be a postcondition; this serves
      as the postcondition of <span class="inlinecode"><span class="id" title="var">d1</span>;<span class="id" title="var">d2</span></span>.

<div class="paragraph"> </div>

      Similarly, inside <span class="inlinecode"><span class="id" title="var">d1</span></span> there will also be a postcondition, which
      additionally serves as the <i>precondition</i> for <span class="inlinecode"><span class="id" title="var">d2</span></span>. 
</li>
</ul>

<div class="paragraph"> </div>

<ul class="doclist">
<li> An assignment <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">a</span></span> is decorated only with its postcondition:

<div class="paragraph"> </div>

      X := a <a href=" Q "> Q </a>

</li>
</ul>

<div class="paragraph"> </div>

<ul class="doclist">
<li> A conditional <span class="inlinecode"><span class="id" title="keyword">if</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">d1</span></span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">d2</span></span> is decorated with a
      postcondition for the entire statement, as well as preconditions
      for each branch:

<div class="paragraph"> </div>

      if b then <a href=" P1 "> P1 </a> d1 else <a href=" P2 "> P2 </a> d2 end <a href=" Q "> Q </a>

</li>
</ul>

<div class="paragraph"> </div>

<ul class="doclist">
<li> A loop <span class="inlinecode"><span class="id" title="var">while</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode"><span class="id" title="tactic">do</span></span> <span class="inlinecode"><span class="id" title="var">d</span></span> <span class="inlinecode"><span class="id" title="keyword">end</span></span> is decorated with its postcondition
      and a precondition for the body:

<div class="paragraph"> </div>

      while b do <a href=" P "> P </a> d end <a href=" Q "> Q </a>

<div class="paragraph"> </div>

      The postcondition embedded in <span class="inlinecode"><span class="id" title="var">d</span></span> serves as the loop invariant. 
</li>
</ul>

<div class="paragraph"> </div>

<ul class="doclist">
<li> Implications <span class="inlinecode">-&gt;&gt;</span> can be added as decorations either for a
      precondition

<div class="paragraph"> </div>

<ul class="doclist">
<li>&gt;&gt; <a href=" P "> P </a> d

<div class="paragraph"> </div>


</li>
</ul>
      or for a postcondition

<div class="paragraph"> </div>

      d -&gt;&gt; <a href=" Q "> Q </a>

<div class="paragraph"> </div>

      The former is waiting for another precondition to be supplied by
      the context (e.g., <span class="inlinecode">{{</span> <span class="inlinecode"><span class="id" title="var">P'</span>}}</span> <span class="inlinecode">-&gt;&gt;</span> <span class="inlinecode">{{</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">}}</span> <span class="inlinecode"><span class="id" title="var">d</span></span>); the latter relies
      on the postcondition already embedded in <span class="inlinecode"><span class="id" title="var">d</span></span>. 
</li>
</ul>

<div class="paragraph"> </div>

 Putting this all together gives us the formal syntax of decorated
    commands: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="dcom" class="idref" href="#dcom"><span class="id" title="definition, inductive"><span id="dcom_rect" class="id"><span id="dcom_ind" class="id"><span id="dcom_rec" class="id"><span id="dcom_sind" class="id">dcom</span></span></span></span></span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Type</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DCSkip" class="idref" href="#DCSkip"><span class="id" title="constructor">DCSkip</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="Q:31" class="idref" href="#Q:31"><span class="id" title="binder">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DCSeq" class="idref" href="#DCSeq"><span class="id" title="constructor">DCSeq</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d1:32" class="idref" href="#d1:32"><span class="id" title="binder">d1</span></a> <a id="d2:33" class="idref" href="#d2:33"><span class="id" title="binder">d2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom:29"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DCAsgn" class="idref" href="#DCAsgn"><span class="id" title="constructor">DCAsgn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="X:34" class="idref" href="#X:34"><span class="id" title="binder">X</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <span class="id" title="inductive">string</span><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="a:35" class="idref" href="#a:35"><span class="id" title="binder">a</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Imp.html#aexp"><span class="id" title="inductive">aexp</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="Q:36" class="idref" href="#Q:36"><span class="id" title="binder">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DCIf" class="idref" href="#DCIf"><span class="id" title="constructor">DCIf</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="b:37" class="idref" href="#b:37"><span class="id" title="binder">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Imp.html#bexp"><span class="id" title="inductive">bexp</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P1:38" class="idref" href="#P1:38"><span class="id" title="binder">P1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d1:39" class="idref" href="#d1:39"><span class="id" title="binder">d1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom:29"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P2:40" class="idref" href="#P2:40"><span class="id" title="binder">P2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d2:41" class="idref" href="#d2:41"><span class="id" title="binder">d2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom:29"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="Q:42" class="idref" href="#Q:42"><span class="id" title="binder">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DCWhile" class="idref" href="#DCWhile"><span class="id" title="constructor">DCWhile</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="b:43" class="idref" href="#b:43"><span class="id" title="binder">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Imp.html#bexp"><span class="id" title="inductive">bexp</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P:44" class="idref" href="#P:44"><span class="id" title="binder">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d:45" class="idref" href="#d:45"><span class="id" title="binder">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom:29"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="Q:46" class="idref" href="#Q:46"><span class="id" title="binder">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DCPre" class="idref" href="#DCPre"><span class="id" title="constructor">DCPre</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P:47" class="idref" href="#P:47"><span class="id" title="binder">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d:48" class="idref" href="#d:48"><span class="id" title="binder">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom:29"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="DCPost" class="idref" href="#DCPost"><span class="id" title="constructor">DCPost</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d:49" class="idref" href="#d:49"><span class="id" title="binder">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom:29"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="Q:50" class="idref" href="#Q:50"><span class="id" title="binder">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;.<br/>

<br/>
</div>

<div class="doc">
To provide the initial precondition that goes at the very top of a
    decorated program, we introduce a new type <span class="inlinecode"><span class="id" title="var">decorated</span></span>: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="decorated" class="idref" href="#decorated"><span class="id" title="definition, inductive"><span id="decorated_rect" class="id"><span id="decorated_ind" class="id"><span id="decorated_rec" class="id"><span id="decorated_sind" class="id">decorated</span></span></span></span></span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Type</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a id="Decorated" class="idref" href="#Decorated"><span class="id" title="constructor">Decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.Hoare2.html#dcom"><span class="id" title="inductive">dcom</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.Hoare2.html#decorated:51"><span class="id" title="inductive">decorated</span></a>.<br/>

<br/>
</div>

<div class="doc">
To avoid clashing with the existing <span class="inlinecode"><span class="id" title="keyword">Notation</span></span>s for ordinary
    commands, we introduce these notations in a new grammar scope
    called <span class="inlinecode"><span class="id" title="var">dcom</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Declare Scope</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">dcom_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="96a08d9d8c7f327acf2f44c46454fe1a" class="idref" href="#96a08d9d8c7f327acf2f44c46454fe1a"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">'skip' {{ P }}</span></a>"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#DCSkip"><span class="id" title="constructor">DCSkip</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">assn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">99)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">dcom_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="6fc777e17570559fe34310ebff6e74b3" class="idref" href="#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">l ':=' a {{ P }}</span></a>"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#DCAsgn"><span class="id" title="constructor">DCAsgn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">l</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">a</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">l</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">constr</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">a</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">85,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">assn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">99,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">no</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">associativity</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">dcom_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="88a349ad7000af9e3380552dd1d95d34" class="idref" href="#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">'while' b 'do' {{ Pbody }} d 'end' {{ Ppost }}</span></a>"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#DCWhile"><span class="id" title="constructor">DCWhile</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Pbody</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Ppost</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">89,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">99,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Pbody</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">assn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">99,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Ppost</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">assn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">99)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">dcom_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="19537bd922ef12a4bb3739b50ff7c563" class="idref" href="#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">'if' b 'then' {{ P }} d 'else' {{ P' }} d' 'end' {{ Q }}</span></a>"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#DCIf"><span class="id" title="constructor">DCIf</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P'</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d'</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">89,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">99,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">assn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">99,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P'</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">assn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">99,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">assn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">99)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">dcom_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="28f0157bba7bd3bf8c17b67532ba84f8" class="idref" href="#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">'-&gt;&gt;' {{ P }} d</span></a>"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#DCPre"><span class="id" title="constructor">DCPre</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">12,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">right</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">associativity</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">assn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">99)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">dcom_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="d9c679d5e5db96e17592c387975218ee" class="idref" href="#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d '-&gt;&gt;' {{ P }}</span></a>"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#DCPost"><span class="id" title="constructor">DCPost</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">10,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">right</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">associativity</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">assn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">99)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">dcom_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="171c4c95468da881f236e87b2dcc4ffa" class="idref" href="#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation"> d ; d' </span></a>"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#DCSeq"><span class="id" title="constructor">DCSeq</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d'</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">90,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">right</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">associativity</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">dcom_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="c00c27417ee45ebadf9f604729ad35ca" class="idref" href="#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">{{ P }} d</span></a>"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#Decorated"><span class="id" title="constructor">Decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">91,</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">assn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">99)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">dcom_scope</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Scope</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">dcom_scope</span></a>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="dec0" class="idref" href="#dec0"><span class="id" title="definition">dec0</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom"><span class="id" title="inductive">dcom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Hoare2.html#96a08d9d8c7f327acf2f44c46454fe1a"><span class="id" title="notation">skip</span></a> <a class="idref" href="PLF.Hoare2.html#96a08d9d8c7f327acf2f44c46454fe1a"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare2.html#96a08d9d8c7f327acf2f44c46454fe1a"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>
<span class="id" title="keyword">Example</span> <a id="dec1" class="idref" href="#dec1"><span class="id" title="definition">dec1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom"><span class="id" title="inductive">dcom</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Imp.html#:com::'true'"><span class="id" title="notation">true</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">do</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#96a08d9d8c7f327acf2f44c46454fe1a"><span class="id" title="notation">skip</span></a> <a class="idref" href="PLF.Hoare2.html#96a08d9d8c7f327acf2f44c46454fe1a"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare2.html#96a08d9d8c7f327acf2f44c46454fe1a"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">end</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
Recall that you can <span class="inlinecode"><span class="id" title="keyword">Set</span></span> <span class="inlinecode"><span class="id" title="keyword">Printing</span></span> <span class="inlinecode"><span class="id" title="keyword">All</span></span> to see how all that
    notation is desugared. 
</div>
<div class="code">
<span class="id" title="keyword">Set Printing All</span>.<br/>
<span class="id" title="keyword">Print</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">dec1</span></a>.<br/>
<span class="id" title="keyword">Unset Printing All</span>.<br/>

<br/>
</div>

<div class="doc">
An example <span class="inlinecode"><span class="id" title="var">decorated</span></span> program that decrements <span class="inlinecode"><span class="id" title="var">X</span></span> to <span class="inlinecode">0</span>: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <a id="dec_while" class="idref" href="#dec_while"><span class="id" title="definition">dec_while</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">do</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a>  <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a><a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
It is easy to go from a <span class="inlinecode"><span class="id" title="var">dcom</span></span> to a <span class="inlinecode"><span class="id" title="var">com</span></span> by erasing all
    annotations. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="erase" class="idref" href="#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d:53" class="idref" href="#d:53"><span class="id" title="binder">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Imp.html#com"><span class="id" title="inductive">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare2.html#d:53"><span class="id" title="variable">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCSkip"><span class="id" title="constructor">DCSkip</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a>           <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Imp.html#CSkip"><span class="id" title="constructor">CSkip</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCSeq"><span class="id" title="constructor">DCSeq</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d2</span></a>        <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Imp.html#CSeq"><span class="id" title="constructor">CSeq</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#erase:54"><span class="id" title="definition">erase</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d1</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#erase:54"><span class="id" title="definition">erase</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d2</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCAsgn"><span class="id" title="constructor">DCAsgn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">X</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">a</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a>       <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Imp.html#CAsgn"><span class="id" title="constructor">CAsgn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">X</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">a</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCIf"><span class="id" title="constructor">DCIf</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Imp.html#CIf"><span class="id" title="constructor">CIf</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#erase:54"><span class="id" title="definition">erase</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d1</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#erase:54"><span class="id" title="definition">erase</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d2</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCWhile"><span class="id" title="constructor">DCWhile</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a>    <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Imp.html#CWhile"><span class="id" title="constructor">CWhile</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#erase:54"><span class="id" title="definition">erase</span></a> <a class="idref" href="PLF.Hoare2.html#d:53"><span class="id" title="variable">d</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCPre"><span class="id" title="constructor">DCPre</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a>          <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare2.html#erase:54"><span class="id" title="definition">erase</span></a> <a class="idref" href="PLF.Hoare2.html#d:53"><span class="id" title="variable">d</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCPost"><span class="id" title="constructor">DCPost</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a>         <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare2.html#erase:54"><span class="id" title="definition">erase</span></a> <a class="idref" href="PLF.Hoare2.html#d:53"><span class="id" title="variable">d</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="erase_d" class="idref" href="#erase_d"><span class="id" title="definition">erase_d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="dec:56" class="idref" href="#dec:56"><span class="id" title="binder">dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Imp.html#com"><span class="id" title="inductive">com</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare2.html#dec:56"><span class="id" title="variable">dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#Decorated"><span class="id" title="constructor">Decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare2.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="erase_while_ex" class="idref" href="#erase_while_ex"><span class="id" title="definition">erase_while_ex</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#erase_d"><span class="id" title="definition">erase_d</span></a> <a class="idref" href="PLF.Hoare2.html#dec_while"><span class="id" title="definition">dec_while</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.Imp.html#:com:com_scope:'while'_x_'do'_x_'end'"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Imp.html#:com:com_scope:'while'_x_'do'_x_'end'"><span class="id" title="notation">do</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#91e9aa710642047a93142bdf557f1a1b"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a> <a class="idref" href="PLF.Imp.html#:com:com_scope:'while'_x_'do'_x_'end'"><span class="id" title="notation">end</span></a><a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">unfold</span></a> <a class="idref" href="PLF.Hoare2.html#dec_while"><span class="id" title="definition">dec_while</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">reflexivity</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
It is also straightforward to extract the precondition and
    postcondition from a decorated program. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="precondition_from" class="idref" href="#precondition_from"><span class="id" title="definition">precondition_from</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="dec:58" class="idref" href="#dec:58"><span class="id" title="binder">dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare2.html#dec:58"><span class="id" title="variable">dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#Decorated"><span class="id" title="constructor">Decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="post" class="idref" href="#post"><span class="id" title="definition">post</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d:60" class="idref" href="#d:60"><span class="id" title="binder">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare2.html#d:60"><span class="id" title="variable">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCSkip"><span class="id" title="constructor">DCSkip</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a>                <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCSeq"><span class="id" title="constructor">DCSeq</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d2</span></a>              <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare2.html#post:61"><span class="id" title="definition">post</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d2</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCAsgn"><span class="id" title="constructor">DCAsgn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a>            <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCIf"><span class="id" title="constructor">DCIf</span></a>  <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a>       <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCWhile"><span class="id" title="constructor">DCWhile</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a>         <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCPre"><span class="id" title="constructor">DCPre</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a>               <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare2.html#post:61"><span class="id" title="definition">post</span></a> <a class="idref" href="PLF.Hoare2.html#d:60"><span class="id" title="variable">d</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCPost"><span class="id" title="constructor">DCPost</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">_</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a>              <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="postcondition_from" class="idref" href="#postcondition_from"><span class="id" title="definition">postcondition_from</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="dec:63" class="idref" href="#dec:63"><span class="id" title="binder">dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare2.html#dec:63"><span class="id" title="variable">dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#Decorated"><span class="id" title="constructor">Decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare2.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="precondition_from_while" class="idref" href="#precondition_from_while"><span class="id" title="definition">precondition_from_while</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#precondition_from"><span class="id" title="definition">precondition_from</span></a> <a class="idref" href="PLF.Hoare2.html#dec_while"><span class="id" title="definition">dec_while</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#:::'True'"><span class="id" title="notation">True</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">reflexivity</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="postcondition_from_while" class="idref" href="#postcondition_from_while"><span class="id" title="definition">postcondition_from_while</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#postcondition_from"><span class="id" title="definition">postcondition_from</span></a> <a class="idref" href="PLF.Hoare2.html#dec_while"><span class="id" title="definition">dec_while</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">}}</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">reflexivity</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
We can then express what it means for a decorated program to be
    correct as follows: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="outer_triple_valid" class="idref" href="#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="dec:65" class="idref" href="#dec:65"><span class="id" title="binder">dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare.html#050af2f8cd8a66ec7a9cad8a003de70c"><span class="id" title="notation">$(</span></a><a class="idref" href="PLF.Hoare2.html#precondition_from"><span class="id" title="definition">precondition_from</span></a> <a class="idref" href="PLF.Hoare2.html#dec:65"><span class="id" title="variable">dec</span></a><a class="idref" href="PLF.Hoare.html#050af2f8cd8a66ec7a9cad8a003de70c"><span class="id" title="notation">)</span></a><a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#erase_d"><span class="id" title="definition">erase_d</span></a> <a class="idref" href="PLF.Hoare2.html#dec:65"><span class="id" title="variable">dec</span></a> <a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare.html#050af2f8cd8a66ec7a9cad8a003de70c"><span class="id" title="notation">$(</span></a><a class="idref" href="PLF.Hoare2.html#postcondition_from"><span class="id" title="definition">postcondition_from</span></a> <a class="idref" href="PLF.Hoare2.html#dec:65"><span class="id" title="variable">dec</span></a><a class="idref" href="PLF.Hoare.html#050af2f8cd8a66ec7a9cad8a003de70c"><span class="id" title="notation">)</span></a><a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>

<br/>
</div>

<div class="doc">
For example: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <a id="dec_while_triple_correct" class="idref" href="#dec_while_triple_correct"><span class="id" title="definition">dec_while_triple_correct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare2.html#dec_while"><span class="id" title="definition">dec_while</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#:com:com_scope:'while'_x_'do'_x_'end'"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Imp.html#:com:com_scope:'while'_x_'do'_x_'end'"><span class="id" title="notation">do</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#91e9aa710642047a93142bdf557f1a1b"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a> <a class="idref" href="PLF.Imp.html#:com:com_scope:'while'_x_'do'_x_'end'"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">reflexivity</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
The outer Hoare triple of a decorated program is just a <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>;
    thus, to show that it is <i>valid</i>, we need to produce a proof of
    this proposition.

<div class="paragraph"> </div>

    We will do this by extracting "proof obligations" from the
    decorations sprinkled through the program.

<div class="paragraph"> </div>

    These obligations are often called <i>verification conditions</i>,
    because they are the facts that must be verified to see that the
    decorations are locally consistent and thus constitute a proof of
    validity of the outer triple. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab101"></a><h2 class="section">Extracting Verification Conditions</h2>

<div class="paragraph"> </div>

 The function <span class="inlinecode"><span class="id" title="var">verification_conditions</span></span> takes a decorated command
    <span class="inlinecode"><span class="id" title="var">d</span></span> together with a precondition <span class="inlinecode"><span class="id" title="var">P</span></span> and returns a <i>proposition</i>
    that, if it can be proved, implies that the triple

<div class="paragraph"> </div>

     <a href="P">P</a> erase d <a href="post d">post d</a>

<div class="paragraph"> </div>

    is valid.

<div class="paragraph"> </div>

    It does this by walking over <span class="inlinecode"><span class="id" title="var">d</span></span> and generating a big conjunction
    that includes

<div class="paragraph"> </div>

<ul class="doclist">
<li> local consistency checks for each form of command, plus

<div class="paragraph"> </div>


</li>
<li> uses of <span class="inlinecode">-&gt;&gt;</span> to bridge the gap between the assertions found
      inside a decorated command and the assertions imposed by the
      precondition from its context; these uses correspond to
      applications of the consequence rule. 
</li>
</ul>

<div class="paragraph"> </div>

 <i>Local consistency</i> is defined as follows... 
<div class="paragraph"> </div>

<ul class="doclist">
<li> The decorated command

<div class="paragraph"> </div>

        skip <a href="Q">Q</a>

<div class="paragraph"> </div>

      is locally consistent with respect to a precondition <span class="inlinecode"><span class="id" title="var">P</span></span> if
      <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">-&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">Q</span></span>.

</li>
</ul>

<div class="paragraph"> </div>

<ul class="doclist">
<li> The sequential composition of <span class="inlinecode"><span class="id" title="var">d1</span></span> and <span class="inlinecode"><span class="id" title="var">d2</span></span> is locally
      consistent with respect to <span class="inlinecode"><span class="id" title="var">P</span></span> if <span class="inlinecode"><span class="id" title="var">d1</span></span> is locally consistent with
      respect to <span class="inlinecode"><span class="id" title="var">P</span></span> and <span class="inlinecode"><span class="id" title="var">d2</span></span> is locally consistent with respect to
      the postcondition of <span class="inlinecode"><span class="id" title="var">d1</span></span>. 
</li>
</ul>

<div class="paragraph"> </div>

<ul class="doclist">
<li> An assignment

<div class="paragraph"> </div>

        X := a <a href="Q">Q</a>

<div class="paragraph"> </div>

      is locally consistent with respect to a precondition <span class="inlinecode"><span class="id" title="var">P</span></span> if:

<div class="paragraph"> </div>

        P -&gt;&gt; Q <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">|-&gt;</span> <span class="inlinecode"><span class="id" title="var">a</span></span>

</li>
</ul>

<div class="paragraph"> </div>

<ul class="doclist">
<li> A conditional

<div class="paragraph"> </div>

      if b then <a href="P1">P1</a> d1 else <a href="P2">P2</a> d2 end <a href="Q">Q</a>

<div class="paragraph"> </div>

      is locally consistent with respect to precondition <span class="inlinecode"><span class="id" title="var">P</span></span> if

<div class="paragraph"> </div>

         (1) <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode">-&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">P1</span></span>

<div class="paragraph"> </div>

         (2) <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">∧</span> <span class="inlinecode">¬<span class="id" title="var">b</span></span> <span class="inlinecode">-&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">P2</span></span>

<div class="paragraph"> </div>

         (3) <span class="inlinecode"><span class="id" title="var">d1</span></span> is locally consistent with respect to <span class="inlinecode"><span class="id" title="var">P1</span></span>

<div class="paragraph"> </div>

         (4) <span class="inlinecode"><span class="id" title="var">d2</span></span> is locally consistent with respect to <span class="inlinecode"><span class="id" title="var">P2</span></span>

<div class="paragraph"> </div>

         (5) <span class="inlinecode"><span class="id" title="var">post</span></span> <span class="inlinecode"><span class="id" title="var">d1</span></span> <span class="inlinecode">-&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">Q</span></span>

<div class="paragraph"> </div>

         (6) <span class="inlinecode"><span class="id" title="var">post</span></span> <span class="inlinecode"><span class="id" title="var">d2</span></span> <span class="inlinecode">-&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">Q</span></span>

</li>
</ul>
<ul class="doclist">
<li> A loop

<div class="paragraph"> </div>

      while b do <a href="Q">Q</a> d end <a href="R">R</a>

<div class="paragraph"> </div>

      is locally consistent with respect to precondition <span class="inlinecode"><span class="id" title="var">P</span></span> if:

<div class="paragraph"> </div>

         (1) <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">-&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">post</span></span> <span class="inlinecode"><span class="id" title="var">d</span></span>

<div class="paragraph"> </div>

         (2) <span class="inlinecode"><span class="id" title="var">post</span></span> <span class="inlinecode"><span class="id" title="var">d</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode">-&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">Q</span></span>

<div class="paragraph"> </div>

         (3) <span class="inlinecode"><span class="id" title="var">post</span></span> <span class="inlinecode"><span class="id" title="var">d</span></span> <span class="inlinecode">∧</span> <span class="inlinecode">¬<span class="id" title="var">b</span></span> <span class="inlinecode">-&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">R</span></span>

<div class="paragraph"> </div>

         (4) <span class="inlinecode"><span class="id" title="var">d</span></span> is locally consistent with respect to <span class="inlinecode"><span class="id" title="var">Q</span></span>

</li>
</ul>

<div class="paragraph"> </div>

<ul class="doclist">
<li> A command with an extra assertion at the beginning

<div class="paragraph"> </div>

<ul class="doclist">
<li>-&gt; <a href="Q">Q</a> d

<div class="paragraph"> </div>


</li>
</ul>
      is locally consistent with respect to a precondition <span class="inlinecode"><span class="id" title="var">P</span></span> if:

<div class="paragraph"> </div>

        (1) <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">-&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">Q</span></span>

<div class="paragraph"> </div>

        (2) <span class="inlinecode"><span class="id" title="var">d</span></span> is locally consistent with respect to <span class="inlinecode"><span class="id" title="var">Q</span></span>

</li>
</ul>

<div class="paragraph"> </div>

<ul class="doclist">
<li> A command with an extra assertion at the end

<div class="paragraph"> </div>

         d -&gt;&gt; <a href="Q">Q</a>

<div class="paragraph"> </div>

      is locally consistent with respect to a precondition <span class="inlinecode"><span class="id" title="var">P</span></span> if:

<div class="paragraph"> </div>

        (1) <span class="inlinecode"><span class="id" title="var">d</span></span> is locally consistent with respect to <span class="inlinecode"><span class="id" title="var">P</span></span>

<div class="paragraph"> </div>

        (2) <span class="inlinecode"><span class="id" title="var">post</span></span> <span class="inlinecode"><span class="id" title="var">d</span></span> <span class="inlinecode">-&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">Q</span></span>

</li>
</ul>

<div class="paragraph"> </div>

 With all this in mind, we can write is a <i>verification condition
    generator</i> that takes a decorated command and reads off a
    proposition saying that all its decorations are locally
    consistent.

<div class="paragraph"> </div>

    Formally, since a decorated command is "waiting for its
    precondition" the main VC generator takes a <span class="inlinecode"><span class="id" title="var">dcom</span></span> plus a given
    predondition as arguments.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="verification_conditions" class="idref" href="#verification_conditions"><span class="id" title="definition">verification_conditions</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="P:66" class="idref" href="#P:66"><span class="id" title="binder">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="d:67" class="idref" href="#d:67"><span class="id" title="binder">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#dcom"><span class="id" title="inductive">dcom</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Prop</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare2.html#d:67"><span class="id" title="variable">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCSkip"><span class="id" title="constructor">DCSkip</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#P:66"><span class="id" title="variable">P</span></a> <a class="idref" href="PLF.Hoare.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCSeq"><span class="id" title="constructor">DCSeq</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#verification_conditions:68"><span class="id" title="definition">verification_conditions</span></a> <a class="idref" href="PLF.Hoare2.html#P:66"><span class="id" title="variable">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare2.html#verification_conditions:68"><span class="id" title="definition">verification_conditions</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d1</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d2</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCAsgn"><span class="id" title="constructor">DCAsgn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">X</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">a</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#P:66"><span class="id" title="variable">P</span></a> <a class="idref" href="PLF.Hoare.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">X</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">a</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCIf"><span class="id" title="constructor">DCIf</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#P:66"><span class="id" title="variable">P</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#P:66"><span class="id" title="variable">P</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare.html#74028603b8e85e0c9ec50b4dbd7dfecd"><span class="id" title="notation">¬</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">}}</span></a>  <a class="idref" href="PLF.Hoare.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d1</span></a> <a class="idref" href="PLF.Hoare.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d2</span></a> <a class="idref" href="PLF.Hoare.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare2.html#verification_conditions:68"><span class="id" title="definition">verification_conditions</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare2.html#verification_conditions:68"><span class="id" title="definition">verification_conditions</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d2</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCWhile"><span class="id" title="constructor">DCWhile</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">R</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#P:66"><span class="id" title="variable">P</span></a> <a class="idref" href="PLF.Hoare.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="PLF.Hoare2.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="PLF.Hoare2.html#d:67"><span class="id" title="variable">d</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#050af2f8cd8a66ec7a9cad8a003de70c"><span class="id" title="notation">$(</span></a><a class="idref" href="PLF.Hoare2.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="PLF.Hoare2.html#d:67"><span class="id" title="variable">d</span></a><a class="idref" href="PLF.Hoare.html#050af2f8cd8a66ec7a9cad8a003de70c"><span class="id" title="notation">)</span></a>  <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#050af2f8cd8a66ec7a9cad8a003de70c"><span class="id" title="notation">$(</span></a><a class="idref" href="PLF.Hoare2.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="PLF.Hoare2.html#d:67"><span class="id" title="variable">d</span></a><a class="idref" href="PLF.Hoare.html#050af2f8cd8a66ec7a9cad8a003de70c"><span class="id" title="notation">)</span></a>  <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare.html#74028603b8e85e0c9ec50b4dbd7dfecd"><span class="id" title="notation">¬</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">b</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">R</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare2.html#verification_conditions:68"><span class="id" title="definition">verification_conditions</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a> <a class="idref" href="PLF.Hoare2.html#d:67"><span class="id" title="variable">d</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCPre"><span class="id" title="constructor">DCPre</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P'</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#P:66"><span class="id" title="variable">P</span></a> <a class="idref" href="PLF.Hoare.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P'</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare2.html#verification_conditions:68"><span class="id" title="definition">verification_conditions</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P'</span></a> <a class="idref" href="PLF.Hoare2.html#d:67"><span class="id" title="variable">d</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#DCPost"><span class="id" title="constructor">DCPost</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#verification_conditions:68"><span class="id" title="definition">verification_conditions</span></a> <a class="idref" href="PLF.Hoare2.html#P:66"><span class="id" title="variable">P</span></a> <a class="idref" href="PLF.Hoare2.html#d:67"><span class="id" title="variable">d</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="PLF.Hoare2.html#d:67"><span class="id" title="variable">d</span></a> <a class="idref" href="PLF.Hoare.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Q</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a>.<br/>

<br/>
</div>

<div class="doc">
The following key theorem states that <span class="inlinecode"><span class="id" title="var">verification_conditions</span></span>
    does its job correctly.  Not surprisingly, each of the Hoare Logic
    rules gets used at some point in the proof. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="verification_correct" class="idref" href="#verification_correct"><span class="id" title="lemma">verification_correct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="d:70" class="idref" href="#d:70"><span class="id" title="binder">d</span></a> <a id="P:71" class="idref" href="#P:71"><span class="id" title="binder">P</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#verification_conditions"><span class="id" title="definition">verification_conditions</span></a> <a class="idref" href="PLF.Hoare2.html#P:71"><span class="id" title="variable">P</span></a> <a class="idref" href="PLF.Hoare2.html#d:70"><span class="id" title="variable">d</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare2.html#P:71"><span class="id" title="variable">P</span></a><a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="PLF.Hoare2.html#d:70"><span class="id" title="variable">d</span></a> <a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#050af2f8cd8a66ec7a9cad8a003de70c"><span class="id" title="notation">$(</span></a><a class="idref" href="PLF.Hoare2.html#post"><span class="id" title="definition">post</span></a> <a class="idref" href="PLF.Hoare2.html#d:70"><span class="id" title="variable">d</span></a><a class="idref" href="PLF.Hoare.html#050af2f8cd8a66ec7a9cad8a003de70c"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">induction</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">intros</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">simpl</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">×</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_skip"><span class="id" title="lemma">hoare_skip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">assumption</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H2</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_seq"><span class="id" title="lemma">hoare_seq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">IHd2</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">IHd1</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H1</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_asgn"><span class="id" title="lemma">hoare_asgn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">assumption</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">HPre1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">HPre2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Hd1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Hd2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">HThen</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">HElse</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">IHd1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">HThen</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">clear</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">IHd1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">IHd2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">HElse</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">clear</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">IHd2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_if"><span class="id" title="lemma">hoare_if</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_consequence"><span class="id" title="lemma">hoare_consequence</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eauto</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_consequence"><span class="id" title="lemma">hoare_consequence</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eauto</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Hpre</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Hbody1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Hpost1</span></a>  <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Hd</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_consequence"><span class="id" title="lemma">hoare_consequence</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eauto</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_while"><span class="id" title="lemma">hoare_while</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eauto</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">HP</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Hd</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_consequence_pre"><span class="id" title="lemma">hoare_consequence_pre</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eauto</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Hd</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">HQ</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.Hoare.html#hoare_consequence_post"><span class="id" title="lemma">hoare_consequence_post</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">eauto</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
Now that all the pieces are in place, we can define what it means
    to verify an entire program. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="verification_conditions_from" class="idref" href="#verification_conditions_from"><span class="id" title="definition">verification_conditions_from</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="dec:72" class="idref" href="#dec:72"><span class="id" title="binder">dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Prop</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare2.html#dec:72"><span class="id" title="variable">dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare2.html#Decorated"><span class="id" title="constructor">Decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare2.html#verification_conditions"><span class="id" title="definition">verification_conditions</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a>.<br/>

<br/>
</div>

<div class="doc">
This brings us to the main theorem of this section: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Corollary</span> <a id="verification_conditions_correct" class="idref" href="#verification_conditions_correct"><span class="id" title="lemma">verification_conditions_correct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="dec:74" class="idref" href="#dec:74"><span class="id" title="binder">dec</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#verification_conditions_from"><span class="id" title="definition">verification_conditions_from</span></a> <a class="idref" href="PLF.Hoare2.html#dec:74"><span class="id" title="variable">dec</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare2.html#dec:74"><span class="id" title="variable">dec</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">P</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">d</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare2.html#verification_correct"><span class="id" title="lemma">verification_correct</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab102"></a><h2 class="section">More Automation</h2>

<div class="paragraph"> </div>

 The propositions generated by <span class="inlinecode"><span class="id" title="var">verification_conditions</span></span> are fairly
    big and contain many conjuncts that are essentially trivial. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Eval</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">simpl</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Hoare2.html#verification_conditions_from"><span class="id" title="definition">verification_conditions_from</span></a> <a class="idref" href="PLF.Hoare2.html#dec_while"><span class="id" title="definition">dec_while</span></a>.<br/>

<br/>
</div>

<div class="doc">
Fortunately, our <span class="inlinecode"><span class="id" title="var">verify_assertion</span></span> tactic can generally take care of
    most or all of them. 
</div>
<div class="code">
<span class="id" title="keyword">Example</span> <a id="vc_dec_while" class="idref" href="#vc_dec_while"><span class="id" title="definition">vc_dec_while</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#verification_conditions_from"><span class="id" title="definition">verification_conditions_from</span></a> <a class="idref" href="PLF.Hoare2.html#dec_while"><span class="id" title="definition">dec_while</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">verify_assertion</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
To automate the overall process of verification, we can use
    <span class="inlinecode"><span class="id" title="var">verification_correct</span></span> to extract the verification conditions, use
    <span class="inlinecode"><span class="id" title="var">verify_assertion</span></span> to verify them as much as it can, and finally tidy
    up any remaining bits by hand.  
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">verify</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">intros</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Hoare2.html#verification_correct"><span class="id" title="lemma">verification_correct</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">verify_assertion</span></a>.<br/>

<br/>
</div>

<div class="doc">
Here's the final, formal proof that dec_while is correct. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="dec_while_correct" class="idref" href="#dec_while_correct"><span class="id" title="lemma">dec_while_correct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare2.html#dec_while"><span class="id" title="definition">dec_while</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">verify</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
Similarly, here is the formal decorated program for the "swapping
    by adding and subtracting" example that we saw earlier. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="swap_dec" class="idref" href="#swap_dec"><span class="id" title="definition">swap_dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="m:75" class="idref" href="#m:75"><span class="id" title="binder">m</span></a> <a id="n:76" class="idref" href="#n:76"><span class="id" title="binder">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#m:75"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#n:76"><span class="id" title="variable">n</span></a><a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">((</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#n:76"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#m:75"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#n:76"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#m:75"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#n:76"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#m:75"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#n:76"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#m:75"><span class="id" title="variable">m</span></a><a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="swap_correct" class="idref" href="#swap_correct"><span class="id" title="lemma">swap_correct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="m:77" class="idref" href="#m:77"><span class="id" title="binder">m</span></a> <a id="n:78" class="idref" href="#n:78"><span class="id" title="binder">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#swap_dec"><span class="id" title="definition">swap_dec</span></a> <a class="idref" href="PLF.Hoare2.html#m:77"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#n:78"><span class="id" title="variable">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">verify</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
And here is the formal decorated version of the "positive
    difference" program from earlier: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="positive_difference_dec" class="idref" href="#positive_difference_dec"><span class="id" title="definition">positive_difference_dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a><a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">if</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#d43f15edd52d29ae8e0f90730a25ed5c"><span class="id" title="notation">≤</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#f9e963a42ba303abb7dc8a66eececf51"><span class="id" title="notation">≤</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#8fb785685f1b11b73aa3f553bf7053a2"><span class="id" title="notation">∨</span></a> <a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a><a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#8fb785685f1b11b73aa3f553bf7053a2"><span class="id" title="notation">∨</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a><a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare.html#74028603b8e85e0c9ec50b4dbd7dfecd"><span class="id" title="notation">¬</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#f9e963a42ba303abb7dc8a66eececf51"><span class="id" title="notation">≤</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a><a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#8fb785685f1b11b73aa3f553bf7053a2"><span class="id" title="notation">∨</span></a> <a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a><a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#8fb785685f1b11b73aa3f553bf7053a2"><span class="id" title="notation">∨</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a><a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#8fb785685f1b11b73aa3f553bf7053a2"><span class="id" title="notation">∨</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a><a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="positive_difference_correct" class="idref" href="#positive_difference_correct"><span class="id" title="lemma">positive_difference_correct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare2.html#positive_difference_dec"><span class="id" title="definition">positive_difference_dec</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">verify</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab103"></a><h4 class="section">Exercise: 2 stars, standard, especially useful (if_minus_plus_correct)</h4>


<div class="paragraph"> </div>

    Here is a skeleton of the formal decorated version of the
    <span class="inlinecode"><span class="id" title="var">if_minus_plus</span></span> program that we saw earlier.  Replace all
    occurrences of <span class="inlinecode"><span class="id" title="var">FILL_IN_HERE</span></span> with appropriate assertions and fill
    in the proof (which should be just as straightforward as in the
    examples above). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="if_minus_plus_dec" class="idref" href="#if_minus_plus_dec"><span class="id" title="definition">if_minus_plus_dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a><a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">if</span></a> <a class="idref" href="PLF.Imp.html#5a96623d056c293ebbcdf03005796e09"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#d43f15edd52d29ae8e0f90730a25ed5c"><span class="id" title="notation">≤</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><a class="idref" href="PLF.Imp.html#5a96623d056c293ebbcdf03005796e09"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">else</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a><a class="idref" href="PLF.Hoare2.html#19537bd922ef12a4bb3739b50ff7c563"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="if_minus_plus_correct" class="idref" href="#if_minus_plus_correct"><span class="id" title="lemma">if_minus_plus_correct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare2.html#if_minus_plus_dec"><span class="id" title="definition">if_minus_plus_dec</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
 <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a id="lab104"></a><h4 class="section">Exercise: 2 stars, standard, optional (div_mod_outer_triple_valid)</h4>


<div class="paragraph"> </div>

    Fill in appropriate assertions for the division program from above. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="div_mod_dec" class="idref" href="#div_mod_dec"><span class="id" title="definition">div_mod_dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="a:79" class="idref" href="#a:79"><span class="id" title="binder">a</span></a> <a id="b:80" class="idref" href="#b:80"><span class="id" title="binder">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare2.html#a:79"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Hoare2.html#b:80"><span class="id" title="variable">b</span></a> <a class="idref" href="PLF.Imp.html#d43f15edd52d29ae8e0f90730a25ed5c"><span class="id" title="notation">≤</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">do</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare2.html#b:80"><span class="id" title="variable">b</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="div_mod_outer_triple_valid" class="idref" href="#div_mod_outer_triple_valid"><span class="id" title="lemma">div_mod_outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="a:81" class="idref" href="#a:81"><span class="id" title="binder">a</span></a> <a id="b:82" class="idref" href="#b:82"><span class="id" title="binder">b</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#div_mod_dec"><span class="id" title="definition">div_mod_dec</span></a> <a class="idref" href="PLF.Hoare2.html#a:81"><span class="id" title="variable">a</span></a> <a class="idref" href="PLF.Hoare2.html#b:82"><span class="id" title="variable">b</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
 <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab105"></a><h1 class="section">Finding Loop Invariants</h1>

<div class="paragraph"> </div>

 Once the outermost precondition and postcondition are
    chosen, the only creative part of a verifying program using Hoare
    Logic is finding the right loop invariants.  The reason this is
    difficult is the same as the reason that inductive mathematical
    proofs are:

<div class="paragraph"> </div>

<ul class="doclist">
<li> Strengthening a <i>loop invariant</i> means that you have a stronger
      assumption to work with when trying to establish the
      postcondition of the loop body, but it also means that the loop
      body's postcondition is stronger and thus harder to prove.

<div class="paragraph"> </div>


</li>
<li> Similarly, strengthening an <i>induction hypothesis</i> means that
      you have a stronger assumption to work with when trying to
      complete the induction step of the proof, but it also means that
      the statement being proved inductively is stronger and thus
      harder to prove.

</li>
</ul>

<div class="paragraph"> </div>

    This section explains how to approach the challenge of finding
    loop invariants through a series of examples and exercises. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab106"></a><h2 class="section">Example: Slow Subtraction</h2>

<div class="paragraph"> </div>

 The following program subtracts the value of <span class="inlinecode"><span class="id" title="var">X</span></span> from the value of
    <span class="inlinecode"><span class="id" title="var">Y</span></span> by repeatedly decrementing both <span class="inlinecode"><span class="id" title="var">X</span></span> and <span class="inlinecode"><span class="id" title="var">Y</span></span>.  We want to verify its
    correctness with respect to the pre- and postconditions shown:

<div class="paragraph"> </div>

           <a href=" X = m /\ Y = n "> X = m /\ Y = n </a>
             while X &lt;&gt; 0 do
               Y := Y - 1;
               X := X - 1
             end
           <a href=" Y = n - m "> Y = n - m </a>

<div class="paragraph"> </div>

 To verify this program, we need to find an invariant <span class="inlinecode"><span class="id" title="var">Inv</span></span> for the
    loop.  As a first step we can leave <span class="inlinecode"><span class="id" title="var">Inv</span></span> as an unknown and build a
    <i>skeleton</i> for the proof by applying the rules for local
    consistency, working from the end of the program to the beginning,
    as usual, and without any thinking at all yet. 
<div class="paragraph"> </div>

 This leads to the following skeleton:

<div class="paragraph"> </div>

        (1)    <a href=" X = m /\ Y = n "> X = m /\ Y = n </a>  -&gt;&gt;                   (a)
        (2)    <a href=" Inv "> Inv </a>
                 while X &lt;&gt; 0 do
        (3)              <a href=" Inv /\ X <> 0 "> Inv /\ X <> 0 </a>  -&gt;&gt;          (c)
        (4)              <a href=" Inv [X |-> X-1] [Y |-> Y-1] "> Inv [X |-> X-1] [Y |-> Y-1] </a>
                   Y := Y - 1;
        (5)              <a href=" Inv [X |-> X-1] "> Inv [X |-> X-1] </a>
                   X := X - 1
        (6)              <a href=" Inv "> Inv </a>
                 end
        (7)    <a href=" Inv /\ ~ (X <> 0) "> Inv /\ ~ (X <> 0) </a>  -&gt;&gt;                (b)
        (8)    <a href=" Y = n - m "> Y = n - m </a>
 By examining this skeleton, we can see that any valid <span class="inlinecode"><span class="id" title="var">Inv</span></span> will
    have to respect three conditions:
<ul class="doclist">
<li> (a) it must be <i>weak</i> enough to be implied by the loop's
      precondition, i.e., (1) must imply (2);

</li>
<li> (b) it must be <i>strong</i> enough to imply the program's postcondition,
      i.e., (7) must imply (8);

</li>
<li> (c) it must be <i>preserved</i> by a single iteration of the loop, assuming
      that the loop guard also evaluates to true, i.e., (3) must imply (4). 
</li>
</ul>

<div class="paragraph"> </div>

 These conditions are actually independent of the particular
    program and specification we are considering: every loop
    invariant has to satisfy them.

<div class="paragraph"> </div>

    One way to find a loop invariant that simultaneously satisfies these
    three conditions is by using an iterative process: start with a
    "candidate" invariant (e.g., a guess or a heuristic choice) and
    check the three conditions above; if any of the checks fails, try
    to use the information that we get from the failure to produce
    another -- hopefully better -- candidate invariant, and repeat.

<div class="paragraph"> </div>

    For instance, in the reduce-to-zero example above, we saw that,
    for a very simple loop, choosing <span class="inlinecode"><span class="id" title="var">True</span></span> as a loop invariant did the
    job.  Maybe it will work here too.  To find out, let's try
    instantiating <span class="inlinecode"><span class="id" title="var">Inv</span></span> with <span class="inlinecode"><span class="id" title="var">True</span></span> in the skeleton above and
    see what we get...

<div class="paragraph"> </div>

        (1)    <a href=" X = m /\ Y = n "> X = m /\ Y = n </a> -&gt;&gt;                    (a - OK)
        (2)    <a href=" True "> True </a>
                 while X &lt;&gt; 0 do
        (3)                   <a href=" True /\ X <> 0 "> True /\ X <> 0 </a> -&gt;&gt;     (c - OK)
        (4)                   <a href=" True "> True </a>
                   Y := Y - 1;
        (5)                   <a href=" True "> True </a>
                   X := X - 1
        (6)                   <a href=" True "> True </a>
                 end
        (7)    <a href=" True /\ ~(X <> 0) "> True /\ ~(X <> 0) </a> -&gt;&gt;                 (b - WRONG!)
        (8)    <a href=" Y = n - m "> Y = n - m </a>

<div class="paragraph"> </div>

    While conditions (a) and (c) are trivially satisfied,
    (b) is wrong: it is not the case that <span class="inlinecode"><span class="id" title="var">True</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span> (7)
    implies <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">m</span></span> (8).  In fact, the two assertions are
    completely unrelated, so it is very easy to find a counterexample
    to the implication (say, <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span> and <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">1</span>).

<div class="paragraph"> </div>

    If we want (b) to hold, we need to strengthen the loop invariant so
    that it implies the postcondition (8).  One simple way to do
    this is to let the loop invariant <i>be</i> the postcondition.  So let's
    return to our skeleton, instantiate <span class="inlinecode"><span class="id" title="var">Inv</span></span> with <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">m</span></span>, and
    try checking conditions (a) to (c) again.

<div class="paragraph"> </div>

    (1)    <a href=" X = m /\ Y = n "> X = m /\ Y = n </a> -&gt;&gt;                        (a - WRONG!)
    (2)    <a href=" Y = n - m "> Y = n - m </a>
             while X &lt;&gt; 0 do
    (3)                     <a href=" Y = n - m /\ X <> 0 "> Y = n - m /\ X <> 0 </a> -&gt;&gt;  (c - WRONG!)
    (4)                     <a href=" Y - 1 = n - m "> Y - 1 = n - m </a>
               Y := Y - 1;
    (5)                     <a href=" Y = n - m "> Y = n - m </a>
               X := X - 1
    (6)                     <a href=" Y = n - m "> Y = n - m </a>
             end
    (7)    <a href=" Y = n - m /\ ~(X <> 0) "> Y = n - m /\ ~(X <> 0) </a> -&gt;&gt;                (b - OK)
    (8)    <a href=" Y = n - m "> Y = n - m </a>

<div class="paragraph"> </div>

    This time, condition (b) holds trivially, but (a) and (c) are
    broken. Condition (a) requires that (1) <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span>
    implies (2) <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">m</span></span>.  If we substitute <span class="inlinecode"><span class="id" title="var">Y</span></span> by <span class="inlinecode"><span class="id" title="var">n</span></span> we have to
    show that <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">m</span></span> for arbitrary <span class="inlinecode"><span class="id" title="var">m</span></span> and <span class="inlinecode"><span class="id" title="var">n</span></span>, which is not
    the case (for instance, when <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">1</span>).  Condition (c) requires
    that <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">-</span> <span class="inlinecode">1</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">m</span></span>, which fails, for instance, for <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">1</span>
    and <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>. So, although <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">m</span></span> holds at the end of the loop,
    it does not hold from the start, and it doesn't hold on each
    iteration; it is not a correct loop invariant.

<div class="paragraph"> </div>

    This failure is not very surprising: the variable <span class="inlinecode"><span class="id" title="var">Y</span></span> changes
    during the loop, while <span class="inlinecode"><span class="id" title="var">m</span></span> and <span class="inlinecode"><span class="id" title="var">n</span></span> are constant, so the assertion
    we chose didn't have much chance of being a loop invariant!

<div class="paragraph"> </div>

    To do better, we need to generalize (7) to some statement that is
    equivalent to (8) when <span class="inlinecode"><span class="id" title="var">X</span></span> is <span class="inlinecode">0</span>, since this will be the case
    when the loop terminates, and that "fills the gap" in some
    appropriate way when <span class="inlinecode"><span class="id" title="var">X</span></span> is nonzero.  Looking at how the loop
    works, we can observe that <span class="inlinecode"><span class="id" title="var">X</span></span> and <span class="inlinecode"><span class="id" title="var">Y</span></span> are decremented together
    until <span class="inlinecode"><span class="id" title="var">X</span></span> reaches <span class="inlinecode">0</span>.  So, if <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode">2</span> and <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">=</span> <span class="inlinecode">5</span> initially,
    after one iteration of the loop we obtain <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode">1</span> and <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">=</span> <span class="inlinecode">4</span>;
    after two iterations <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span> and <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">=</span> <span class="inlinecode">3</span>; and then the loop stops.
    Notice that the difference between <span class="inlinecode"><span class="id" title="var">Y</span></span> and <span class="inlinecode"><span class="id" title="var">X</span></span> stays constant
    between iterations: initially, <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> and <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>, and the
    difference is always <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">m</span></span>.  So let's try instantiating <span class="inlinecode"><span class="id" title="var">Inv</span></span> in
    the skeleton above with <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">m</span></span>.

<div class="paragraph"> </div>

    (1)    <a href=" X = m /\ Y = n "> X = m /\ Y = n </a> -&gt;&gt;                            (a - OK)
    (2)    <a href=" Y - X = n - m "> Y - X = n - m </a>
             while X &lt;&gt; 0 do
    (3)                    <a href=" Y - X = n - m /\ X <> 0 "> Y - X = n - m /\ X <> 0 </a> -&gt;&gt;   (c - OK)
    (4)                    <a href=" (Y - 1) - (X - 1) = n - m "> (Y - 1) - (X - 1) = n - m </a>
               Y := Y - 1;
    (5)                    <a href=" Y - (X - 1) = n - m "> Y - (X - 1) = n - m </a>
               X := X - 1
    (6)                    <a href=" Y - X = n - m "> Y - X = n - m </a>
             end
    (7)    <a href=" Y - X = n - m /\ ~(X <> 0) "> Y - X = n - m /\ ~(X <> 0) </a> -&gt;&gt;                (b - OK)
    (8)    <a href=" Y = n - m "> Y = n - m </a>

<div class="paragraph"> </div>

    Success!  Conditions (a), (b) and (c) all hold now.  (To
    verify (c), we need to check that, under the assumption that
    <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">≠</span> <span class="inlinecode">0</span>, we have <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode">(<span class="id" title="var">Y</span></span> <span class="inlinecode">-</span> <span class="inlinecode">1)</span> <span class="inlinecode">-</span> <span class="inlinecode">(<span class="id" title="var">X</span></span> <span class="inlinecode">-</span> <span class="inlinecode">1)</span>; this holds for all
    natural numbers <span class="inlinecode"><span class="id" title="var">X</span></span> and <span class="inlinecode"><span class="id" title="var">Y</span></span>.)

<div class="paragraph"> </div>

    Here is the final version of the decorated program: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <a id="subtract_slowly_dec" class="idref" href="#subtract_slowly_dec"><span class="id" title="definition">subtract_slowly_dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="m:83" class="idref" href="#m:83"><span class="id" title="binder">m</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="n:84" class="idref" href="#n:84"><span class="id" title="binder">n</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#m:83"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a>  <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#n:84"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#n:84"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare2.html#m:83"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">do</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#n:84"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare2.html#m:83"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a>  <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a>  <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#n:84"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare2.html#m:83"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#n:84"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare2.html#m:83"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#n:84"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare2.html#m:83"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#n:84"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare2.html#m:83"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#n:84"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare2.html#m:83"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="subtract_slowly_outer_triple_valid" class="idref" href="#subtract_slowly_outer_triple_valid"><span class="id" title="lemma">subtract_slowly_outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="m:85" class="idref" href="#m:85"><span class="id" title="binder">m</span></a> <a id="n:86" class="idref" href="#n:86"><span class="id" title="binder">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#subtract_slowly_dec"><span class="id" title="definition">subtract_slowly_dec</span></a> <a class="idref" href="PLF.Hoare2.html#m:85"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#n:86"><span class="id" title="variable">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">verify</span></a>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab107"></a><h2 class="section">Exercise: Slow Assignment</h2>

<div class="paragraph"> </div>

<a id="lab108"></a><h4 class="section">Exercise: 2 stars, standard (slow_assignment)</h4>


<div class="paragraph"> </div>

    A roundabout way of assigning a number currently stored in <span class="inlinecode"><span class="id" title="var">X</span></span> to
    the variable <span class="inlinecode"><span class="id" title="var">Y</span></span> is to start <span class="inlinecode"><span class="id" title="var">Y</span></span> at <span class="inlinecode">0</span>, then decrement <span class="inlinecode"><span class="id" title="var">X</span></span> until
    it hits <span class="inlinecode">0</span>, incrementing <span class="inlinecode"><span class="id" title="var">Y</span></span> at each step. Here is a program that
    implements this idea.  Fill in decorations and prove the decorated
    program correct. (The proof should be very simple.) 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <a id="slow_assignment_dec" class="idref" href="#slow_assignment_dec"><span class="id" title="definition">slow_assignment_dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="m:87" class="idref" href="#m:87"><span class="id" title="binder">m</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#m:87"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">do</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#m:87"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="slow_assignment" class="idref" href="#slow_assignment"><span class="id" title="lemma">slow_assignment</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="m:88" class="idref" href="#m:88"><span class="id" title="binder">m</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#slow_assignment_dec"><span class="id" title="definition">slow_assignment_dec</span></a> <a class="idref" href="PLF.Hoare2.html#m:88"><span class="id" title="variable">m</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.  <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab109"></a><h2 class="section">Example: Parity</h2>

<div class="paragraph"> </div>

 Here is a cute way of computing the parity of a value initially
    stored in <span class="inlinecode"><span class="id" title="var">X</span></span>, due to Daniel Cristofani.

<div class="paragraph"> </div>

       <a href=" X = m "> X = m </a>
         while 2 &lt;= X do
           X := X - 2
         end
       <a href=" X = parity m "> X = parity m </a>

<div class="paragraph"> </div>

    The <span class="inlinecode"><span class="id" title="var">parity</span></span> function used in the specification is defined in
    Coq as follows: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="parity" class="idref" href="#parity"><span class="id" title="definition">parity</span></a> <a id="x:89" class="idref" href="#x:89"><span class="id" title="binder">x</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare2.html#x:89"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">x'</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare2.html#parity:90"><span class="id" title="definition">parity</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">x'</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a>.<br/>

<br/>
</div>

<div class="doc">
The postcondition does not hold at the beginning of the loop,
    since <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">parity</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> does not hold for an arbitrary <span class="inlinecode"><span class="id" title="var">m</span></span>, so we
    cannot hope to use that as a loop invariant.  To find a loop invariant
    that works, let's think a bit about what this loop does.  On each
    iteration it decrements <span class="inlinecode"><span class="id" title="var">X</span></span> by <span class="inlinecode">2</span>, which preserves the parity of <span class="inlinecode"><span class="id" title="var">X</span></span>.
    So the parity of <span class="inlinecode"><span class="id" title="var">X</span></span> does not change, i.e., it is invariant.  The initial
    value of <span class="inlinecode"><span class="id" title="var">X</span></span> is <span class="inlinecode"><span class="id" title="var">m</span></span>, so the parity of <span class="inlinecode"><span class="id" title="var">X</span></span> is always equal to the
    parity of <span class="inlinecode"><span class="id" title="var">m</span></span>. Using <span class="inlinecode"><span class="id" title="var">parity</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">parity</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> as an invariant we
    obtain the following decorated program:

<div class="paragraph"> </div>

      <a href=" X = m "> X = m </a> -&gt;&gt;                                         (a - OK)
      <a href=" parity X = parity m "> parity X = parity m </a>
        while 2 &lt;= X do
                     <a href=" parity X = parity m /\ 2 <= X "> parity X = parity m /\ 2 <= X </a> -&gt;&gt;  (c - OK)
                     <a href=" parity (X-2) = parity m "> parity (X-2) = parity m </a>
          X := X - 2
                     <a href=" parity X = parity m "> parity X = parity m </a>
        end
      <a href=" parity X = parity m /\ ~(2 <= X) "> parity X = parity m /\ ~(2 <= X) </a> -&gt;&gt;              (b - OK)
      <a href=" X = parity m "> X = parity m </a>

<div class="paragraph"> </div>

    With this loop invariant, conditions (a), (b), and (c) are all
    satisfied. For verifying (b), we observe that, when <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">&lt;</span> <span class="inlinecode">2</span>, we
    have <span class="inlinecode"><span class="id" title="var">parity</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">X</span></span> (we can easily see this in the definition of
    <span class="inlinecode"><span class="id" title="var">parity</span></span>).  For verifying (c), we observe that, when <span class="inlinecode">2</span> <span class="inlinecode">≤</span> <span class="inlinecode"><span class="id" title="var">X</span></span>, we
    have <span class="inlinecode"><span class="id" title="var">parity</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">parity</span></span> <span class="inlinecode">(<span class="id" title="var">X</span>-2)</span>. 
<div class="paragraph"> </div>

<a id="lab110"></a><h4 class="section">Exercise: 3 stars, standard, optional (parity)</h4>


<div class="paragraph"> </div>

    Translate the above informal decorated program into a formal one
    and prove it correct.

<div class="paragraph"> </div>

    Hint: There are actually several possible loop invariants that all
    lead to good proofs; one that leads to a particularly simple proof
    is <span class="inlinecode"><span class="id" title="var">parity</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">parity</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> -- or more formally, using the
    <span class="inlinecode"><span class="id" title="var">ap</span></span> operator to lift the application of the <span class="inlinecode"><span class="id" title="var">parity</span></span> function
    into the syntax of assertions, <span class="inlinecode">{{</span> <span class="inlinecode"><span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">parity</span></span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">parity</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">}}</span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="parity_dec" class="idref" href="#parity_dec"><span class="id" title="definition">parity_dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="m:92" class="idref" href="#m:92"><span class="id" title="binder">m</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#m:92"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">2</span></a> <a class="idref" href="PLF.Imp.html#d43f15edd52d29ae8e0f90730a25ed5c"><span class="id" title="notation">≤</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">do</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#5cc28325551269d57999b5e6d74d9b04"><span class="id" title="notation">#</span></a><a class="idref" href="PLF.Hoare2.html#parity"><span class="id" title="definition">parity</span></a> <a class="idref" href="PLF.Hoare2.html#m:92"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
If you use the suggested loop invariant, you may find the following
    lemmas helpful (as well as <span class="inlinecode"><span class="id" title="var">leb_complete</span></span> and <span class="inlinecode"><span class="id" title="var">leb_correct</span></span>). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="parity_ge_2" class="idref" href="#parity_ge_2"><span class="id" title="lemma">parity_ge_2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="x:93" class="idref" href="#x:93"><span class="id" title="binder">x</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">2</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="PLF.Hoare2.html#x:93"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#parity"><span class="id" title="definition">parity</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#x:93"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">2)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#parity"><span class="id" title="definition">parity</span></a> <a class="idref" href="PLF.Hoare2.html#x:93"><span class="id" title="variable">x</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">x</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">intros</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">simpl</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">reflexivity</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">x</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">simpl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">lia</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">rewrite</span></a> <span class="id" title="lemma">sub_0_r</span>. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">reflexivity</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="parity_lt_2" class="idref" href="#parity_lt_2"><span class="id" title="lemma">parity_lt_2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="x:94" class="idref" href="#x:94"><span class="id" title="binder">x</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">2</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="PLF.Hoare2.html#x:94"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#parity"><span class="id" title="definition">parity</span></a> <a class="idref" href="PLF.Hoare2.html#x:94"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#x:94"><span class="id" title="variable">x</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">induction</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">x</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">intros</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">simpl</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">reflexivity</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">x</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">reflexivity</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">lia</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="parity_outer_triple_valid" class="idref" href="#parity_outer_triple_valid"><span class="id" title="lemma">parity_outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="m:95" class="idref" href="#m:95"><span class="id" title="binder">m</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#parity_dec"><span class="id" title="definition">parity_dec</span></a> <a class="idref" href="PLF.Hoare2.html#m:95"><span class="id" title="variable">m</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
 <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Admitted</span></a>.<br/>

<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab111"></a><h2 class="section">Example: Finding Square Roots</h2>

<div class="paragraph"> </div>

 The following program computes the integer square root of <span class="inlinecode"><span class="id" title="var">X</span></span>
    by naive iteration:

<div class="paragraph"> </div>

    <a href=" X=m "> X=m </a>
      Z := 0;
      while (Z+1)*(Z+1) &lt;= X do
        Z := Z+1
      end
    <a href=" Z*Z<=m /\ m<(Z+1)*(Z+1) "> Z*Z<=m /\ m<(Z+1)*(Z+1) </a>

<div class="paragraph"> </div>

 As we did before, we can try to use the postcondition as a
    candidate loop invariant, obtaining the following decorated program:

<div class="paragraph"> </div>

    (1)  <a href=" X=m "> X=m </a> -&gt;&gt;               (a - second conjunct of (2) WRONG!)
    (2)  <a href=" 0*0 <= m /\ m<(0+1)*(0+1) "> 0*0 <= m /\ m<(0+1)*(0+1) </a>
            Z := 0
    (3)            <a href=" Z*Z <= m /\ m<(Z+1)*(Z+1) "> Z*Z <= m /\ m<(Z+1)*(Z+1) </a>;
            while (Z+1)*(Z+1) &lt;= X do
    (4)            <a href=" Z*Z<=m /\ m<(Z+1)*(Z+1)
                             /\ (Z+1)*(Z+1)<=X "> Z*Z<=m /\ m<(Z+1)*(Z+1)
                             /\ (Z+1)*(Z+1)<=X </a> -&gt;&gt;   (c - WRONG!)
    (5)            <a href=" (Z+1)*(Z+1)<=m /\ m<((Z+1)+1)*((Z+1)+1) "> (Z+1)*(Z+1)<=m /\ m<((Z+1)+1)*((Z+1)+1) </a>
              Z := Z+1
    (6)            <a href=" Z*Z<=m /\ m<(Z+1)*(Z+1) "> Z*Z<=m /\ m<(Z+1)*(Z+1) </a>
            end
    (7)  <a href=" Z*Z<=m /\ m<(Z+1)*(Z+1) /\ ~((Z+1)*(Z+1)<=X) "> Z*Z<=m /\ m<(Z+1)*(Z+1) /\ ~((Z+1)*(Z+1)<=X) </a> -&gt;&gt;  (b - OK)
    (8)  <a href=" Z*Z<=m /\ m<(Z+1)*(Z+1) "> Z*Z<=m /\ m<(Z+1)*(Z+1) </a>

<div class="paragraph"> </div>

    This didn't work very well: conditions (a) and (c) both failed.
    Looking at condition (c), we see that the second conjunct of (4)
    is almost the same as the first conjunct of (5), except that (4)
    mentions <span class="inlinecode"><span class="id" title="var">X</span></span> while (5) mentions <span class="inlinecode"><span class="id" title="var">m</span></span>. But note that <span class="inlinecode"><span class="id" title="var">X</span></span> is never
    assigned in this program, so we should always have <span class="inlinecode"><span class="id" title="var">X</span>=<span class="id" title="var">m</span></span>. We
    didn't propagate this information from (1) into the loop
    invariant, but we could!

<div class="paragraph"> </div>

    Also, we don't need the second conjunct of (8), since we can
    obtain it from the negation of the guard -- the third conjunct
    in (7) -- again under the assumption that <span class="inlinecode"><span class="id" title="var">X</span>=<span class="id" title="var">m</span></span>.  This allows
    us to simplify a bit.

<div class="paragraph"> </div>

    So we now try <span class="inlinecode"><span class="id" title="var">X</span>=<span class="id" title="var">m</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">Z</span>×<span class="id" title="var">Z</span></span> <span class="inlinecode">≤</span> <span class="inlinecode"><span class="id" title="var">m</span></span> as the loop invariant:

<div class="paragraph"> </div>

    <a href=" X=m "> X=m </a> -&gt;&gt;                                           (a - OK)
    <a href=" X=m /\ 0*0 <= m "> X=m /\ 0*0 <= m </a>
      Z := 0
                 <a href=" X=m /\ Z*Z <= m "> X=m /\ Z*Z <= m </a>;
      while (Z+1)*(Z+1) &lt;= X do
                 <a href=" X=m /\ Z*Z<=m /\ (Z+1)*(Z+1)<=X "> X=m /\ Z*Z<=m /\ (Z+1)*(Z+1)<=X </a> -&gt;&gt;  (c - OK)
                 <a href=" X=m /\ (Z+1)*(Z+1)<=m "> X=m /\ (Z+1)*(Z+1)<=m </a>
        Z := Z + 1
                 <a href=" X=m /\ Z*Z<=m "> X=m /\ Z*Z<=m </a>
      end
    <a href=" X=m /\ Z*Z<=m /\ ~((Z+1)*(Z+1)<=X) "> X=m /\ Z*Z<=m /\ ~((Z+1)*(Z+1)<=X) </a> -&gt;&gt;            (b - OK)
    <a href=" Z*Z<=m /\ m<(Z+1)*(Z+1) "> Z*Z<=m /\ m<(Z+1)*(Z+1) </a>

<div class="paragraph"> </div>

    This works, since conditions (a), (b), and (c) are now all
    trivially satisfied.

<div class="paragraph"> </div>

    Very often, when a variable is used in a loop in a read-only
    fashion (i.e., it is referred to by the program or by the
    specification and it is not changed by the loop), it is necessary
    to record the fact that it doesn't change in the loop invariant. 
<div class="paragraph"> </div>

<a id="lab112"></a><h4 class="section">Exercise: 3 stars, standard, optional (sqrt)</h4>


<div class="paragraph"> </div>

    Translate the above informal decorated program into a formal one
    and prove it correct.

<div class="paragraph"> </div>

    Hint: The loop invariant here must ensure that Z*Z is consistently
    less than or equal to X. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="sqrt_dec" class="idref" href="#sqrt_dec"><span class="id" title="definition">sqrt_dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="m:96" class="idref" href="#m:96"><span class="id" title="binder">m</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#m:96"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Imp.html#5a96623d056c293ebbcdf03005796e09"><span class="id" title="notation">((</span></a><a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a><a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><a class="idref" href="PLF.Imp.html#5a96623d056c293ebbcdf03005796e09"><span class="id" title="notation">)</span></a><a class="idref" href="PLF.Imp.html#a73c7b35e67094dc8ae672f3a93da066"><span class="id" title="notation">×</span></a><a class="idref" href="PLF.Imp.html#5a96623d056c293ebbcdf03005796e09"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a><a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><a class="idref" href="PLF.Imp.html#5a96623d056c293ebbcdf03005796e09"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Imp.html#d43f15edd52d29ae8e0f90730a25ed5c"><span class="id" title="notation">≤</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a><a class="idref" href="PLF.Imp.html#5a96623d056c293ebbcdf03005796e09"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">do</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a><a class="idref" href="PLF.Hoare.html#180ca3c33c07ef4f30a03b9b44d4925e"><span class="id" title="notation">×</span></a><a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a><a class="idref" href="PLF.Hoare.html#f9e963a42ba303abb7dc8a66eececf51"><span class="id" title="notation">≤</span></a><a class="idref" href="PLF.Hoare2.html#m:96"><span class="id" title="variable">m</span></a> <a class="idref" href="PLF.Hoare.html#d437198920d8d757e4e6b60d46358c8a"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Hoare2.html#m:96"><span class="id" title="variable">m</span></a><a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a><a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a><a class="idref" href="PLF.Hoare.html#180ca3c33c07ef4f30a03b9b44d4925e"><span class="id" title="notation">×</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a><a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="sqrt_correct" class="idref" href="#sqrt_correct"><span class="id" title="lemma">sqrt_correct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="m:97" class="idref" href="#m:97"><span class="id" title="binder">m</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#sqrt_dec"><span class="id" title="definition">sqrt_dec</span></a> <a class="idref" href="PLF.Hoare2.html#m:97"><span class="id" title="variable">m</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.  <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Admitted</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab113"></a><h2 class="section">Example: Squaring</h2>

<div class="paragraph"> </div>

 Here is a program that squares <span class="inlinecode"><span class="id" title="var">X</span></span> by repeated addition:

<div class="paragraph"> </div>

  <a href=" X = m "> X = m </a>
    Y := 0;
    Z := 0;
    while Y &lt;&gt; X  do
      Z := Z + X;
      Y := Y + 1
    end
  <a href=" Z = m*m "> Z = m*m </a>

<div class="paragraph"> </div>

 The first thing to note is that the loop reads <span class="inlinecode"><span class="id" title="var">X</span></span> but doesn't
    change its value. As we saw in the previous example, it can be a good idea
    in such cases to add <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span> to the loop invariant.  The other thing
    that we know is often useful in the loop invariant is the postcondition,
    so let's add that too, leading to the candidate loop invariant
    <span class="inlinecode"><span class="id" title="var">Z</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">×</span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>.

<div class="paragraph"> </div>

    <a href=" X = m "> X = m </a> -&gt;&gt;                                       (a - WRONG)
    <a href=" 0 = m*m /\ X = m "> 0 = m*m /\ X = m </a>
      Y := 0
                   <a href=" 0 = m*m /\ X = m "> 0 = m*m /\ X = m </a>;
      Z := 0
                   <a href=" Z = m*m /\ X = m "> Z = m*m /\ X = m </a>;
      while Y &lt;&gt; X do
                   <a href=" Z = m*m /\ X = m /\ Y <> X "> Z = m*m /\ X = m /\ Y <> X </a> -&gt;&gt;   (c - WRONG)
                   <a href=" Z+X = m*m /\ X = m "> Z+X = m*m /\ X = m </a>
        Z := Z + X
                   <a href=" Z = m*m /\ X = m "> Z = m*m /\ X = m </a>;
        Y := Y + 1
                   <a href=" Z = m*m /\ X = m "> Z = m*m /\ X = m </a>
      end
    <a href=" Z = m*m /\ X = m /\ ~(Y <> X) "> Z = m*m /\ X = m /\ ~(Y <> X) </a> -&gt;&gt;               (b - OK)
    <a href=" Z = m*m "> Z = m*m </a>

<div class="paragraph"> </div>

    Conditions (a) and (c) fail because of the <span class="inlinecode"><span class="id" title="var">Z</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span>×<span class="id" title="var">m</span></span> part.  While
    <span class="inlinecode"><span class="id" title="var">Z</span></span> starts at <span class="inlinecode">0</span> and works itself up to <span class="inlinecode"><span class="id" title="var">m</span>×<span class="id" title="var">m</span></span>, we can't expect
    <span class="inlinecode"><span class="id" title="var">Z</span></span> to be <span class="inlinecode"><span class="id" title="var">m</span>×<span class="id" title="var">m</span></span> from the start.  If we look at how <span class="inlinecode"><span class="id" title="var">Z</span></span> progresses
    in the loop, after the 1st iteration <span class="inlinecode"><span class="id" title="var">Z</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>, after the 2nd
    iteration <span class="inlinecode"><span class="id" title="var">Z</span></span> <span class="inlinecode">=</span> <span class="inlinecode">2*<span class="id" title="var">m</span></span>, and at the end <span class="inlinecode"><span class="id" title="var">Z</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span>×<span class="id" title="var">m</span></span>.  Since the variable
    <span class="inlinecode"><span class="id" title="var">Y</span></span> tracks how many times we go through the loop, this leads us to
    derive a new loop invariant candidate: <span class="inlinecode"><span class="id" title="var">Z</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Y</span>×<span class="id" title="var">m</span></span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>.

<div class="paragraph"> </div>

    <a href=" X = m "> X = m </a> -&gt;&gt;                                        (a - OK)
    <a href=" 0 = 0*m /\ X = m "> 0 = 0*m /\ X = m </a>
      Y := 0
                    <a href=" 0 = Y*m /\ X = m "> 0 = Y*m /\ X = m </a>;
      Z := 0
                    <a href=" Z = Y*m /\ X = m "> Z = Y*m /\ X = m </a>;
      while Y &lt;&gt; X do
                    <a href=" Z = Y*m /\ X = m /\ Y <> X "> Z = Y*m /\ X = m /\ Y <> X </a> -&gt;&gt;   (c - OK)
                    <a href=" Z+X = (Y+1)*m /\ X = m "> Z+X = (Y+1)*m /\ X = m </a>
        Z := Z + X
                    <a href=" Z = (Y+1)*m /\ X = m "> Z = (Y+1)*m /\ X = m </a>;
        Y := Y + 1
                    <a href=" Z = Y*m /\ X = m "> Z = Y*m /\ X = m </a>
      end
    <a href=" Z = Y*m /\ X = m /\ ~(Y <> X) "> Z = Y*m /\ X = m /\ ~(Y <> X) </a> -&gt;&gt;                (b - OK)
    <a href=" Z = m*m "> Z = m*m </a>

<div class="paragraph"> </div>

    This new loop invariant makes the proof go through: all three
    conditions are easy to check.

<div class="paragraph"> </div>

    It is worth comparing the postcondition <span class="inlinecode"><span class="id" title="var">Z</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span>×<span class="id" title="var">m</span></span> and the <span class="inlinecode"><span class="id" title="var">Z</span></span> <span class="inlinecode">=</span>
    <span class="inlinecode"><span class="id" title="var">Y</span>×<span class="id" title="var">m</span></span> conjunct of the loop invariant. It is often the case that one has
    to replace parameters with variables -- or with expressions
    involving both variables and parameters, like <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> -- when
    going from postconditions to loop invariants. 
<div class="paragraph"> </div>

 <font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab114"></a><h2 class="section">Exercise: Factorial</h2>

<div class="paragraph"> </div>

<a id="lab115"></a><h4 class="section">Exercise: 4 stars, advanced (factorial_correct)</h4>


<div class="paragraph"> </div>

    Recall that <span class="inlinecode"><span class="id" title="var">n</span>!</span> denotes the factorial of <span class="inlinecode"><span class="id" title="var">n</span></span> (i.e., <span class="inlinecode"><span class="id" title="var">n</span>!</span> <span class="inlinecode">=</span>
    <span class="inlinecode">1*2*...*<span class="id" title="var">n</span></span>).  Formally, the factorial function is defined
    recursively in the Coq standard library in a way that is
    equivalent to the following:

<div class="paragraph"> </div>

    Fixpoint fact (n : nat) : nat :=
      match n with
      | O =&gt; 1
      | S n' =&gt; n * (fact n')
      end.

</div>
<div class="code">

<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Compute</span></a> <span class="id" title="definition">fact</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">5</span></a>. 
<br/>
</div>

<div class="doc">
First, write the Imp program <span class="inlinecode"><span class="id" title="var">factorial</span></span> that calculates the factorial
    of the number initially stored in the variable <span class="inlinecode"><span class="id" title="var">X</span></span> and puts it in
    the variable <span class="inlinecode"><span class="id" title="var">Y</span></span>.

<div class="paragraph"> </div>

 Using your definition <span class="inlinecode"><span class="id" title="var">factorial</span></span> and <span class="inlinecode"><span class="id" title="var">slow_assignment_dec</span></span> as a
    guide, write a formal decorated program <span class="inlinecode"><span class="id" title="var">factorial_dec</span></span> that
    implements the factorial function.  Hint: recall the use of <span class="inlinecode"><span class="id" title="var">ap</span></span>
    in assertions to apply a function to an Imp variable.

<div class="paragraph"> </div>

    Fill in the blanks and finish the proof of correctness. Bear in mind
    that we are working with natural numbers, for which both division
    and subtraction can behave differently than with real numbers.
    Excluding both operations from your loop invariant is advisable!

<div class="paragraph"> </div>

    Then state a theorem named <span class="inlinecode"><span class="id" title="var">factorial_correct</span></span> that says
    <span class="inlinecode"><span class="id" title="var">factorial_dec</span></span> is correct, and prove the theorem.  If all goes
    well, <span class="inlinecode"><span class="id" title="var">verify</span></span> will leave you with just two subgoals, each of
    which requires establishing some mathematical property of <span class="inlinecode"><span class="id" title="var">fact</span></span>,
    rather than proving anything about your program.

<div class="paragraph"> </div>

    Hint: if those two subgoals become tedious to prove, give some
    thought to how you could restate your assertions such that the
    mathematical operations are more amenable to manipulation in Coq.
    For example, recall that <span class="inlinecode">1</span> <span class="inlinecode">+</span> <span class="inlinecode">...</span> is easier to work with than
    <span class="inlinecode">...</span> <span class="inlinecode">+</span> <span class="inlinecode">1</span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Example</span> <a id="factorial_dec" class="idref" href="#factorial_dec"><span class="id" title="definition">factorial_dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="m:98" class="idref" href="#m:98"><span class="id" title="binder">m</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a><br/>
. <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Admitted</span></a>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="factorial_correct" class="idref" href="#factorial_correct"><span class="id" title="lemma">factorial_correct</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="m:99" class="idref" href="#m:99"><span class="id" title="binder">m</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#factorial_dec"><span class="id" title="axiom">factorial_dec</span></a> <a class="idref" href="PLF.Hoare2.html#m:99"><span class="id" title="variable">m</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.  <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab116"></a><h2 class="section">Exercise: Minimum</h2>

<div class="paragraph"> </div>

<a id="lab117"></a><h4 class="section">Exercise: 3 stars, standard (minimum_correct)</h4>


<div class="paragraph"> </div>

    Fill in decorations for the following program and prove them
    correct.  As with <span class="inlinecode"><span class="id" title="var">factorial</span></span>, be careful about mathematical
    reasoning involving natural numbers, especially subtraction.

<div class="paragraph"> </div>

    Also, remember that applications of Coq functions in assertions
    need an <span class="inlinecode"><span class="id" title="var">ap</span></span> or <span class="inlinecode"><span class="id" title="var">ap2</span></span> to be parsed correctly.  E.g., <span class="inlinecode"><span class="id" title="var">min</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span>
    needs to be written <span class="inlinecode"><span class="id" title="var">ap2</span></span> <span class="inlinecode"><span class="id" title="var">min</span></span> <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode"><span class="id" title="var">b</span></span> in an assertion.

<div class="paragraph"> </div>

    You may find <span class="inlinecode"><span class="id" title="var">andb_true_eq</span></span> useful (perhaps after using symmetry
    to get an equality the right way around). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="minimum_dec" class="idref" href="#minimum_dec"><span class="id" title="definition">minimum_dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="a:100" class="idref" href="#a:100"><span class="id" title="binder">a</span></a> <a id="b:101" class="idref" href="#b:101"><span class="id" title="binder">b</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare2.html#a:100"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare2.html#b:101"><span class="id" title="variable">b</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">do</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#5cc28325551269d57999b5e6d74d9b04"><span class="id" title="notation">#</span></a><span class="id" title="definition">min</span> <a class="idref" href="PLF.Hoare2.html#a:100"><span class="id" title="variable">a</span></a> <a class="idref" href="PLF.Hoare2.html#b:101"><span class="id" title="variable">b</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="minimum_correct" class="idref" href="#minimum_correct"><span class="id" title="lemma">minimum_correct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="a:102" class="idref" href="#a:102"><span class="id" title="binder">a</span></a> <a id="b:103" class="idref" href="#b:103"><span class="id" title="binder">b</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#minimum_dec"><span class="id" title="definition">minimum_dec</span></a> <a class="idref" href="PLF.Hoare2.html#a:102"><span class="id" title="variable">a</span></a> <a class="idref" href="PLF.Hoare2.html#b:103"><span class="id" title="variable">b</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.  <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab118"></a><h2 class="section">Exercise: Two Loops</h2>

<div class="paragraph"> </div>

<a id="lab119"></a><h4 class="section">Exercise: 3 stars, standard (two_loops)</h4>


<div class="paragraph"> </div>

    Here is a pretty inefficient way of adding 3 numbers:

<div class="paragraph"> </div>

     X := 0;
     Y := 0;
     Z := c;
     while X &lt;&gt; a do
       X := X + 1;
       Z := Z + 1
     end;
     while Y &lt;&gt; b do
       Y := Y + 1;
       Z := Z + 1
     end

<div class="paragraph"> </div>

    Show that it does what it should by completing the
    following decorated program.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="two_loops_dec" class="idref" href="#two_loops_dec"><span class="id" title="definition">two_loops_dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="a:104" class="idref" href="#a:104"><span class="id" title="binder">a</span></a> <a id="b:105" class="idref" href="#b:105"><span class="id" title="binder">b</span></a> <a id="c:106" class="idref" href="#c:106"><span class="id" title="binder">c</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare2.html#c:106"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.Hoare2.html#a:104"><span class="id" title="variable">a</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">do</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.Hoare2.html#b:105"><span class="id" title="variable">b</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">do</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#a:104"><span class="id" title="variable">a</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare2.html#b:105"><span class="id" title="variable">b</span></a> <a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare2.html#c:106"><span class="id" title="variable">c</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="two_loops" class="idref" href="#two_loops"><span class="id" title="lemma">two_loops</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="a:107" class="idref" href="#a:107"><span class="id" title="binder">a</span></a> <a id="b:108" class="idref" href="#b:108"><span class="id" title="binder">b</span></a> <a id="c:109" class="idref" href="#c:109"><span class="id" title="binder">c</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#two_loops_dec"><span class="id" title="definition">two_loops_dec</span></a> <a class="idref" href="PLF.Hoare2.html#a:107"><span class="id" title="variable">a</span></a> <a class="idref" href="PLF.Hoare2.html#b:108"><span class="id" title="variable">b</span></a> <a class="idref" href="PLF.Hoare2.html#c:109"><span class="id" title="variable">c</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
 <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Admitted</span></a>.<br/>

<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab120"></a><h2 class="section">Exercise: Power Series</h2>

<div class="paragraph"> </div>

<a id="lab121"></a><h4 class="section">Exercise: 4 stars, standard, optional (dpow2)</h4>


<div class="paragraph"> </div>

    Here is a program that computes the series:
    <span class="inlinecode">1</span> <span class="inlinecode">+</span> <span class="inlinecode">2</span> <span class="inlinecode">+</span> <span class="inlinecode">2^2</span> <span class="inlinecode">+</span> <span class="inlinecode">...</span> <span class="inlinecode">+</span> <span class="inlinecode">2^<span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode">2^(<span class="id" title="var">m</span>+1)</span> <span class="inlinecode">-</span> <span class="inlinecode">1</span>

<div class="paragraph"> </div>

    X := 0;
    Y := 1;
    Z := 1;
    while X &lt;&gt; m do
      Z := 2 * Z;
      Y := Y + Z;
      X := X + 1
    end

<div class="paragraph"> </div>

    Turn this into a decorated program and prove it correct. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="pow2" class="idref" href="#pow2"><span class="id" title="definition">pow2</span></a> <a id="n:110" class="idref" href="#n:110"><span class="id" title="binder">n</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare2.html#n:110"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">n'</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">2</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Nat.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">×</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Nat.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#pow2:111"><span class="id" title="definition">pow2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">n'</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Nat.html#ea2ff3d561159081cea6fb2e8113cc54"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dpow2_dec" class="idref" href="#dpow2_dec"><span class="id" title="definition">dpow2_dec</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="n:113" class="idref" href="#n:113"><span class="id" title="binder">n</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.Hoare2.html#n:113"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">do</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">2</span></a> <a class="idref" href="PLF.Imp.html#a73c7b35e67094dc8ae672f3a93da066"><span class="id" title="notation">×</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#5cc28325551269d57999b5e6d74d9b04"><span class="id" title="notation">#</span></a><a class="idref" href="PLF.Hoare2.html#pow2"><span class="id" title="definition">pow2</span></a> <a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#n:113"><span class="id" title="variable">n</span></a><a class="idref" href="PLF.Hoare.html#63ccab552ca49d46d18c9209edaa0a41"><span class="id" title="notation">+</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><a class="idref" href="PLF.Hoare.html#cf45a95f0776392920a7f7554e29d102"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
Some lemmas that you may find useful... 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="pow2_plus_1" class="idref" href="#pow2_plus_1"><span class="id" title="lemma">pow2_plus_1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="n:114" class="idref" href="#n:114"><span class="id" title="binder">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#pow2"><span class="id" title="definition">pow2</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#n:114"><span class="id" title="variable">n</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#pow2"><span class="id" title="definition">pow2</span></a> <a class="idref" href="PLF.Hoare2.html#n:114"><span class="id" title="variable">n</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare2.html#pow2"><span class="id" title="definition">pow2</span></a> <a class="idref" href="PLF.Hoare2.html#n:114"><span class="id" title="variable">n</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">induction</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">simpl</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">reflexivity</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">-</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">lia</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="pow2_le_1" class="idref" href="#pow2_le_1"><span class="id" title="lemma">pow2_le_1</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="n:115" class="idref" href="#n:115"><span class="id" title="binder">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.Hoare2.html#pow2"><span class="id" title="definition">pow2</span></a> <a class="idref" href="PLF.Hoare2.html#n:115"><span class="id" title="variable">n</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">induction</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">simpl</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">constructor</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">lia</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
The main correctness theorem: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="dpow2_down_correct" class="idref" href="#dpow2_down_correct"><span class="id" title="lemma">dpow2_down_correct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="n:116" class="idref" href="#n:116"><span class="id" title="binder">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#dpow2_dec"><span class="id" title="definition">dpow2_dec</span></a> <a class="idref" href="PLF.Hoare2.html#n:116"><span class="id" title="variable">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
 <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a id="lab122"></a><h4 class="section">Exercise: 2 stars, advanced, optional (fib_eqn)</h4>


<div class="paragraph"> </div>

    The Fibonacci function is usually written like this:

<div class="paragraph"> </div>

      Fixpoint fib n :=
        match n with
        | 0 =&gt; 1
        | 1 =&gt; 1
        | _ =&gt; fib (pred n) + fib (pred (pred n))
        end.

<div class="paragraph"> </div>

   This doesn't pass Coq's termination checker, but here is a
   slightly clunkier definition that does: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="fib" class="idref" href="#fib"><span class="id" title="definition">fib</span></a> <a id="n:117" class="idref" href="#n:117"><span class="id" title="binder">n</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare2.html#n:117"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">n'</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">match</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">n'</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">with</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">n''</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">⇒</span></a> <a class="idref" href="PLF.Hoare2.html#fib:118"><span class="id" title="definition">fib</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">n'</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare2.html#fib:118"><span class="id" title="definition">fib</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">n''</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">end</span></a>.<br/>

<br/>
</div>

<div class="doc">
Prove that <span class="inlinecode"><span class="id" title="var">fib</span></span> satisfies the following equation.  You will need this
    as a lemma in the next exercise. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fib_eqn" class="idref" href="#fib_eqn"><span class="id" title="lemma">fib_eqn</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="n:121" class="idref" href="#n:121"><span class="id" title="binder">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#n:121"><span class="id" title="variable">n</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">0</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#fib"><span class="id" title="definition">fib</span></a> <a class="idref" href="PLF.Hoare2.html#n:121"><span class="id" title="variable">n</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare2.html#fib"><span class="id" title="definition">fib</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><span class="id" title="definition">pred</span> <a class="idref" href="PLF.Hoare2.html#n:121"><span class="id" title="variable">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare2.html#fib"><span class="id" title="definition">fib</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(1</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare2.html#n:121"><span class="id" title="variable">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
 <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a id="lab123"></a><h4 class="section">Exercise: 4 stars, advanced, optional (fib)</h4>


<div class="paragraph"> </div>

    The following Imp program leaves the value of <span class="inlinecode"><span class="id" title="var">fib</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> in the
    variable <span class="inlinecode"><span class="id" title="var">Y</span></span> when it terminates:

<div class="paragraph"> </div>

    X := 1;
    Y := 1;
    Z := 1;
    while X &lt;&gt; 1 + n do
      T := Z;
      Z := Z + Y;
      Y := T;
      X := 1 + X
    end

<div class="paragraph"> </div>

    Fill in the following definition of <span class="inlinecode"><span class="id" title="var">dfib</span></span> and prove that it
    satisfies this specification:

<div class="paragraph"> </div>

      <a href=" True "> True </a> dfib <a href=" Y = fib n "> Y = fib n </a>

<div class="paragraph"> </div>

    You will need many uses of <span class="inlinecode"><span class="id" title="var">ap</span></span> in your assertions.
    If all goes well, your proof will be very brief.

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="T" class="idref" href="#T"><span class="id" title="definition">T</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <span class="id" title="inductive">string</span> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a> "T".<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dfib" class="idref" href="#dfib"><span class="id" title="definition">dfib</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a id="n:122" class="idref" href="#n:122"><span class="id" title="binder">n</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare2.html#decorated"><span class="id" title="inductive">decorated</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare.html#:assn:assertion_scope:'True'"><span class="id" title="notation">True</span></a> <a class="idref" href="PLF.Hoare2.html#c00c27417ee45ebadf9f604729ad35ca"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">while</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#:com::x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare2.html#n:122"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">do</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#28f0157bba7bd3bf8c17b67532ba84f8"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#T"><span class="id" title="definition">T</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Z"><span class="id" title="definition">Z</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare2.html#T"><span class="id" title="definition">T</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare2.html#171c4c95468da881f236e87b2dcc4ffa"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#6fc777e17570559fe34310ebff6e74b3"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">end</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#FILL_IN_HERE"><span class="id" title="definition">FILL_IN_HERE</span></a> <a class="idref" href="PLF.Hoare2.html#88a349ad7000af9e3380552dd1d95d34"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#fa2b95bfba529b45357b44654fbd9bee"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Hoare.html#5cc28325551269d57999b5e6d74d9b04"><span class="id" title="notation">#</span></a><a class="idref" href="PLF.Hoare2.html#fib"><span class="id" title="definition">fib</span></a> <a class="idref" href="PLF.Hoare2.html#n:122"><span class="id" title="variable">n</span></a> <a class="idref" href="PLF.Hoare2.html#d9c679d5e5db96e17592c387975218ee"><span class="id" title="notation">}}</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="dfib_correct" class="idref" href="#dfib_correct"><span class="id" title="lemma">dfib_correct</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="n:123" class="idref" href="#n:123"><span class="id" title="binder">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#outer_triple_valid"><span class="id" title="definition">outer_triple_valid</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#dfib"><span class="id" title="definition">dfib</span></a> <a class="idref" href="PLF.Hoare2.html#n:123"><span class="id" title="variable">n</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
 <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a id="lab124"></a><h4 class="section">Exercise: 5 stars, advanced, optional (improve_dcom)</h4>


<div class="paragraph"> </div>

    The formal decorated programs defined in this section are intended
    to look as similar as possible to the informal ones defined
    earlier.  If we drop this requirement, we can eliminate almost all
    annotations, just requiring final postconditions and loop
    invariants to be provided explicitly.  Do this -- i.e., define a
    new version of dcom with as few annotations as possible and adapt
    the rest of the formal development leading up to the
    <span class="inlinecode"><span class="id" title="var">verification_correct</span></span> theorem. 
</div>
<div class="code">

<br/>

<br/>
</div>

<div class="doc">
<a id="lab125"></a><h1 class="section">Weakest Preconditions (Optional)</h1>

<div class="paragraph"> </div>

 Some preconditions are more interesting than others.
    For example, the Hoare triple

<div class="paragraph"> </div>

      <a href=" False "> False </a>  X := Y + 1  <a href=" X <= 5 "> X <= 5 </a>

<div class="paragraph"> </div>

    is <i>not</i> very interesting: although it is perfectly valid , it
    tells us nothing useful.  Since the precondition isn't
    satisfied by any state, it doesn't describe any situations where
    we can use the command <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">+</span> <span class="inlinecode">1</span> to achieve the postcondition
    <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">≤</span> <span class="inlinecode">5</span>.

<div class="paragraph"> </div>

    By contrast,

<div class="paragraph"> </div>

      <a href=" Y <= 4 /\ Z = 0 "> Y <= 4 /\ Z = 0 </a>  X := Y + 1 <a href=" X <= 5 "> X <= 5 </a>

<div class="paragraph"> </div>

    has a useful precondition: it tells us that, if we can somehow
    create a situation in which we know that <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">≤</span> <span class="inlinecode">4</span> <span class="inlinecode">∧</span> <span class="inlinecode"><span class="id" title="var">Z</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>, then
    running this command will produce a state satisfying the
    postcondition.  However, this precondition is not as useful as it
    could be, because the <span class="inlinecode"><span class="id" title="var">Z</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span> clause in the precondition actually
    has nothing to do with the postcondition <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">≤</span> <span class="inlinecode">5</span>.

<div class="paragraph"> </div>

    The <i>most</i> useful precondition for this command is this one:

<div class="paragraph"> </div>

      <a href=" Y <= 4 "> Y <= 4 </a>  X := Y + 1  <a href=" X <= 5 "> X <= 5 </a>

<div class="paragraph"> </div>

    The assertion <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">≤</span> <span class="inlinecode">4</span> is called the <i>weakest precondition</i> of
    <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">+</span> <span class="inlinecode">1</span> with respect to the postcondition <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">≤</span> <span class="inlinecode">5</span>. 
<div class="paragraph"> </div>

 Assertion <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">≤</span> <span class="inlinecode">4</span> is a <i>weakest precondition</i> of command <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">:=</span>
    <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">+</span> <span class="inlinecode">1</span> with respect to postcondition <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">≤</span> <span class="inlinecode">5</span>.  Think of <i>weakest</i>
    here as meaning "easiest to satisfy": a weakest precondition is
    one that as many states as possible can satisfy. 
<div class="paragraph"> </div>

 <span class="inlinecode"><span class="id" title="var">P</span></span> is a weakest precondition of command <span class="inlinecode"><span class="id" title="var">c</span></span> for postcondition <span class="inlinecode"><span class="id" title="var">Q</span></span>
    if

<div class="paragraph"> </div>

<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">P</span></span> is a precondition, that is, <span class="inlinecode">{{<span class="id" title="var">P</span>}}</span> <span class="inlinecode"><span class="id" title="var">c</span></span> <span class="inlinecode">{{<span class="id" title="var">Q</span>}}</span>; and

</li>
<li> <span class="inlinecode"><span class="id" title="var">P</span></span> is at least as weak as all other preconditions, that is,
        if <span class="inlinecode">{{<span class="id" title="var">P'</span>}}</span> <span class="inlinecode"><span class="id" title="var">c</span></span> <span class="inlinecode">{{<span class="id" title="var">Q</span>}}</span> then <span class="inlinecode"><span class="id" title="var">P'</span></span> <span class="inlinecode">-&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">P</span></span>.

</li>
</ul>
 
<div class="paragraph"> </div>

 Note that weakest preconditions need not be unique.  For
    example, <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">≤</span> <span class="inlinecode">4</span> was a weakest precondition above, but so are the
    logically equivalent assertions <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">&lt;</span> <span class="inlinecode">5</span>, <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">≤</span> <span class="inlinecode">2</span> <span class="inlinecode">×</span> <span class="inlinecode">2</span>, etc.
    It is easy to show that any two weakest preconditions <span class="inlinecode"><span class="id" title="var">P</span></span> and <span class="inlinecode"><span class="id" title="var">P'</span></span>
    of a command <span class="inlinecode"><span class="id" title="var">c</span></span> with respect to postcondition <span class="inlinecode"><span class="id" title="var">Q</span></span> are logically
    equivalent; that is, <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">&lt;&lt;-&gt;&gt;</span> <span class="inlinecode"><span class="id" title="var">P'</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_wp" class="idref" href="#is_wp"><span class="id" title="definition">is_wp</span></a> <a id="P:124" class="idref" href="#P:124"><span class="id" title="binder">P</span></a> <a id="c:125" class="idref" href="#c:125"><span class="id" title="binder">c</span></a> <a id="Q:126" class="idref" href="#Q:126"><span class="id" title="binder">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare2.html#P:124"><span class="id" title="variable">P</span></a><a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#c:125"><span class="id" title="variable">c</span></a> <a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare2.html#Q:126"><span class="id" title="variable">Q</span></a><a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="P':127" class="idref" href="#P':127"><span class="id" title="binder">P'</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare2.html#P':127"><span class="id" title="variable">P'</span></a><a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare2.html#c:125"><span class="id" title="variable">c</span></a> <a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">{{</span></a><a class="idref" href="PLF.Hoare2.html#Q:126"><span class="id" title="variable">Q</span></a><a class="idref" href="PLF.Hoare.html#a18cbce9fe584a9130c3f34d4f14555f"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare2.html#P':127"><span class="id" title="variable">P'</span></a> <a class="idref" href="PLF.Hoare.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="PLF.Hoare2.html#P:124"><span class="id" title="variable">P</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab126"></a><h4 class="section">Exercise: 1 star, standard, optional (wp)</h4>


<div class="paragraph"> </div>

    What are weakest preconditions of the following commands
    for the following postconditions?

<div class="paragraph"> </div>

  1) <a href=" ? "> ? </a>  skip  <a href=" X = 5 "> X = 5 </a>

<div class="paragraph"> </div>

  2) <a href=" ? "> ? </a>  X := Y + Z <a href=" X = 5 "> X = 5 </a>

<div class="paragraph"> </div>

  3) <a href=" ? "> ? </a>  X := Y  <a href=" X = Y "> X = Y </a>

<div class="paragraph"> </div>

  4) <a href=" ? "> ? </a>
     if X = 0 then Y := Z + 1 else Y := W + 2 end
     <a href=" Y = 5 "> Y = 5 </a>

<div class="paragraph"> </div>

  5) <a href=" ? "> ? </a>
     X := 5
     <a href=" X = 0 "> X = 0 </a>

<div class="paragraph"> </div>

  6) <a href=" ? "> ? </a>
     while true do X := 0 end
     <a href=" X = 0 "> X = 0 </a>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab127"></a><h4 class="section">Exercise: 3 stars, advanced, optional (is_wp)</h4>


<div class="paragraph"> </div>

    Prove formally, using the definition of <span class="inlinecode"><span class="id" title="var">valid_hoare_triple</span></span>, that <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">≤</span> <span class="inlinecode">4</span>
    is indeed a weakest precondition of <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> <span class="inlinecode">+</span> <span class="inlinecode">1</span> with respect to
    postcondition <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">≤</span> <span class="inlinecode">5</span>.

<div class="paragraph"> </div>

    Note: we have to put parentheses around the inputs to <span class="inlinecode"><span class="id" title="var">is_wp</span></span> to
    prevent Coq from parsing those three things as a Hoare triple.
 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="is_wp_example" class="idref" href="#is_wp_example"><span class="id" title="lemma">is_wp_example</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#is_wp"><span class="id" title="definition">is_wp</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Hoare.html#f9e963a42ba303abb7dc8a66eececf51"><span class="id" title="notation">≤</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">4</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Imp.html#91e9aa710642047a93142bdf557f1a1b"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Imp.html#Y"><span class="id" title="definition">Y</span></a> <a class="idref" href="PLF.Imp.html#ad27fd091d9c8494ce7e5135135d19a8"><span class="id" title="notation">+</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">1</span></a><a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Imp.html#X"><span class="id" title="definition">X</span></a> <a class="idref" href="PLF.Hoare.html#f9e963a42ba303abb7dc8a66eececf51"><span class="id" title="notation">≤</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">5</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">}}</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Proof</span></a>.<br/>
 <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a id="lab128"></a><h4 class="section">Exercise: 2 stars, advanced, optional (hoare_asgn_weakest)</h4>


<div class="paragraph"> </div>

    Show that the precondition in the rule <span class="inlinecode"><span class="id" title="var">hoare_asgn</span></span> is in fact the
    weakest precondition. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="hoare_asgn_weakest" class="idref" href="#hoare_asgn_weakest"><span class="id" title="lemma">hoare_asgn_weakest</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">∀</span></a> <a id="Q:128" class="idref" href="#Q:128"><span class="id" title="binder">Q</span></a> <a id="X:129" class="idref" href="#X:129"><span class="id" title="binder">X</span></a> <a id="a:130" class="idref" href="#a:130"><span class="id" title="binder">a</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#is_wp"><span class="id" title="definition">is_wp</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#Q:128"><span class="id" title="variable">Q</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">X</span></a> <a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="PLF.Hoare2.html#a:130"><span class="id" title="variable">a</span></a><a class="idref" href="PLF.Hoare.html#0f3bc01c0d68323c9389d5f2c160ebf5"><span class="id" title="notation">]</span></a> <a class="idref" href="PLF.Hoare.html#49b47699af62a6365326c407ef2ff815"><span class="id" title="notation">}}</span></a>) <a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Hoare2.html#X:129"><span class="id" title="variable">X</span></a> <a class="idref" href="PLF.Imp.html#91e9aa710642047a93142bdf557f1a1b"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Hoare2.html#a:130"><span class="id" title="variable">a</span></a> <a class="idref" href="PLF.Imp.html#23430cd9e427d30c054d4f029e39cb7f"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="PLF.Hoare2.html#Q:128"><span class="id" title="variable">Q</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a id="lab129"></a><h4 class="section">Exercise: 2 stars, advanced, optional (hoare_havoc_weakest)</h4>


<div class="paragraph"> </div>

    Show that your <span class="inlinecode"><span class="id" title="var">havoc_pre</span></span> function from the <span class="inlinecode"><span class="id" title="var">himp_hoare</span></span> exercise
    in the <span class="inlinecode"><span class="id" title="var">Hoare</span></span> chapter returns a weakest precondition. 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a id="Himp2" class="idref" href="#Himp2"><span class="id" title="module">Himp2</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="PLF.Hoare.html#Himp"><span class="id" title="module">Himp</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Himp2.hoare_havoc_weakest" class="idref" href="#Himp2.hoare_havoc_weakest"><span class="id" title="lemma">hoare_havoc_weakest</span></a> : <span class="id" title="keyword">∀</span> (<a id="P:131" class="idref" href="#P:131"><span class="id" title="binder">P</span></a> <a id="Q:132" class="idref" href="#Q:132"><span class="id" title="binder">Q</span></a> : <a class="idref" href="PLF.Hoare.html#Assertion"><span class="id" title="definition">Assertion</span></a>) (<a id="X:133" class="idref" href="#X:133"><span class="id" title="binder">X</span></a> : <span class="id" title="inductive">string</span>),<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare.html#fa43534376ba696f5288a24534018f6c"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#P:131"><span class="id" title="variable">P</span></a> <a class="idref" href="PLF.Hoare.html#fa43534376ba696f5288a24534018f6c"><span class="id" title="notation">}}</span></a> <a class="idref" href="PLF.Hoare.html#Himp.:com::'havoc'_x"><span class="id" title="notation">havoc</span></a> <a class="idref" href="PLF.Hoare2.html#X:133"><span class="id" title="variable">X</span></a> <a class="idref" href="PLF.Hoare.html#fa43534376ba696f5288a24534018f6c"><span class="id" title="notation">{{</span></a> <a class="idref" href="PLF.Hoare2.html#Q:132"><span class="id" title="variable">Q</span></a> <a class="idref" href="PLF.Hoare.html#fa43534376ba696f5288a24534018f6c"><span class="id" title="notation">}}</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Hoare2.html#P:131"><span class="id" title="variable">P</span></a> <a class="idref" href="PLF.Hoare.html#::hoare_spec_scope:x_'-&gt;&gt;'_x"><span class="id" title="notation">-&gt;&gt;</span></a> <a class="idref" href="PLF.Hoare.html#Himp.havoc_pre"><span class="id" title="axiom">havoc_pre</span></a> <a class="idref" href="PLF.Hoare2.html#X:133"><span class="id" title="variable">X</span></a> <a class="idref" href="PLF.Hoare2.html#Q:132"><span class="id" title="variable">Q</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
 <span class="id" title="var">Admitted</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="PLF.Hoare2.html#Himp2"><span class="id" title="module">Himp2</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://rocq-prover.org/">coqdoc</a>
</div>

</div>

</body>
</html>