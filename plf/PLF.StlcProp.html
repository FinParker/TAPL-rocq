<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link href="../common/css/tapl.css" rel="stylesheet" type="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>PLF.StlcProp</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library PLF.StlcProp</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab572"></a><h1 class="section">StlcProp: Properties of STLC</h1>

</div>
<div class="code">

<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Set</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Warnings</span></a> "-notation-overridden,-parsing,-deprecated-hint-without-locality".<br/>
<span class="id" title="keyword">From</span> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">PLF</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Require</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Import</span></a> <a class="idref" href="PLF.Maps.html#"><span class="id" title="library">Maps</span></a>.<br/>
<span class="id" title="keyword">From</span> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">PLF</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Require</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Import</span></a> <a class="idref" href="PLF.Types.html#"><span class="id" title="library">Types</span></a>.<br/>
<span class="id" title="keyword">From</span> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">PLF</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Require</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Import</span></a> <a class="idref" href="PLF.Stlc.html#"><span class="id" title="library">Stlc</span></a>.<br/>
<span class="id" title="keyword">From</span> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">PLF</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Require</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Import</span></a> <a class="idref" href="PLF.Smallstep.html#"><span class="id" title="library">Smallstep</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Set</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Default</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Goal</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Selector</span></a> "!".<br/>
<span class="id" title="keyword">Module</span> <a id="STLCProp" class="idref" href="#STLCProp"><span class="id" title="module">STLCProp</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="PLF.Stlc.html#STLC"><span class="id" title="module">STLC</span></a>.<br/>

<br/>
</div>

<div class="doc">
In this chapter, we develop the fundamental theory of the Simply
    Typed Lambda Calculus -- in particular, the type safety
    theorem. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab573"></a><h1 class="section">Canonical Forms</h1>

<div class="paragraph"> </div>

 As we saw for the very simple language in the <span class="inlinecode"><span class="id" title="keyword">Types</span></span>
    chapter, the first step in establishing basic properties of
    reduction and types is to identify the possible <i>canonical
    forms</i> (i.e., well-typed values) belonging to each type.  For
    <span class="inlinecode"><span class="id" title="var">Bool</span></span>, these are again the boolean values <span class="inlinecode"><span class="id" title="var">true</span></span> and <span class="inlinecode"><span class="id" title="var">false</span></span>; for
    arrow types, they are lambda-abstractions. 
<div class="paragraph"> </div>

 Formally, we will need these lemmas only for terms that are not
    only well typed but <i>closed</i> -- i.e., well typed in the empty
    context. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="STLCProp.canonical_forms_bool" class="idref" href="#STLCProp.canonical_forms_bool"><span class="id" title="lemma">canonical_forms_bool</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="t:1" class="idref" href="#t:1"><span class="id" title="binder">t</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:1"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:'Bool'"><span class="id" title="notation">Bool</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.value"><span class="id" title="inductive">value</span></a> <a class="idref" href="PLF.StlcProp.html#t:1"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#t:1"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'true'"><span class="id" title="notation">true</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#t:1"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'false'"><span class="id" title="notation">false</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HT</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HVal</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HVal</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">auto</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">inversion</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HT</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="STLCProp.canonical_forms_fun" class="idref" href="#STLCProp.canonical_forms_fun"><span class="id" title="lemma">canonical_forms_fun</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="t:2" class="idref" href="#t:2"><span class="id" title="binder">t</span></a> <a id="T1:3" class="idref" href="#T1:3"><span class="id" title="binder">T1</span></a> <a id="T2:4" class="idref" href="#T2:4"><span class="id" title="binder">T2</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:2"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T1</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T2</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.value"><span class="id" title="inductive">value</span></a> <a class="idref" href="PLF.StlcProp.html#t:2"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="x:5" class="idref" href="#x:5"><span class="id" title="binder">x</span></a> <a id="u:6" class="idref" href="#u:6"><span class="id" title="binder">u</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.StlcProp.html#t:2"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">x</span></a><a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">:</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T1</span></a><a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.StlcProp.html#u:6"><span class="id" title="variable">u</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T1</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T2</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HT</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HVal</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HVal</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">?</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t1</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">|]</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">inversion</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HT</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">subst</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∃</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">x</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t1</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">reflexivity</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab574"></a><h1 class="section">Progress</h1>

<div class="paragraph"> </div>

 The <i>progress</i> theorem tells us that closed, well-typed
    terms are not stuck: either a well-typed term is a value, or it
    can take a reduction step.  The proof is a relatively
    straightforward extension of the progress proof we saw in the
    <span class="inlinecode"><span class="id" title="keyword">Types</span></span> chapter.  We give the proof in English first, then
    the formal version. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="STLCProp.progress" class="idref" href="#STLCProp.progress"><span class="id" title="lemma">progress</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="t:7" class="idref" href="#t:7"><span class="id" title="binder">t</span></a> <a id="T:8" class="idref" href="#T:8"><span class="id" title="binder">T</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:7"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.value"><span class="id" title="inductive">value</span></a> <a class="idref" href="PLF.StlcProp.html#t:7"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="t':9" class="idref" href="#t':9"><span class="id" title="binder">t'</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.StlcProp.html#t:7"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="PLF.StlcProp.html#t':9"><span class="id" title="variable">t'</span></a>.<br/>

<br/>
</div>

<div class="doc">
<i>Proof</i>: By induction on the derivation of <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span>.

<div class="paragraph"> </div>

<ul class="doclist">
<li> The last rule of the derivation cannot be <span class="inlinecode"><span class="id" title="var">T_Var</span></span>, since a
      variable is never well typed in an empty context.

<div class="paragraph"> </div>


</li>
<li> The <span class="inlinecode"><span class="id" title="var">T_True</span></span>, <span class="inlinecode"><span class="id" title="var">T_False</span></span>, and <span class="inlinecode"><span class="id" title="var">T_Abs</span></span> cases are trivial, since in
      each of these cases we can see by inspecting the rule that <span class="inlinecode"><span class="id" title="var">t</span></span>
      is a value.

<div class="paragraph"> </div>


</li>
<li> If the last rule of the derivation is <span class="inlinecode"><span class="id" title="var">T_App</span></span>, then <span class="inlinecode"><span class="id" title="var">t</span></span> has the
      form <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> for some <span class="inlinecode"><span class="id" title="var">t1</span></span> and <span class="inlinecode"><span class="id" title="var">t2</span></span>, where <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T2</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">T</span></span>
      and <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t2</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T2</span></span> for some type <span class="inlinecode"><span class="id" title="var">T2</span></span>.  The induction hypothesis
      for the first subderivation says that either <span class="inlinecode"><span class="id" title="var">t1</span></span> is a value or
      else it can take a reduction step.

<div class="paragraph"> </div>

<ul class="doclist">
<li> If <span class="inlinecode"><span class="id" title="var">t1</span></span> is a value, then consider <span class="inlinecode"><span class="id" title="var">t2</span></span>, which by the
          induction hypothesis for the second subderivation must also
          either be a value or take a step.

<div class="paragraph"> </div>

<ul class="doclist">
<li> Suppose <span class="inlinecode"><span class="id" title="var">t2</span></span> is a value.  Since <span class="inlinecode"><span class="id" title="var">t1</span></span> is a value with an
              arrow type, it must be a lambda abstraction; hence <span class="inlinecode"><span class="id" title="var">t1</span></span>
              <span class="inlinecode"><span class="id" title="var">t2</span></span> can take a step by <span class="inlinecode"><span class="id" title="var">ST_AppAbs</span></span>.

<div class="paragraph"> </div>


</li>
<li> Otherwise, <span class="inlinecode"><span class="id" title="var">t2</span></span> can take a step, and hence so can <span class="inlinecode"><span class="id" title="var">t1</span></span>
              <span class="inlinecode"><span class="id" title="var">t2</span></span> by <span class="inlinecode"><span class="id" title="var">ST_App2</span></span>.

<div class="paragraph"> </div>


</li>
</ul>

</li>
<li> If <span class="inlinecode"><span class="id" title="var">t1</span></span> can take a step, then so can <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> by <span class="inlinecode"><span class="id" title="var">ST_App1</span></span>.

<div class="paragraph"> </div>


</li>
</ul>

</li>
<li> If the last rule of the derivation is <span class="inlinecode"><span class="id" title="var">T_If</span></span>, then <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="keyword">if</span></span>
      <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">t3</span></span>, where <span class="inlinecode"><span class="id" title="var">t1</span></span> has type <span class="inlinecode"><span class="id" title="var">Bool</span></span>.  The first IH
      says that <span class="inlinecode"><span class="id" title="var">t1</span></span> either is a value or takes a step.

<div class="paragraph"> </div>

<ul class="doclist">
<li> If <span class="inlinecode"><span class="id" title="var">t1</span></span> is a value, then since it has type <span class="inlinecode"><span class="id" title="var">Bool</span></span> it must be
          either <span class="inlinecode"><span class="id" title="var">true</span></span> or <span class="inlinecode"><span class="id" title="var">false</span></span>.  If it is <span class="inlinecode"><span class="id" title="var">true</span></span>, then <span class="inlinecode"><span class="id" title="var">t</span></span> steps to
          <span class="inlinecode"><span class="id" title="var">t2</span></span>; otherwise it steps to <span class="inlinecode"><span class="id" title="var">t3</span></span>.

<div class="paragraph"> </div>


</li>
<li> Otherwise, <span class="inlinecode"><span class="id" title="var">t1</span></span> takes a step, and therefore so does <span class="inlinecode"><span class="id" title="var">t</span></span> (by
          <span class="inlinecode"><span class="id" title="var">ST_If</span></span>). 

</li>
</ul>

</li>
</ul>
</div>
<div class="code">
<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">Proof</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">with</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">eauto</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">Ht</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">remember</span></a> <a class="idref" href="PLF.Maps.html#empty"><span class="id" title="definition">empty</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">Gamma</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">induction</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">Ht</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">subst</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">Gamma</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">auto</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">discriminate</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">H</span></a>.<br/>

<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">right</span></a>. <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">IHHt1</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">+</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">IHHt2</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">×</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.StlcProp.html#STLCProp.canonical_forms_fun"><span class="id" title="lemma">canonical_forms_fun</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">Ht1</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">[|</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">assumption</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">Ht1</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">t0</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">H1</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">]]</span></a>. <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">subst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">∃</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">x</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">:=</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t2</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">]</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t0</span></a> <a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">)</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">×</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H0</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t2'</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Hstp</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">]</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∃</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t1</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t2'</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">)</span></a>...<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">+</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t1'</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Hstp</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">]</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∃</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t1'</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t2</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">)</span></a>...<br/>

<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">right</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">IHHt1</span></a>...<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">+</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#STLCProp.canonical_forms_bool"><span class="id" title="lemma">canonical_forms_bool</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t1</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">);</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">subst</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">eauto</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">+</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t1'</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Hstp</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">]</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∃</span></a> <a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t1'</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t2</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t3</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a>...<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab575"></a><h4 class="section">Exercise: 3 stars, advanced (progress_from_term_ind)</h4>


<div class="paragraph"> </div>

    Show that progress can also be proved by induction on terms
    instead of induction on typing derivations. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="STLCProp.progress'" class="idref" href="#STLCProp.progress'"><span class="id" title="lemma">progress'</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="t:10" class="idref" href="#t:10"><span class="id" title="binder">t</span></a> <a id="T:11" class="idref" href="#T:11"><span class="id" title="binder">T</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:10"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.value"><span class="id" title="inductive">value</span></a> <a class="idref" href="PLF.StlcProp.html#t:10"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="t':12" class="idref" href="#t':12"><span class="id" title="binder">t'</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.StlcProp.html#t:10"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="PLF.StlcProp.html#t':12"><span class="id" title="variable">t'</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">induction</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Ht</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">auto</span></a>.<br/>
 <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab576"></a><h1 class="section">Preservation</h1>

<div class="paragraph"> </div>

 The other half of the type soundness property is the
    preservation of types during reduction.  For this part, we'll need
    to develop some technical machinery for reasoning about variables
    and substitution.  Working from top to bottom (from the high-level
    property we are actually interested in to the lowest-level
    technical lemmas that are needed by various cases of the more
    interesting proofs), the story goes like this:

<div class="paragraph"> </div>

<ul class="doclist">
<li> The <i>preservation theorem</i> is proved by induction on a typing
        derivation, pretty much as we did in the <span class="inlinecode"><span class="id" title="keyword">Types</span></span> chapter.
        The one case that is significantly different is the one for
        the <span class="inlinecode"><span class="id" title="var">ST_AppAbs</span></span> rule, whose definition uses the substitution
        operation.  To see that this step preserves typing, we need to
        know that the substitution itself does.  So we prove a...

<div class="paragraph"> </div>


</li>
<li> <i>substitution lemma</i>, stating that substituting a (closed,
        well-typed) term <span class="inlinecode"><span class="id" title="var">s</span></span> for a variable <span class="inlinecode"><span class="id" title="var">x</span></span> in a term <span class="inlinecode"><span class="id" title="var">t</span></span>
        preserves the type of <span class="inlinecode"><span class="id" title="var">t</span></span>.  The proof goes by induction on the
        form of <span class="inlinecode"><span class="id" title="var">t</span></span> and requires looking at all the different cases in
        the definition of substitition.  This time, for the variables
        case, we discover that we need to deduce from the fact that a
        term <span class="inlinecode"><span class="id" title="var">s</span></span> has type S in the empty context the fact that <span class="inlinecode"><span class="id" title="var">s</span></span> has
        type S in every context. For this we prove a...

<div class="paragraph"> </div>


</li>
<li> <i>weakening</i> lemma, showing that typing is preserved under
        "extensions" to the context <span class="inlinecode"><span class="id" title="var">Gamma</span></span>.

</li>
</ul>

<div class="paragraph"> </div>

   To make Coq happy, of course, we need to formalize the story in the
   opposite order, starting with weakening... 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab577"></a><h2 class="section">The Weakening Lemma</h2>

<div class="paragraph"> </div>

 First, we show that typing is preserved under "extensions" to the
    context <span class="inlinecode"><span class="id" title="var">Gamma</span></span>.  (Recall the definition of "includedin" from
    Maps.v.) 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="STLCProp.weakening" class="idref" href="#STLCProp.weakening"><span class="id" title="lemma">weakening</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="Gamma:13" class="idref" href="#Gamma:13"><span class="id" title="binder">Gamma</span></a> <a id="Gamma':14" class="idref" href="#Gamma':14"><span class="id" title="binder">Gamma'</span></a> <a id="t:15" class="idref" href="#t:15"><span class="id" title="binder">t</span></a> <a id="T:16" class="idref" href="#T:16"><span class="id" title="binder">T</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Maps.html#includedin"><span class="id" title="definition">includedin</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:13"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma':14"><span class="id" title="variable">Gamma'</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:13"><span class="id" title="variable">Gamma</span></a>  <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:15"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a>  <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma':14"><span class="id" title="variable">Gamma'</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:15"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma'</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Ht</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">generalize</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">dependent</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma'</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">induction</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Ht</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">eauto</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">using</span></a> <a class="idref" href="PLF.Maps.html#includedin_update"><span class="id" title="lemma">includedin_update</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
The following simple corollary is what we actually need below. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="STLCProp.weakening_empty" class="idref" href="#STLCProp.weakening_empty"><span class="id" title="lemma">weakening_empty</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="Gamma:17" class="idref" href="#Gamma:17"><span class="id" title="binder">Gamma</span></a> <a id="t:18" class="idref" href="#t:18"><span class="id" title="binder">t</span></a> <a id="T:19" class="idref" href="#T:19"><span class="id" title="binder">T</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:18"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:17"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:18"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">eapply</span></a> <a class="idref" href="PLF.StlcProp.html#STLCProp.weakening"><span class="id" title="lemma">weakening</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">discriminate</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab578"></a><h2 class="section">The Substitution Lemma</h2>

<div class="paragraph"> </div>

 Now we come to the conceptual heart of the proof that reduction
    preserves types -- namely, the observation that <i>substitution</i>
    preserves types. 
<div class="paragraph"> </div>

 Formally, the so-called <i>substitution lemma</i> says this:
    Suppose we have a term <span class="inlinecode"><span class="id" title="var">t</span></span> with a free variable <span class="inlinecode"><span class="id" title="var">x</span></span>, and suppose
    we've assigned a type <span class="inlinecode"><span class="id" title="var">T</span></span> to <span class="inlinecode"><span class="id" title="var">t</span></span> under the assumption that <span class="inlinecode"><span class="id" title="var">x</span></span> has
    some type <span class="inlinecode"><span class="id" title="var">U</span></span>.  Also, suppose that we have some other term <span class="inlinecode"><span class="id" title="var">v</span></span> and
    that we've shown that <span class="inlinecode"><span class="id" title="var">v</span></span> has type <span class="inlinecode"><span class="id" title="var">U</span></span>.  Then, since <span class="inlinecode"><span class="id" title="var">v</span></span> satisfies
    the assumption we made about <span class="inlinecode"><span class="id" title="var">x</span></span> when typing <span class="inlinecode"><span class="id" title="var">t</span></span>, we can
    substitute <span class="inlinecode"><span class="id" title="var">v</span></span> for each of the occurrences of <span class="inlinecode"><span class="id" title="var">x</span></span> in <span class="inlinecode"><span class="id" title="var">t</span></span> and
    obtain a new term that still has type <span class="inlinecode"><span class="id" title="var">T</span></span>.

<div class="paragraph"> </div>

    <i>Lemma</i>: If <span class="inlinecode"><span class="id" title="var">x</span>|-&gt;<span class="id" title="var">U</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">U</span></span>,
    then <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">v</span>]<span class="id" title="var">t</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="STLCProp.substitution_preserves_typing" class="idref" href="#STLCProp.substitution_preserves_typing"><span class="id" title="lemma">substitution_preserves_typing</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="Gamma:20" class="idref" href="#Gamma:20"><span class="id" title="binder">Gamma</span></a> <a id="x:21" class="idref" href="#x:21"><span class="id" title="binder">x</span></a> <a id="U:22" class="idref" href="#U:22"><span class="id" title="binder">U</span></a> <a id="t:23" class="idref" href="#t:23"><span class="id" title="binder">t</span></a> <a id="v:24" class="idref" href="#v:24"><span class="id" title="binder">v</span></a> <a id="T:25" class="idref" href="#T:25"><span class="id" title="binder">T</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#x:21"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.Maps.html#79e346e151f2da51bbfb94360002b798"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="PLF.StlcProp.html#U:22"><span class="id" title="variable">U</span></a> <a class="idref" href="PLF.Maps.html#79e346e151f2da51bbfb94360002b798"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:20"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:23"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#v:24"><span class="id" title="variable">v</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">U</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a>  <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:20"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">x</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">:=</span></a><a class="idref" href="PLF.StlcProp.html#v:24"><span class="id" title="variable">v</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">]</span></a><a class="idref" href="PLF.StlcProp.html#t:23"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
The substitution lemma can be viewed as a kind of "commutation
    property."  Intuitively, it says that substitution and typing can
    be done in either order: we can either assign types to the terms
    <span class="inlinecode"><span class="id" title="var">t</span></span> and <span class="inlinecode"><span class="id" title="var">v</span></span> separately (under suitable contexts) and then combine
    them using substitution, or we can substitute first and then
    assign a type to <span class="inlinecode"></span> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">v</span>]</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode"></span>; the result is the same either
    way.

<div class="paragraph"> </div>

    <i>Proof</i>: We show, by induction on <span class="inlinecode"><span class="id" title="var">t</span></span>, that for all <span class="inlinecode"><span class="id" title="var">T</span></span> and
    <span class="inlinecode"><span class="id" title="var">Gamma</span></span>, if <span class="inlinecode"><span class="id" title="var">x</span>|-&gt;<span class="id" title="var">U</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">v</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">U</span></span>, then
    <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">v</span>]<span class="id" title="var">t</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span>.

<div class="paragraph"> </div>

<ul class="doclist">
<li> If <span class="inlinecode"><span class="id" title="var">t</span></span> is a variable there are two cases to consider,
        depending on whether <span class="inlinecode"><span class="id" title="var">t</span></span> is <span class="inlinecode"><span class="id" title="var">x</span></span> or some other variable.

<div class="paragraph"> </div>

<ul class="doclist">
<li> If <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">x</span></span>, then from the fact that <span class="inlinecode"><span class="id" title="var">x</span>|-&gt;<span class="id" title="var">U</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span>
            <span class="inlinecode"><span class="id" title="var">T</span></span> we conclude that <span class="inlinecode"><span class="id" title="var">U</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">T</span></span>.  We must show that <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">v</span>]<span class="id" title="var">x</span></span> <span class="inlinecode">=</span>
            <span class="inlinecode"><span class="id" title="var">v</span></span> has type <span class="inlinecode"><span class="id" title="var">T</span></span> under <span class="inlinecode"><span class="id" title="var">Gamma</span></span>, given the assumption that
            <span class="inlinecode"><span class="id" title="var">v</span></span> has type <span class="inlinecode"><span class="id" title="var">U</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">T</span></span> under the empty context.  This
            follows from the weakening lemma.

<div class="paragraph"> </div>


</li>
<li> If <span class="inlinecode"><span class="id" title="var">t</span></span> is some variable <span class="inlinecode"><span class="id" title="var">y</span></span> that is not equal to <span class="inlinecode"><span class="id" title="var">x</span></span>, then
            we need only note that <span class="inlinecode"><span class="id" title="var">y</span></span> has the same type under <span class="inlinecode"><span class="id" title="var">x</span>|-&gt;<span class="id" title="var">U</span>;</span>
            <span class="inlinecode"><span class="id" title="var">Gamma</span></span> as under <span class="inlinecode"><span class="id" title="var">Gamma</span></span>.

<div class="paragraph"> </div>


</li>
</ul>

</li>
<li> If <span class="inlinecode"><span class="id" title="var">t</span></span> is an abstraction <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">S</span>,</span> <span class="inlinecode"><span class="id" title="var">t0</span></span>, then <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span>→<span class="id" title="var">T1</span></span> and
        the IH tells us, for all <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> and <span class="inlinecode"><span class="id" title="var">T0</span></span>, that if <span class="inlinecode"><span class="id" title="var">x</span>|-&gt;<span class="id" title="var">U</span>;</span>
        <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t0</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T0</span></span>, then <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> <span class="inlinecode">|--</span> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">v</span>]<span class="id" title="var">t0</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T0</span></span>.
        Moreover, by inspecting the typing rules we see it must be
        the case that <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">S</span>;</span> <span class="inlinecode"><span class="id" title="var">x</span>|-&gt;<span class="id" title="var">U</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t0</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T1</span></span>.

<div class="paragraph"> </div>

        The substitution in the conclusion behaves differently
        depending on whether <span class="inlinecode"><span class="id" title="var">x</span></span> and <span class="inlinecode"><span class="id" title="var">y</span></span> are the same variable.

<div class="paragraph"> </div>

        First, suppose <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">y</span></span>.  Then, by the definition of
        substitution, <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">v</span>]<span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">t</span></span>, so we just need to show <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span>
        <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span>.  Using <span class="inlinecode"><span class="id" title="var">T_Abs</span></span>, we need to show that <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">S</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span>
        <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t0</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T1</span></span>. But we know <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">S</span>;</span> <span class="inlinecode"><span class="id" title="var">x</span>|-&gt;<span class="id" title="var">U</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t0</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T1</span></span>,
        and the claim follows since <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">y</span></span>.

<div class="paragraph"> </div>

        Second, suppose <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">≠</span> <span class="inlinecode"><span class="id" title="var">y</span></span>. Again, using <span class="inlinecode"><span class="id" title="var">T_Abs</span></span>,
        we need to show that <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">S</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">v</span>]<span class="id" title="var">t0</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T1</span></span>.
        Since <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">≠</span> <span class="inlinecode"><span class="id" title="var">y</span></span>, we have
        <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">S</span>;</span> <span class="inlinecode"><span class="id" title="var">x</span>|-&gt;<span class="id" title="var">U</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">x</span>|-&gt;<span class="id" title="var">U</span>;</span> <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">S</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span>. So
        we have <span class="inlinecode"><span class="id" title="var">x</span>|-&gt;<span class="id" title="var">U</span>;</span> <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">S</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t0</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T1</span></span>. Then, the
        the IH applies (taking <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">S</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span>), giving us
        <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">S</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode">[<span class="id" title="var">x</span>:=<span class="id" title="var">v</span>]<span class="id" title="var">t0</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T1</span></span>, as required.

<div class="paragraph"> </div>


</li>
<li> If <span class="inlinecode"><span class="id" title="var">t</span></span> is an application <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span>, the result follows
        straightforwardly from the definition of substitution and the
        induction hypotheses.

<div class="paragraph"> </div>


</li>
<li> The remaining cases are similar to the application case. 

</li>
</ul>
</div>
<div class="code">

<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">U</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">v</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Ht</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Hv</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">generalize</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">dependent</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">generalize</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">dependent</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">induction</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">inversion</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">clear</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">subst</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">simpl</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">eauto</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">rename</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">s</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">into</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">y</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">(</span></a><span class="id" title="lemma">eqb_spec</span> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">y</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">);</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">subst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">+</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">rewrite</span></a> <a class="idref" href="PLF.Maps.html#update_eq"><span class="id" title="lemma">update_eq</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">injection</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H2</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H2</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">subst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.StlcProp.html#STLCProp.weakening_empty"><span class="id" title="lemma">weakening_empty</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">assumption</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">+</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Stlc.html#STLC.T_Var"><span class="id" title="constructor">T_Var</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">rewrite</span></a> <a class="idref" href="PLF.Maps.html#update_neq"><span class="id" title="lemma">update_neq</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H2</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">auto</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">rename</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">s</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">into</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">y</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">into</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">S</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">destruct</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">(</span></a><span class="id" title="lemma">eqb_spec</span> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">y</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">);</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">subst</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Stlc.html#STLC.T_Abs"><span class="id" title="constructor">T_Abs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">+</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">rewrite</span></a> <a class="idref" href="PLF.Maps.html#update_shadow"><span class="id" title="lemma">update_shadow</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H5</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">assumption</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">+</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">IHt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">rewrite</span></a> <a class="idref" href="PLF.Maps.html#update_permute"><span class="id" title="lemma">update_permute</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">auto</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
One technical subtlety in the statement of the above lemma is that
    we assume <span class="inlinecode"><span class="id" title="var">v</span></span> has type <span class="inlinecode"><span class="id" title="var">U</span></span> in the <i>empty</i> context -- in other
    words, we assume <span class="inlinecode"><span class="id" title="var">v</span></span> is closed.  (Since we are using a simple
    definition of substition that is not capture-avoiding, it doesn't
    make sense to substitute non-closed terms into other terms.
    Fortunately, closed terms are all we need!)
 
<div class="paragraph"> </div>

<a id="lab579"></a><h4 class="section">Exercise: 3 stars, advanced (substitution_preserves_typing_from_typing_ind)</h4>


<div class="paragraph"> </div>

    Show that substitution_preserves_typing can also be
    proved by induction on typing derivations instead
    of induction on terms. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="STLCProp.substitution_preserves_typing_from_typing_ind" class="idref" href="#STLCProp.substitution_preserves_typing_from_typing_ind"><span class="id" title="lemma">substitution_preserves_typing_from_typing_ind</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="Gamma:26" class="idref" href="#Gamma:26"><span class="id" title="binder">Gamma</span></a> <a id="x:27" class="idref" href="#x:27"><span class="id" title="binder">x</span></a> <a id="U:28" class="idref" href="#U:28"><span class="id" title="binder">U</span></a> <a id="t:29" class="idref" href="#t:29"><span class="id" title="binder">t</span></a> <a id="v:30" class="idref" href="#v:30"><span class="id" title="binder">v</span></a> <a id="T:31" class="idref" href="#T:31"><span class="id" title="binder">T</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#x:27"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.Maps.html#79e346e151f2da51bbfb94360002b798"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="PLF.StlcProp.html#U:28"><span class="id" title="variable">U</span></a> <a class="idref" href="PLF.Maps.html#79e346e151f2da51bbfb94360002b798"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:26"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:29"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#v:30"><span class="id" title="variable">v</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">U</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a>   <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:26"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">x</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">:=</span></a><a class="idref" href="PLF.StlcProp.html#v:30"><span class="id" title="variable">v</span></a><a class="idref" href="PLF.Stlc.html#7b9f6b3b6e7ff7e373aadd69b350b60b"><span class="id" title="notation">]</span></a><a class="idref" href="PLF.StlcProp.html#t:29"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">U</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">v</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Ht</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Hv</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">remember</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.Maps.html#79e346e151f2da51bbfb94360002b798"><span class="id" title="notation">|-&gt;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">U</span></a><a class="idref" href="PLF.Maps.html#79e346e151f2da51bbfb94360002b798"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma'</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">generalize</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">dependent</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">induction</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Ht</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma'</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">G</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">simpl</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">eauto</span></a>.<br/>
 <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab580"></a><h2 class="section">Main Theorem</h2>

<div class="paragraph"> </div>

 We now have the ingredients we need to prove preservation: if a
    closed, well-typed term <span class="inlinecode"><span class="id" title="var">t</span></span> has type <span class="inlinecode"><span class="id" title="var">T</span></span> and takes a step to <span class="inlinecode"><span class="id" title="var">t'</span></span>,
    then <span class="inlinecode"><span class="id" title="var">t'</span></span> is also a closed term with type <span class="inlinecode"><span class="id" title="var">T</span></span>.  In other words,
    the small-step reduction relation preserves types. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="STLCProp.preservation" class="idref" href="#STLCProp.preservation"><span class="id" title="lemma">preservation</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="t:32" class="idref" href="#t:32"><span class="id" title="binder">t</span></a> <a id="t':33" class="idref" href="#t':33"><span class="id" title="binder">t'</span></a> <a id="T:34" class="idref" href="#T:34"><span class="id" title="binder">T</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:32"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#t:32"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="PLF.StlcProp.html#t':33"><span class="id" title="variable">t'</span></a>  <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t':33"><span class="id" title="variable">t'</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
<i>Proof</i>: By induction on the derivation of <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span>.

<div class="paragraph"> </div>

<ul class="doclist">
<li> We can immediately rule out <span class="inlinecode"><span class="id" title="var">T_Var</span></span>, <span class="inlinecode"><span class="id" title="var">T_Abs</span></span>, <span class="inlinecode"><span class="id" title="var">T_True</span></span>, and
      <span class="inlinecode"><span class="id" title="var">T_False</span></span> as final rules in the derivation, since in each of these
      cases <span class="inlinecode"><span class="id" title="var">t</span></span> cannot take a step.

<div class="paragraph"> </div>


</li>
<li> If the last rule in the derivation is <span class="inlinecode"><span class="id" title="var">T_App</span></span>, then <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span>,
      and there are subderivations showing that <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T2</span>→<span class="id" title="var">T</span></span> and
      <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t2</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T2</span></span> plus two induction hypotheses: (1) <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">--&gt;</span> <span class="inlinecode"><span class="id" title="var">t1'</span></span>
      implies <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t1'</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T2</span>→<span class="id" title="var">T</span></span> and (2) <span class="inlinecode"><span class="id" title="var">t2</span></span> <span class="inlinecode">--&gt;</span> <span class="inlinecode"><span class="id" title="var">t2'</span></span> implies <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t2'</span></span>
      <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T2</span></span>.  There are now three subcases to consider, one for
      each rule that could be used to show that <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> takes a step
      to <span class="inlinecode"><span class="id" title="var">t'</span></span>.

<div class="paragraph"> </div>

<ul class="doclist">
<li> If <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> takes a step by <span class="inlinecode"><span class="id" title="var">ST_App1</span></span>, with <span class="inlinecode"><span class="id" title="var">t1</span></span> stepping to
          <span class="inlinecode"><span class="id" title="var">t1'</span></span>, then, by the first IH, <span class="inlinecode"><span class="id" title="var">t1'</span></span> has the same type as
          <span class="inlinecode"><span class="id" title="var">t1</span></span> (<span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t1'</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T2</span>→<span class="id" title="var">T</span></span>), and hence by <span class="inlinecode"><span class="id" title="var">T_App</span></span> <span class="inlinecode"><span class="id" title="var">t1'</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> has
          type <span class="inlinecode"><span class="id" title="var">T</span></span>.

<div class="paragraph"> </div>


</li>
<li> The <span class="inlinecode"><span class="id" title="var">ST_App2</span></span> case is similar, using the second IH.

<div class="paragraph"> </div>


</li>
<li> If <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> takes a step by <span class="inlinecode"><span class="id" title="var">ST_AppAbs</span></span>, then <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">=</span>
          <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">T0</span>,<span class="id" title="var">t0</span></span> and <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> steps to <span class="inlinecode">[<span class="id" title="var">x0</span>:=<span class="id" title="var">t2</span>]<span class="id" title="var">t0</span></span>; the desired
          result now follows from the substitution lemma.

<div class="paragraph"> </div>


</li>
</ul>

</li>
<li> If the last rule in the derivation is <span class="inlinecode"><span class="id" title="var">T_If</span></span>, then <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="keyword">if</span></span>
      <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">t3</span></span>, with <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">Bool</span></span>, <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t2</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T1</span></span>, and
      <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t3</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T1</span></span>, and with three induction hypotheses: (1) <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">--&gt;</span>
      <span class="inlinecode"><span class="id" title="var">t1'</span></span> implies <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t1'</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">Bool</span></span>, (2) <span class="inlinecode"><span class="id" title="var">t2</span></span> <span class="inlinecode">--&gt;</span> <span class="inlinecode"><span class="id" title="var">t2'</span></span> implies <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t2'</span></span>
      <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T1</span></span>, and (3) <span class="inlinecode"><span class="id" title="var">t3</span></span> <span class="inlinecode">--&gt;</span> <span class="inlinecode"><span class="id" title="var">t3'</span></span> implies <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t3'</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T1</span></span>.

<div class="paragraph"> </div>

      There are again three subcases to consider, depending on how <span class="inlinecode"><span class="id" title="var">t</span></span>
      steps.

<div class="paragraph"> </div>

<ul class="doclist">
<li> If <span class="inlinecode"><span class="id" title="var">t</span></span> steps to <span class="inlinecode"><span class="id" title="var">t2</span></span> or <span class="inlinecode"><span class="id" title="var">t3</span></span> by <span class="inlinecode"><span class="id" title="var">ST_IfTrue</span></span> or
          <span class="inlinecode"><span class="id" title="var">ST_IfFalse</span></span>, the result is immediate, since <span class="inlinecode"><span class="id" title="var">t2</span></span> and <span class="inlinecode"><span class="id" title="var">t3</span></span>
          have the same type as <span class="inlinecode"><span class="id" title="var">t</span></span>.

<div class="paragraph"> </div>


</li>
<li> Otherwise, <span class="inlinecode"><span class="id" title="var">t</span></span> steps by <span class="inlinecode"><span class="id" title="var">ST_If</span></span>, and the desired
          conclusion follows directly from the first induction
          hypothesis. 

</li>
</ul>

</li>
</ul>
</div>
<div class="code">

<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">with</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">eauto</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t'</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HT</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">generalize</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">dependent</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t'</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">remember</span></a> <a class="idref" href="PLF.Maps.html#empty"><span class="id" title="definition">empty</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">induction</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HT</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t'</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HE</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">subst</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">try</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">solve</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">inversion</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HE</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">subst</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">auto</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">-</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">inversion</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HE</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">subst</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">+</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">apply</span></a> <a class="idref" href="PLF.StlcProp.html#STLCProp.substitution_preserves_typing"><span class="id" title="lemma">substitution_preserves_typing</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">with</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T2</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">inversion</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">HT1</span></a>...<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Qed</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab581"></a><h4 class="section">Exercise: 2 stars, standard, especially useful (subject_expansion_stlc)</h4>


<div class="paragraph"> </div>

    An exercise in the <span class="inlinecode"><span class="id" title="keyword">Types</span></span> chapter asked about the <i>subject
    expansion</i> property for the simple language of arithmetic and
    boolean expressions.  This property did not hold for that language,
    and it also fails for STLC.  That is, it is not always the case that,
    if <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">--&gt;</span> <span class="inlinecode"><span class="id" title="var">t'</span></span> and <span class="inlinecode"><span class="id" title="var">empty</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t'</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span>, then <span class="inlinecode"><span class="id" title="var">empty</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span>.
    Show this by giving a counter-example that does <i>not involve
    conditionals</i>. 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="STLCProp.not_subject_expansion" class="idref" href="#STLCProp.not_subject_expansion"><span class="id" title="lemma">not_subject_expansion</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="t:35" class="idref" href="#t:35"><span class="id" title="binder">t</span></a> <a id="t':36" class="idref" href="#t':36"><span class="id" title="binder">t'</span></a> <a id="T:37" class="idref" href="#T:37"><span class="id" title="binder">T</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.StlcProp.html#t:35"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="PLF.StlcProp.html#t':36"><span class="id" title="variable">t'</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t':36"><span class="id" title="variable">t'</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:35"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a>.<br/>
 <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Admitted</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="STLCProp.manual_grade_for_subject_expansion_stlc" class="idref" href="#STLCProp.manual_grade_for_subject_expansion_stlc"><span class="id" title="definition">manual_grade_for_subject_expansion_stlc</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">(</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><span class="id" title="inductive">string</span><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab582"></a><h1 class="section">Type Soundness</h1>

<div class="paragraph"> </div>

<a id="lab583"></a><h4 class="section">Exercise: 2 stars, standard, optional (type_soundness)</h4>


<div class="paragraph"> </div>

    Put progress and preservation together and show that a well-typed
    term can <i>never</i> reach a stuck state.  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="STLCProp.stuck" class="idref" href="#STLCProp.stuck"><span class="id" title="definition">stuck</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">(</span></a><a id="t:38" class="idref" href="#t:38"><span class="id" title="binder">t</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a><a class="idref" href="PLF.Stlc.html#STLC.tm"><span class="id" title="inductive">tm</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Prop</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Smallstep.html#normal_form"><span class="id" title="definition">normal_form</span></a> <a class="idref" href="PLF.Stlc.html#STLC.step"><span class="id" title="inductive">step</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#t:38"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="PLF.Stlc.html#STLC.value"><span class="id" title="inductive">value</span></a> <a class="idref" href="PLF.StlcProp.html#t:38"><span class="id" title="variable">t</span></a>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <a id="STLCProp.type_soundness" class="idref" href="#STLCProp.type_soundness"><span class="id" title="lemma">type_soundness</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="t:39" class="idref" href="#t:39"><span class="id" title="binder">t</span></a> <a id="t':40" class="idref" href="#t':40"><span class="id" title="binder">t'</span></a> <a id="T:41" class="idref" href="#T:41"><span class="id" title="binder">T</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:39"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#t:39"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#bec5a241f75789ab79d4eacc9e2c0fec"><span class="id" title="notation">--&gt;*</span></a> <a class="idref" href="PLF.StlcProp.html#t':40"><span class="id" title="variable">t'</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~(</span></a><a class="idref" href="PLF.StlcProp.html#STLCProp.stuck"><span class="id" title="definition">stuck</span></a> <a class="idref" href="PLF.StlcProp.html#t':40"><span class="id" title="variable">t'</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t'</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Hhas_type</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Hmulti</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">unfold</span></a> <a class="idref" href="PLF.StlcProp.html#STLCProp.stuck"><span class="id" title="definition">stuck</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Hnf</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Hnot_val</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">]</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">unfold</span></a> <a class="idref" href="PLF.Smallstep.html#normal_form"><span class="id" title="definition">normal_form</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Hnf</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">induction</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Hmulti</span></a>.<br/>
 <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab584"></a><h1 class="section">Uniqueness of Types</h1>

<div class="paragraph"> </div>

<a id="lab585"></a><h4 class="section">Exercise: 3 stars, standard (unique_types)</h4>


<div class="paragraph"> </div>

    Another nice property of the STLC is that types are unique: a
    given term (in a given context) has at most one type. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <a id="STLCProp.unique_types" class="idref" href="#STLCProp.unique_types"><span class="id" title="lemma">unique_types</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="Gamma:42" class="idref" href="#Gamma:42"><span class="id" title="binder">Gamma</span></a> <a id="e:43" class="idref" href="#e:43"><span class="id" title="binder">e</span></a> <a id="T:44" class="idref" href="#T:44"><span class="id" title="binder">T</span></a> <a id="T':45" class="idref" href="#T':45"><span class="id" title="binder">T'</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:42"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#e:43"><span class="id" title="variable">e</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:42"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#e:43"><span class="id" title="variable">e</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T'</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#T:44"><span class="id" title="variable">T</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.StlcProp.html#T':45"><span class="id" title="variable">T'</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">Proof</span></a>.<br/>
 <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab586"></a><h1 class="section">Context Invariance (Optional)</h1>

<div class="paragraph"> </div>

 Another standard technical lemma associated with typed languages
    is <i>context invariance</i>. It states that typing is preserved under
    "inessential changes" to the context <span class="inlinecode"><span class="id" title="var">Gamma</span></span> -- in particular,
    changes that do not affect any of the free variables of the
    term. In this section, we establish this property for our system,
    introducing some other standard terminology on the way.  
<div class="paragraph"> </div>

 First, we need to define the <i>free variables</i> in a term -- i.e.,
    variables that are used in the term in positions that are <i>not</i> in
    the scope of an enclosing function abstraction binding a variable
    of the same name.

<div class="paragraph"> </div>

    More technically, a variable <span class="inlinecode"><span class="id" title="var">x</span></span> <i>appears free in</i> a term <i>t</i> if
    <span class="inlinecode"><span class="id" title="var">t</span></span> contains some occurrence of <span class="inlinecode"><span class="id" title="var">x</span></span> that is not under an
    abstraction labeled <span class="inlinecode"><span class="id" title="var">x</span></span>. For example:
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">y</span></span> appears free, but <span class="inlinecode"><span class="id" title="var">x</span></span> does not, in <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">T</span>→<span class="id" title="var">U</span>,</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span>

</li>
<li> both <span class="inlinecode"><span class="id" title="var">x</span></span> and <span class="inlinecode"><span class="id" title="var">y</span></span> appear free in <span class="inlinecode">(\<span class="id" title="var">x</span>:<span class="id" title="var">T</span>→<span class="id" title="var">U</span>,</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span>)</span> <span class="inlinecode"><span class="id" title="var">x</span></span>

</li>
<li> no variables appear free in <span class="inlinecode">\<span class="id" title="var">x</span>:<span class="id" title="var">T</span>→<span class="id" title="var">U</span>,</span> <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">T</span>,</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span>

</li>
</ul>

<div class="paragraph"> </div>

      Formally: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="STLCProp.appears_free_in" class="idref" href="#STLCProp.appears_free_in"><span class="id" title="definition, inductive"><span id="STLCProp.appears_free_in_ind" class="id"><span id="STLCProp.appears_free_in_sind" class="id">appears_free_in</span></span></span></a> <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">(</span></a><a id="x:46" class="idref" href="#x:46"><span class="id" title="binder">x</span></a> <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">:</span></a> <span class="id" title="inductive">string</span><a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">Prop</span></a> <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">|</span></a> <a id="STLCProp.afi_var" class="idref" href="#STLCProp.afi_var"><span class="id" title="constructor">afi_var</span></a> <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#appears_free_in:47"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">|</span></a> <a id="STLCProp.afi_app1" class="idref" href="#STLCProp.afi_app1"><span class="id" title="constructor">afi_app1</span></a> <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">∀</span></a> <a id="t1:49" class="idref" href="#t1:49"><span class="id" title="binder">t1</span></a> <a id="t2:50" class="idref" href="#t2:50"><span class="id" title="binder">t2</span></a><a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#appears_free_in:47"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.StlcProp.html#t1:49"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#appears_free_in:47"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.StlcProp.html#t1:49"><span class="id" title="variable">t1</span></a> <a class="idref" href="PLF.StlcProp.html#t2:50"><span class="id" title="variable">t2</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">|</span></a> <a id="STLCProp.afi_app2" class="idref" href="#STLCProp.afi_app2"><span class="id" title="constructor">afi_app2</span></a> <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">∀</span></a> <a id="t1:51" class="idref" href="#t1:51"><span class="id" title="binder">t1</span></a> <a id="t2:52" class="idref" href="#t2:52"><span class="id" title="binder">t2</span></a><a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#appears_free_in:47"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.StlcProp.html#t2:52"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#appears_free_in:47"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.StlcProp.html#t1:51"><span class="id" title="variable">t1</span></a> <a class="idref" href="PLF.StlcProp.html#t2:52"><span class="id" title="variable">t2</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">|</span></a> <a id="STLCProp.afi_abs" class="idref" href="#STLCProp.afi_abs"><span class="id" title="constructor">afi_abs</span></a> <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">∀</span></a> <a id="y:53" class="idref" href="#y:53"><span class="id" title="binder">y</span></a> <a id="T1:54" class="idref" href="#T1:54"><span class="id" title="binder">T1</span></a> <a id="t1:55" class="idref" href="#t1:55"><span class="id" title="binder">t1</span></a><a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#y:53"><span class="id" title="variable">y</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a>  <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#appears_free_in:47"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.StlcProp.html#t1:55"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#appears_free_in:47"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">y</span></a><a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">:</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T1</span></a><a class="idref" href="PLF.Stlc.html#6eb31167d8f50121d9f88bceb766d140"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.StlcProp.html#t1:55"><span class="id" title="variable">t1</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">|</span></a> <a id="STLCProp.afi_if1" class="idref" href="#STLCProp.afi_if1"><span class="id" title="constructor">afi_if1</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="t1:56" class="idref" href="#t1:56"><span class="id" title="binder">t1</span></a> <a id="t2:57" class="idref" href="#t2:57"><span class="id" title="binder">t2</span></a> <a id="t3:58" class="idref" href="#t3:58"><span class="id" title="binder">t3</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#appears_free_in:47"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.StlcProp.html#t1:56"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#appears_free_in:47"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="PLF.StlcProp.html#t1:56"><span class="id" title="variable">t1</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="PLF.StlcProp.html#t2:57"><span class="id" title="variable">t2</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="PLF.StlcProp.html#t3:58"><span class="id" title="variable">t3</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">|</span></a> <a id="STLCProp.afi_if2" class="idref" href="#STLCProp.afi_if2"><span class="id" title="constructor">afi_if2</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="t1:59" class="idref" href="#t1:59"><span class="id" title="binder">t1</span></a> <a id="t2:60" class="idref" href="#t2:60"><span class="id" title="binder">t2</span></a> <a id="t3:61" class="idref" href="#t3:61"><span class="id" title="binder">t3</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#appears_free_in:47"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.StlcProp.html#t2:60"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#appears_free_in:47"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="PLF.StlcProp.html#t1:59"><span class="id" title="variable">t1</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="PLF.StlcProp.html#t2:60"><span class="id" title="variable">t2</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="PLF.StlcProp.html#t3:61"><span class="id" title="variable">t3</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">|</span></a> <a id="STLCProp.afi_if3" class="idref" href="#STLCProp.afi_if3"><span class="id" title="constructor">afi_if3</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="t1:62" class="idref" href="#t1:62"><span class="id" title="binder">t1</span></a> <a id="t2:63" class="idref" href="#t2:63"><span class="id" title="binder">t2</span></a> <a id="t3:64" class="idref" href="#t3:64"><span class="id" title="binder">t3</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#appears_free_in:47"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.StlcProp.html#t3:64"><span class="id" title="variable">t3</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#appears_free_in:47"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:46"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="PLF.StlcProp.html#t1:62"><span class="id" title="variable">t1</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="PLF.StlcProp.html#t2:63"><span class="id" title="variable">t2</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm::'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="PLF.StlcProp.html#t3:64"><span class="id" title="variable">t3</span></a><a class="idref" href="PLF.Stlc.html#e8af982a8e3c0fd8817c99230202de74"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="PLF.StlcProp.html#appears_free_in"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">core</span></a>.<br/>

<br/>
</div>

<div class="doc">
The <i>free variables</i> of a term are just the variables that appear
    free in it.  This gives us another way to define <i>closed</i> terms --
    arguably a better one, since it applies even to ill-typed
    terms.  Indeed, this is the standard definition of the term
    "closed." 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="STLCProp.closed" class="idref" href="#STLCProp.closed"><span class="id" title="definition">closed</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">(</span></a><a id="t:65" class="idref" href="#t:65"><span class="id" title="binder">t</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a><a class="idref" href="PLF.Stlc.html#STLC.tm"><span class="id" title="inductive">tm</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="x:66" class="idref" href="#x:66"><span class="id" title="binder">x</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="PLF.StlcProp.html#STLCProp.appears_free_in"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:66"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.StlcProp.html#t:65"><span class="id" title="variable">t</span></a>.<br/>

<br/>
</div>

<div class="doc">
Conversely, an <i>open</i> term is one that may contain free
    variables.  (I.e., every term is an open term; the closed terms
    are a subset of the open ones.  "Open" precisely means "possibly
    containing free variables.") 
<div class="paragraph"> </div>

<a id="lab587"></a><h4 class="section">Exercise: 1 star, standard, optional (afi)</h4>


<div class="paragraph"> </div>

    (Officially optional, but strongly recommended!) In the space
    below, write out the rules of the <span class="inlinecode"><span class="id" title="var">appears_free_in</span></span> relation in
    informal inference-rule notation.  (Use whatever notational
    conventions you like -- the point of the exercise is just for you
    to think a bit about the meaning of each rule.)  Although this is
    a rather low-level, technical definition, understanding it is
    crucial to understanding substitution and its properties, which
    are really the crux of the lambda-calculus. 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="STLCProp.manual_grade_for_afi" class="idref" href="#STLCProp.manual_grade_for_afi"><span class="id" title="definition">manual_grade_for_afi</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">(</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><span class="id" title="inductive">string</span><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

 Next, we show that if a variable <span class="inlinecode"><span class="id" title="var">x</span></span> appears free in a term <span class="inlinecode"><span class="id" title="var">t</span></span>,
    and if we know <span class="inlinecode"><span class="id" title="var">t</span></span> is well typed in context <span class="inlinecode"><span class="id" title="var">Gamma</span></span>, then it
    must be the case that <span class="inlinecode"><span class="id" title="var">Gamma</span></span> assigns a type to <span class="inlinecode"><span class="id" title="var">x</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="STLCProp.free_in_context" class="idref" href="#STLCProp.free_in_context"><span class="id" title="lemma">free_in_context</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="x:67" class="idref" href="#x:67"><span class="id" title="binder">x</span></a> <a id="t:68" class="idref" href="#t:68"><span class="id" title="binder">t</span></a> <a id="T:69" class="idref" href="#T:69"><span class="id" title="binder">T</span></a> <a id="Gamma:70" class="idref" href="#Gamma:70"><span class="id" title="binder">Gamma</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#STLCProp.appears_free_in"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:67"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.StlcProp.html#t:68"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:70"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:68"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="T':71" class="idref" href="#T':71"><span class="id" title="binder">T'</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:70"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="PLF.StlcProp.html#x:67"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="PLF.StlcProp.html#T':71"><span class="id" title="variable">T'</span></a>.<br/>

<br/>
</div>

<div class="doc">
<i>Proof</i>: We show, by induction on the proof that <span class="inlinecode"><span class="id" title="var">x</span></span> appears free
    in <span class="inlinecode"><span class="id" title="var">t</span></span>, that, for all contexts <span class="inlinecode"><span class="id" title="var">Gamma</span></span>, if <span class="inlinecode"><span class="id" title="var">t</span></span> is well typed under
    <span class="inlinecode"><span class="id" title="var">Gamma</span></span>, then <span class="inlinecode"><span class="id" title="var">Gamma</span></span> assigns some type to <span class="inlinecode"><span class="id" title="var">x</span></span>.

<div class="paragraph"> </div>

<ul class="doclist">
<li> If the last rule used is <span class="inlinecode"><span class="id" title="var">afi_var</span></span>, then <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">x</span></span>, and from the
      assumption that <span class="inlinecode"><span class="id" title="var">t</span></span> is well typed under <span class="inlinecode"><span class="id" title="var">Gamma</span></span> we have
      immediately that <span class="inlinecode"><span class="id" title="var">Gamma</span></span> assigns a type to <span class="inlinecode"><span class="id" title="var">x</span></span>.

<div class="paragraph"> </div>


</li>
<li> If the last rule used is <span class="inlinecode"><span class="id" title="var">afi_app1</span></span>, then <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> and <span class="inlinecode"><span class="id" title="var">x</span></span>
      appears free in <span class="inlinecode"><span class="id" title="var">t1</span></span>.  Since <span class="inlinecode"><span class="id" title="var">t</span></span> is well typed under <span class="inlinecode"><span class="id" title="var">Gamma</span></span>, we
      can see from the typing rules that <span class="inlinecode"><span class="id" title="var">t1</span></span> must also be, and the IH
      then tells us that <span class="inlinecode"><span class="id" title="var">Gamma</span></span> assigns <span class="inlinecode"><span class="id" title="var">x</span></span> a type.

<div class="paragraph"> </div>


</li>
<li> Almost all the other cases are similar: <span class="inlinecode"><span class="id" title="var">x</span></span> appears free in a
      subterm of <span class="inlinecode"><span class="id" title="var">t</span></span>, and since <span class="inlinecode"><span class="id" title="var">t</span></span> is well typed under <span class="inlinecode"><span class="id" title="var">Gamma</span></span>, we
      know the subterm of <span class="inlinecode"><span class="id" title="var">t</span></span> in which <span class="inlinecode"><span class="id" title="var">x</span></span> appears is well typed under
      <span class="inlinecode"><span class="id" title="var">Gamma</span></span> as well, and the IH gives us exactly the conclusion we
      want.

<div class="paragraph"> </div>


</li>
<li> The only remaining case is <span class="inlinecode"><span class="id" title="var">afi_abs</span></span>.  In this case <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">=</span>
      <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">T1</span>,<span class="id" title="var">t1</span></span> and <span class="inlinecode"><span class="id" title="var">x</span></span> appears free in <span class="inlinecode"><span class="id" title="var">t1</span></span>, and we also know that
      <span class="inlinecode"><span class="id" title="var">x</span></span> is different from <span class="inlinecode"><span class="id" title="var">y</span></span>.  The difference from the previous
      cases is that, whereas <span class="inlinecode"><span class="id" title="var">t</span></span> is well typed under <span class="inlinecode"><span class="id" title="var">Gamma</span></span>, its body
      <span class="inlinecode"><span class="id" title="var">t1</span></span> is well typed under <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">T1</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span>, so the IH allows us
      to conclude that <span class="inlinecode"><span class="id" title="var">x</span></span> is assigned some type by the extended
      context <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">T1</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span>.  To conclude that <span class="inlinecode"><span class="id" title="var">Gamma</span></span> assigns a
      type to <span class="inlinecode"><span class="id" title="var">x</span></span>, we appeal to lemma <span class="inlinecode"><span class="id" title="var">update_neq</span></span>, noting that <span class="inlinecode"><span class="id" title="var">x</span></span>
      and <span class="inlinecode"><span class="id" title="var">y</span></span> are different variables. 
</li>
</ul>

<div class="paragraph"> </div>

<a id="lab588"></a><h4 class="section">Exercise: 2 stars, standard (free_in_context)</h4>


<div class="paragraph"> </div>

    Complete the following proof. 
</div>
<div class="code">

<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H0</span></a>. <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">generalize</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">dependent</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Gamma</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">generalize</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">dependent</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">induction</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">[|</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">|</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">y</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T1</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">t1</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H0</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">IHappears_free_in</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">|];</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">intros</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">try</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">solve</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">[</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">inversion</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">H0</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">eauto</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">]</span></a>.<br/>
 <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

 From the <span class="inlinecode"><span class="id" title="var">free_in_context</span></span> lemma, it immediately follows that any
    term <span class="inlinecode"><span class="id" title="var">t</span></span> that is well typed in the empty context is closed (it has
    no free variables). 
<div class="paragraph"> </div>

<a id="lab589"></a><h4 class="section">Exercise: 2 stars, standard, optional (typable_empty__closed)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Corollary</span> <a id="STLCProp.typable_empty__closed" class="idref" href="#STLCProp.typable_empty__closed"><span class="id" title="lemma">typable_empty__closed</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="t:72" class="idref" href="#t:72"><span class="id" title="binder">t</span></a> <a id="T:73" class="idref" href="#T:73"><span class="id" title="binder">T</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:72"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#STLCProp.closed"><span class="id" title="definition">closed</span></a> <a class="idref" href="PLF.StlcProp.html#t:72"><span class="id" title="variable">t</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a>.<br/>
 <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

 Finally, we establish <i>context_invariance</i>.  It is useful in cases
    when we have a proof of some typing relation <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span>,
    and we need to replace <span class="inlinecode"><span class="id" title="var">Gamma</span></span> by a different context <span class="inlinecode"><span class="id" title="var">Gamma'</span></span>.
    When is it safe to do this?  Intuitively, it must at least be the
    case that <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> assigns the same types as <span class="inlinecode"><span class="id" title="var">Gamma</span></span> to all the
    variables that appear free in <span class="inlinecode"><span class="id" title="var">t</span></span>. In fact, this is the only
    condition that is needed. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="STLCProp.context_invariance" class="idref" href="#STLCProp.context_invariance"><span class="id" title="lemma">context_invariance</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="Gamma:74" class="idref" href="#Gamma:74"><span class="id" title="binder">Gamma</span></a> <a id="Gamma':75" class="idref" href="#Gamma':75"><span class="id" title="binder">Gamma'</span></a> <a id="t:76" class="idref" href="#t:76"><span class="id" title="binder">t</span></a> <a id="T:77" class="idref" href="#T:77"><span class="id" title="binder">T</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:74"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:76"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="x:78" class="idref" href="#x:78"><span class="id" title="binder">x</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.StlcProp.html#STLCProp.appears_free_in"><span class="id" title="inductive">appears_free_in</span></a> <a class="idref" href="PLF.StlcProp.html#x:78"><span class="id" title="variable">x</span></a> <a class="idref" href="PLF.StlcProp.html#t:76"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:74"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="PLF.StlcProp.html#x:78"><span class="id" title="variable">x</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma':75"><span class="id" title="variable">Gamma'</span></a> <a class="idref" href="PLF.StlcProp.html#x:78"><span class="id" title="variable">x</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma':75"><span class="id" title="variable">Gamma'</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:76"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.Stlc.html#c0b414002a6698dbe399977e4cad4f87"><span class="id" title="notation">}&gt;</span></a>.<br/>

<br/>
</div>

<div class="doc">
<i>Proof</i>: By induction on the derivation of <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span>.

<div class="paragraph"> </div>

<ul class="doclist">
<li> If the last rule in the derivation was <span class="inlinecode"><span class="id" title="var">T_Var</span></span>, then <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">x</span></span> and
      <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">T</span></span>.  By assumption, <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">T</span></span> as well, and hence
      <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span> by <span class="inlinecode"><span class="id" title="var">T_Var</span></span>.

<div class="paragraph"> </div>


</li>
<li> If the last rule was <span class="inlinecode"><span class="id" title="var">T_Abs</span></span>, then <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">T2</span>,</span> <span class="inlinecode"><span class="id" title="var">t1</span></span>, with <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">=</span>
      <span class="inlinecode"><span class="id" title="var">T2</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">T1</span></span> and <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">T2</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T1</span></span>.  The induction
      hypothesis states that for any context <span class="inlinecode"><span class="id" title="var">Gamma''</span></span>, if <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">T2</span>;</span>
      <span class="inlinecode"><span class="id" title="var">Gamma</span></span> and <span class="inlinecode"><span class="id" title="var">Gamma''</span></span> assign the same types to all the free
      variables in <span class="inlinecode"><span class="id" title="var">t1</span></span>, then <span class="inlinecode"><span class="id" title="var">t1</span></span> has type <span class="inlinecode"><span class="id" title="var">T1</span></span> under <span class="inlinecode"><span class="id" title="var">Gamma''</span></span>.
      Let <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> be a context which agrees with <span class="inlinecode"><span class="id" title="var">Gamma</span></span> on the free
      variables in <span class="inlinecode"><span class="id" title="var">t</span></span>; we must show <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> <span class="inlinecode">|--</span> <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">T2</span>,</span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T2</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">T1</span></span>.

<div class="paragraph"> </div>

      By <span class="inlinecode"><span class="id" title="var">T_Abs</span></span>, it suffices to show that <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">T2</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span>
      <span class="inlinecode"><span class="id" title="var">T1</span></span>.  By the IH (setting <span class="inlinecode"><span class="id" title="var">Gamma''</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">T2</span>;<span class="id" title="var">Gamma'</span></span>), it
      suffices to show that <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">T2</span>;<span class="id" title="var">Gamma</span></span> and <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">T2</span>;<span class="id" title="var">Gamma'</span></span> agree
      on all the variables that appear free in <span class="inlinecode"><span class="id" title="var">t1</span></span>.

<div class="paragraph"> </div>

      Any variable occurring free in <span class="inlinecode"><span class="id" title="var">t1</span></span> must be either <span class="inlinecode"><span class="id" title="var">y</span></span> or some
      other variable.  <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">T2</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span> and <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">T2</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> clearly
      agree on <span class="inlinecode"><span class="id" title="var">y</span></span>.  Otherwise, note that any variable other than <span class="inlinecode"><span class="id" title="var">y</span></span>
      that occurs free in <span class="inlinecode"><span class="id" title="var">t1</span></span> also occurs free in <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode">\<span class="id" title="var">y</span>:<span class="id" title="var">T2</span>,</span> <span class="inlinecode"><span class="id" title="var">t1</span></span>,
      and by assumption <span class="inlinecode"><span class="id" title="var">Gamma</span></span> and <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> agree on all such
      variables; hence so do <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">T2</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma</span></span> and <span class="inlinecode"><span class="id" title="var">y</span>|-&gt;<span class="id" title="var">T2</span>;</span> <span class="inlinecode"><span class="id" title="var">Gamma'</span></span>.

<div class="paragraph"> </div>


</li>
<li> If the last rule was <span class="inlinecode"><span class="id" title="var">T_App</span></span>, then <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span>, with <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span>
      <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T2</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">T</span></span> and <span class="inlinecode"><span class="id" title="var">Gamma</span></span> <span class="inlinecode">|--</span> <span class="inlinecode"><span class="id" title="var">t2</span></span> <span class="inlinecode">\<span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">T2</span></span>.  One induction
      hypothesis states that for all contexts <span class="inlinecode"><span class="id" title="var">Gamma'</span></span>, if <span class="inlinecode"><span class="id" title="var">Gamma'</span></span>
      agrees with <span class="inlinecode"><span class="id" title="var">Gamma</span></span> on the free variables in <span class="inlinecode"><span class="id" title="var">t1</span></span>, then <span class="inlinecode"><span class="id" title="var">t1</span></span> has
      type <span class="inlinecode"><span class="id" title="var">T2</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">T</span></span> under <span class="inlinecode"><span class="id" title="var">Gamma'</span></span>; there is a similar IH for <span class="inlinecode"><span class="id" title="var">t2</span></span>.
      We must show that <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> also has type <span class="inlinecode"><span class="id" title="var">T</span></span> under <span class="inlinecode"><span class="id" title="var">Gamma'</span></span>,
      given the assumption that <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> agrees with <span class="inlinecode"><span class="id" title="var">Gamma</span></span> on all
      the free variables in <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span>.  By <span class="inlinecode"><span class="id" title="var">T_App</span></span>, it suffices to show
      that <span class="inlinecode"><span class="id" title="var">t1</span></span> and <span class="inlinecode"><span class="id" title="var">t2</span></span> each have the same type under <span class="inlinecode"><span class="id" title="var">Gamma'</span></span> as
      under <span class="inlinecode"><span class="id" title="var">Gamma</span></span>.  But all free variables in <span class="inlinecode"><span class="id" title="var">t1</span></span> are also free in
      <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span>, and similarly for <span class="inlinecode"><span class="id" title="var">t2</span></span>; hence the desired result
      follows from the induction hypotheses. 
</li>
</ul>

<div class="paragraph"> </div>

<a id="lab590"></a><h4 class="section">Exercise: 3 stars, standard, optional (context_invariance)</h4>


<div class="paragraph"> </div>

    Complete the following proof. 
</div>
<div class="code">
<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">Proof</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">intros</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">generalize</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">dependent</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">Gamma'</span></a>.<br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">induction</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">H</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">as</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">[|</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">?</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x0</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">?????</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|];</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">intros</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">;</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">auto</span></a>.<br/>
 <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">Admitted</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

 The context invariance lemma can actually be used in place of the
    weakening lemma to prove the crucial substitution lemma stated
    earlier. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab591"></a><h1 class="section">Additional Exercises</h1>

<div class="paragraph"> </div>

<a id="lab592"></a><h4 class="section">Exercise: 1 star, standard, optional (progress_preservation_statement)</h4>


<div class="paragraph"> </div>

    (Officially optional, but strongly recommended!) Without peeking
    at their statements above, write down the progress and
    preservation theorems for the simply typed lambda-calculus (as Coq
    theorems).  You can write <span class="inlinecode"><span class="id" title="var">Admitted</span></span> for the proofs. 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="STLCProp.manual_grade_for_progress_preservation_statement" class="idref" href="#STLCProp.manual_grade_for_progress_preservation_statement"><span class="id" title="definition">manual_grade_for_progress_preservation_statement</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><span class="id" title="inductive">string</span><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a id="lab593"></a><h4 class="section">Exercise: 2 stars, standard (stlc_variation1)</h4>


<div class="paragraph"> </div>

    Suppose we add a new term <span class="inlinecode"><span class="id" title="var">zap</span></span> with the following reduction rule
<hr/>
                  (ST_Zap)
                         t --&gt; zap

<div class="paragraph"> </div>

and the following typing rule:
<hr/>
           (T_Zap)
                      Gamma |-- zap \in T

<div class="paragraph"> </div>

    Which of the following properties of the STLC remain true in
    the presence of these rules?  For each property, write either
    "remains true" or "becomes false." If a property becomes
    false, give a counterexample.

<div class="paragraph"> </div>

<ul class="doclist">
<li> Determinism of <span class="inlinecode"><span class="id" title="var">step</span></span>

</li>
</ul>
<ul class="doclist">
<li> Progress

</li>
</ul>
<ul class="doclist">
<li> Preservation

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="STLCProp.manual_grade_for_stlc_variation1" class="idref" href="#STLCProp.manual_grade_for_stlc_variation1"><span class="id" title="definition">manual_grade_for_stlc_variation1</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><span class="id" title="inductive">string</span><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a id="lab594"></a><h4 class="section">Exercise: 2 stars, standard (stlc_variation2)</h4>


<div class="paragraph"> </div>

    Suppose instead that we add a new term <span class="inlinecode"><span class="id" title="var">foo</span></span> with the following
    reduction rules:
<hr/>
                (ST_Foo1)
                       (\x:A, x) --&gt; foo
<hr/>
                   (ST_Foo2)
                         foo --&gt; true

<div class="paragraph"> </div>

    Which of the following properties of the STLC remain true in
    the presence of this rule?  For each one, write either
    "remains true" or else "becomes false." If a property becomes
    false, give a counterexample.

<div class="paragraph"> </div>

<ul class="doclist">
<li> Determinism of <span class="inlinecode"><span class="id" title="var">step</span></span>

</li>
</ul>
<ul class="doclist">
<li> Progress

</li>
</ul>
<ul class="doclist">
<li> Preservation

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="STLCProp.manual_grade_for_stlc_variation2" class="idref" href="#STLCProp.manual_grade_for_stlc_variation2"><span class="id" title="definition">manual_grade_for_stlc_variation2</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><span class="id" title="inductive">string</span><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a id="lab595"></a><h4 class="section">Exercise: 2 stars, standard (stlc_variation3)</h4>


<div class="paragraph"> </div>

    Suppose instead that we remove the rule <span class="inlinecode"><span class="id" title="var">ST_App1</span></span> from the <span class="inlinecode"><span class="id" title="var">step</span></span>
    relation. Which of the following properties of the STLC remain
    true in the presence of this rule?  For each one, write either
    "remains true" or else "becomes false." If a property becomes
    false, give a counterexample.

<div class="paragraph"> </div>

<ul class="doclist">
<li> Determinism of <span class="inlinecode"><span class="id" title="var">step</span></span>

</li>
</ul>
<ul class="doclist">
<li> Progress

</li>
</ul>
<ul class="doclist">
<li> Preservation

</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="STLCProp.manual_grade_for_stlc_variation3" class="idref" href="#STLCProp.manual_grade_for_stlc_variation3"><span class="id" title="definition">manual_grade_for_stlc_variation3</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><span class="id" title="inductive">string</span><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a id="lab596"></a><h4 class="section">Exercise: 2 stars, standard, optional (stlc_variation4)</h4>


<div class="paragraph"> </div>

    Suppose instead that we add the following new rule to the
    reduction relation:
<hr/>
        (ST_FunnyIfTrue)
            (if true then t1 else t2) --&gt; true

<div class="paragraph"> </div>

    Which of the following properties of the STLC remain true in
    the presence of this rule?  For each one, write either
    "remains true" or else "becomes false." If a property becomes
    false, give a counterexample.

<div class="paragraph"> </div>

<ul class="doclist">
<li> Determinism of <span class="inlinecode"><span class="id" title="var">step</span></span>

</li>
</ul>
<ul class="doclist">
<li> Progress

</li>
</ul>
<ul class="doclist">
<li> Preservation

</li>
</ul>
 <font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a id="lab597"></a><h4 class="section">Exercise: 2 stars, standard, optional (stlc_variation5)</h4>


<div class="paragraph"> </div>

    Suppose instead that we add the following new rule to the typing
    relation:

<div class="paragraph"> </div>

                 Gamma |-- t1 \in Bool-&gt;Bool-&gt;Bool
                     Gamma |-- t2 \in Bool
<hr/>
       (T_FunnyApp)
                    Gamma |-- t1 t2 \in Bool

<div class="paragraph"> </div>

    Which of the following properties of the STLC remain true in
    the presence of this rule?  For each one, write either
    "remains true" or else "becomes false." If a property becomes
    false, give a counterexample.

<div class="paragraph"> </div>

<ul class="doclist">
<li> Determinism of <span class="inlinecode"><span class="id" title="var">step</span></span>

</li>
</ul>
<ul class="doclist">
<li> Progress

</li>
</ul>
<ul class="doclist">
<li> Preservation

</li>
</ul>
 <font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a id="lab598"></a><h4 class="section">Exercise: 2 stars, standard, optional (stlc_variation6)</h4>


<div class="paragraph"> </div>

    Suppose instead that we add the following new rule to the typing
    relation:

<div class="paragraph"> </div>

                    Gamma |-- t1 \in Bool
                    Gamma |-- t2 \in Bool
<hr/>
            (T_FunnyApp')
                    Gamma |-- t1 t2 \in Bool

<div class="paragraph"> </div>

    Which of the following properties of the STLC remain true in
    the presence of this rule?  For each one, write either
    "remains true" or else "becomes false." If a property becomes
    false, give a counterexample.

<div class="paragraph"> </div>

<ul class="doclist">
<li> Determinism of <span class="inlinecode"><span class="id" title="var">step</span></span>

</li>
</ul>
<ul class="doclist">
<li> Progress

</li>
</ul>
<ul class="doclist">
<li> Preservation

</li>
</ul>
 <font size=-2>&#9744;</font> 
<div class="paragraph"> </div>

<a id="lab599"></a><h4 class="section">Exercise: 2 stars, standard, optional (stlc_variation7)</h4>


<div class="paragraph"> </div>

    Suppose we add the following new rule to the typing relation
    of the STLC:
<hr/>
 (T_FunnyAbs)
                         |-- \x:Bool,t \in Bool

<div class="paragraph"> </div>

    Which of the following properties of the STLC remain true in
    the presence of this rule?  For each one, write either
    "remains true" or else "becomes false." If a property becomes
    false, give a counterexample.

<div class="paragraph"> </div>

<ul class="doclist">
<li> Determinism of <span class="inlinecode"><span class="id" title="var">step</span></span>

</li>
</ul>
<ul class="doclist">
<li> Progress

</li>
</ul>
<ul class="doclist">
<li> Preservation

</li>
</ul>
 <font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="PLF.StlcProp.html#STLCProp"><span class="id" title="module">STLCProp</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab600"></a><h2 class="section">Exercise: STLC with Arithmetic</h2>

<div class="paragraph"> </div>

 To see how the STLC might function as the core of a real
    programming language, let's extend it with a concrete base
    type of numbers and some constants and primitive
    operators. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="STLCArith" class="idref" href="#STLCArith"><span class="id" title="module">STLCArith</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="PLF.Stlc.html#STLC"><span class="id" title="module">STLC</span></a>.<br/>

<br/>
</div>

<div class="doc">
To types, we add a base type of natural numbers (and remove
    booleans, for brevity). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="STLCArith.ty" class="idref" href="#STLCArith.ty"><span class="id" title="definition, inductive"><span id="STLCArith.ty_rect" class="id"><span id="STLCArith.ty_ind" class="id"><span id="STLCArith.ty_rec" class="id"><span id="STLCArith.ty_sind" class="id">ty</span></span></span></span></span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">Type</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|</span></a> <a id="STLCArith.Ty_Arrow" class="idref" href="#STLCArith.Ty_Arrow"><span class="id" title="constructor">Ty_Arrow</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#ty:79"><span class="id" title="inductive">ty</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#ty:79"><span class="id" title="inductive">ty</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#ty:79"><span class="id" title="inductive">ty</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|</span></a> <a id="STLCArith.Ty_Nat" class="idref" href="#STLCArith.Ty_Nat"><span class="id" title="constructor">Ty_Nat</span></a>  <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#ty:79"><span class="id" title="inductive">ty</span></a>.<br/>

<br/>
</div>

<div class="doc">
To terms, we add natural number constants, along with
    successor, predecessor, multiplication, and zero-testing. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="STLCArith.tm" class="idref" href="#STLCArith.tm"><span class="id" title="definition, inductive"><span id="STLCArith.tm_rect" class="id"><span id="STLCArith.tm_ind" class="id"><span id="STLCArith.tm_rec" class="id"><span id="STLCArith.tm_sind" class="id">tm</span></span></span></span></span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">Type</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|</span></a> <a id="STLCArith.tm_var" class="idref" href="#STLCArith.tm_var"><span class="id" title="constructor">tm_var</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <span class="id" title="inductive">string</span> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|</span></a> <a id="STLCArith.tm_app" class="idref" href="#STLCArith.tm_app"><span class="id" title="constructor">tm_app</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|</span></a> <a id="STLCArith.tm_abs" class="idref" href="#STLCArith.tm_abs"><span class="id" title="constructor">tm_abs</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <span class="id" title="inductive">string</span> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.ty"><span class="id" title="inductive">ty</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|</span></a> <a id="STLCArith.tm_const" class="idref" href="#STLCArith.tm_const"><span class="id" title="constructor">tm_const</span></a>  <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|</span></a> <a id="STLCArith.tm_succ" class="idref" href="#STLCArith.tm_succ"><span class="id" title="constructor">tm_succ</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|</span></a> <a id="STLCArith.tm_pred" class="idref" href="#STLCArith.tm_pred"><span class="id" title="constructor">tm_pred</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|</span></a> <a id="STLCArith.tm_mult" class="idref" href="#STLCArith.tm_mult"><span class="id" title="constructor">tm_mult</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">|</span></a> <a id="STLCArith.tm_if0" class="idref" href="#STLCArith.tm_if0"><span class="id" title="constructor">tm_if0</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#tm:81"><span class="id" title="inductive">tm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="af6d42ce799b11eeb3aaf7b76d04f5f0" class="idref" href="#af6d42ce799b11eeb3aaf7b76d04f5f0"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">&lt;{{ x }}&gt;</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_ty</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="98e69fed47dd94b2ca40f19cf92711ed" class="idref" href="#98e69fed47dd94b2ca40f19cf92711ed"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">( t )</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_ty</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">0,</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_ty</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="STLCArith.:stlc_ty:stlc_scope:x_'-&gt;'_x" class="idref" href="#STLCArith.:stlc_ty:stlc_scope:x_'-&gt;'_x"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">S -&gt; T</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#STLCArith.Ty_Arrow"><span class="id" title="constructor">Ty_Arrow</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">S</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">T</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_ty</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">99,</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">right</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">associativity</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_scope</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="dedea96ace81b27db613d3f4ce696eb3" class="idref" href="#dedea96ace81b27db613d3f4ce696eb3"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">$( t )</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_ty</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">0,</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">constr</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_scope</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="6e1b35529b005ed182a3031d40f7b111" class="idref" href="#6e1b35529b005ed182a3031d40f7b111"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">$( x )</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">0,</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">constr</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">only</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">parsing</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="STLCArith.:stlc_tm:stlc_scope:x" class="idref" href="#STLCArith.:stlc_tm:stlc_scope:x"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">0,</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">constr</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">0)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="a2c77328d7271008b815cab95c990b88" class="idref" href="#a2c77328d7271008b815cab95c990b88"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">&lt;{ e }&gt;</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">e</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">e</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">200)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="44628e469cfad86f2e95586dcb5be5e8" class="idref" href="#44628e469cfad86f2e95586dcb5be5e8"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">( x )</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">0,</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_scope</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="STLCArith.:stlc_tm:stlc_scope:x_x" class="idref" href="#STLCArith.:stlc_tm:stlc_scope:x_x"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x y</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#STLCArith.tm_app"><span class="id" title="constructor">tm_app</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">y</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">10,</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">left</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">associativity</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="192e752c9346d5e2176e3e1c033fb404" class="idref" href="#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">\ x : t , y</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#STLCArith.tm_abs"><span class="id" title="constructor">tm_abs</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">y</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">200,</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">global</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_ty</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">y</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">200,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">left</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">associativity</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm_var"><span class="id" title="constructor">tm_var</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm_var"><span class="id" title="constructor">:</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm_var"><span class="id" title="constructor">string</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm_var"><span class="id" title="constructor">&gt;-&gt;</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm_var"><span class="id" title="constructor">tm</span></a>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm_var"><span class="id" title="constructor">tm_var</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">_</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">%</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">_string</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="STLCArith.:stlc_ty::'Nat'" class="idref" href="#STLCArith.:stlc_ty::'Nat'"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">'Nat'</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.Ty_Nat"><span class="id" title="constructor">Ty_Nat</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_ty</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">0)</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="STLCArith.:stlc_tm:stlc_scope:'succ'_x" class="idref" href="#STLCArith.:stlc_tm:stlc_scope:'succ'_x"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">'succ' x</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#STLCArith.tm_succ"><span class="id" title="constructor">tm_succ</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">10,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">0)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="STLCArith.:stlc_tm:stlc_scope:'pred'_x" class="idref" href="#STLCArith.:stlc_tm:stlc_scope:'pred'_x"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">'pred' x</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#STLCArith.tm_pred"><span class="id" title="constructor">tm_pred</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">10,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">0)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="57e41b5a891130e50f92714e37044a7b" class="idref" href="#57e41b5a891130e50f92714e37044a7b"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x * y</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#STLCArith.tm_mult"><span class="id" title="constructor">tm_mult</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">y</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">95,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">right</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">associativity</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_scope</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="STLCArith.:stlc_tm:stlc_scope:'if0'_x_'then'_x_'else'_x" class="idref" href="#STLCArith.:stlc_tm:stlc_scope:'if0'_x_'then'_x_'else'_x"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">'if0' x 'then' y 'else' z</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#STLCArith.tm_if0"><span class="id" title="constructor">tm_if0</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">y</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">z</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">0,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">0,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">y</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">0,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">z</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">custom</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_tm</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">0)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">stlc_scope</span></a>.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm_const"><span class="id" title="constructor">tm_const</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm_const"><span class="id" title="constructor">:</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm_const"><span class="id" title="constructor">nat</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm_const"><span class="id" title="constructor">&gt;-&gt;</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm_const"><span class="id" title="constructor">tm</span></a>.<br/>

<br/>
</div>

<div class="doc">
In this extended exercise, your job is to finish formalizing the
    definition and properties of the STLC extended with arithmetic.
    Specifically:

<div class="paragraph"> </div>

    Fill in the core definitions for STLCArith, by starting with the rules
    and terms which are the same as STLC.  Then prove the key lemmas and
    theorems we provide.  You will need to define and prove helper lemmas,
    as before.

<div class="paragraph"> </div>

    It will be necessary to also fill in "Reserved Notation", "Notation",
    and "Hint Constructors".

<div class="paragraph"> </div>

    Hint: If you get an error "STLC.tm" found instead of term "tm" then Coq
    is picking up the old notation for ie: subst instead of the new
    notation for STLCArith, so you need to overwrite the old with the
    notation before you can use it.

<div class="paragraph"> </div>

    Make sure Coq accepts the whole file before submitting. 
<div class="paragraph"> </div>

<a id="lab601"></a><h4 class="section">Exercise: 5 stars, standard (STLCArith.subst)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="STLCArith.subst" class="idref" href="#STLCArith.subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a id="x:83" class="idref" href="#x:83"><span class="id" title="binder">x</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <span class="id" title="inductive">string</span><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a id="s:84" class="idref" href="#s:84"><span class="id" title="binder">s</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm"><span class="id" title="inductive">tm</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a id="t:85" class="idref" href="#t:85"><span class="id" title="binder">t</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm"><span class="id" title="inductive">tm</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm"><span class="id" title="inductive">tm</span></a><br/>
&nbsp;&nbsp;. <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">Admitted</span></a>.<br/>

<br/>
</div>

<div class="doc">
(You'll need to remove the period at the end of this
    definition and add

<div class="paragraph"> </div>

    where "'<span class="inlinecode">'</span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">':='</span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">'</span>' t" := (subst x s t) (in custom stlc_tm).

<div class="paragraph"> </div>

    when you fill it in.) 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a id="STLCArith.value" class="idref" href="#STLCArith.value"><span class="id" title="definition, inductive"><span id="STLCArith.value_rect" class="id"><span id="STLCArith.value_ind" class="id"><span id="STLCArith.value_rec" class="id"><span id="STLCArith.value_sind" class="id">value</span></span></span></span></span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">Prop</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<br/>
.<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="PLF.StlcProp.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">core</span></a>.<br/>

<br/>
<span class="id" title="keyword">Reserved Notation</span> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">&quot;t '--&gt;' t'</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">40)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="STLCArith.step" class="idref" href="#STLCArith.step"><span class="id" title="definition, inductive"><span id="STLCArith.step_rect" class="id"><span id="STLCArith.step_ind" class="id"><span id="STLCArith.step_rec" class="id"><span id="STLCArith.step_sind" class="id">step</span></span></span></span></span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">Prop</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<br/>
<span class="id" title="keyword">where</span> <a id="STLCArith.:::x_'--&gt;'_x" class="idref" href="#STLCArith.:::x_'--&gt;'_x"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">t '--&gt;' t'</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#step:90"><span class="id" title="inductive">step</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">t'</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="STLCArith.multistep" class="idref" href="#STLCArith.multistep"><span class="id" title="abbreviation">multistep</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.Smallstep.html#multi"><span class="id" title="inductive">multi</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.step"><span class="id" title="inductive">step</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a id="be3e97d637a7606478b408df2567a114" class="idref" href="#be3e97d637a7606478b408df2567a114"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">t1 '--&gt;*' t2</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#STLCArith.multistep"><span class="id" title="abbreviation">multistep</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">t1</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">t2</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">at</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">level</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">40)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="PLF.StlcProp.html#step"><span class="id" title="inductive">step</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">core</span></a>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="STLCArith.Nat_step_example" class="idref" href="#STLCArith.Nat_step_example"><span class="id" title="definition">Nat_step_example</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="t:91" class="idref" href="#t:91"><span class="id" title="binder">t</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
<a class="idref" href="PLF.StlcProp.html#a2c77328d7271008b815cab95c990b88"><span class="id" title="notation">&lt;{</span></a><a class="idref" href="PLF.StlcProp.html#44628e469cfad86f2e95586dcb5be5e8"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.:stlc_ty::'Nat'"><span class="id" title="notation">Nat</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">y</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.:stlc_ty::'Nat'"><span class="id" title="notation">Nat</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> <a class="idref" href="PLF.StlcProp.html#57e41b5a891130e50f92714e37044a7b"><span class="id" title="notation">×</span></a> <a class="idref" href="PLF.Stlc.html#STLC.y"><span class="id" title="definition">y</span></a> <a class="idref" href="PLF.StlcProp.html#44628e469cfad86f2e95586dcb5be5e8"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#6e1b35529b005ed182a3031d40f7b111"><span class="id" title="notation">$(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">3</span></a><a class="idref" href="PLF.StlcProp.html#6e1b35529b005ed182a3031d40f7b111"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#6e1b35529b005ed182a3031d40f7b111"><span class="id" title="notation">$(</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">2</span></a><a class="idref" href="PLF.StlcProp.html#6e1b35529b005ed182a3031d40f7b111"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#a2c77328d7271008b815cab95c990b88"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="PLF.StlcProp.html#be3e97d637a7606478b408df2567a114"><span class="id" title="notation">--&gt;*</span></a> <a class="idref" href="PLF.StlcProp.html#t:91"><span class="id" title="variable">t</span></a>.<br/>
<a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">Proof</span></a>.  <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">Admitted</span></a>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="STLCArith.context" class="idref" href="#STLCArith.context"><span class="id" title="definition">context</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.Maps.html#partial_map"><span class="id" title="definition">partial_map</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.ty"><span class="id" title="inductive">ty</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="STLCArith.has_type" class="idref" href="#STLCArith.has_type"><span class="id" title="definition, inductive"><span id="STLCArith.has_type_rect" class="id"><span id="STLCArith.has_type_ind" class="id"><span id="STLCArith.has_type_rec" class="id"><span id="STLCArith.has_type_sind" class="id">has_type</span></span></span></span></span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.context"><span class="id" title="definition">context</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.tm"><span class="id" title="inductive">tm</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.ty"><span class="id" title="inductive">ty</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">Prop</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;<br/>
<span class="id" title="keyword">where</span> <a id="b8345e9f2196b2802cdc280cf09668ce" class="idref" href="#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">&quot;</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">&lt;{ Gamma '|--' t '\in' T }&gt;</span></a>" <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:=</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">(</span></a><a class="idref" href="PLF.StlcProp.html#has_type:93"><span class="id" title="inductive">has_type</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">Gamma</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">t</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">T</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="PLF.StlcProp.html#has_type"><span class="id" title="inductive">has_type</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">core</span></a>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Example</span> <a id="STLCArith.Nat_typing_example" class="idref" href="#STLCArith.Nat_typing_example"><span class="id" title="definition">Nat_typing_example</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#44628e469cfad86f2e95586dcb5be5e8"><span class="id" title="notation">(</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">x</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.:stlc_ty::'Nat'"><span class="id" title="notation">Nat</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">y</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.:stlc_ty::'Nat'"><span class="id" title="notation">Nat</span></a><a class="idref" href="PLF.StlcProp.html#192e752c9346d5e2176e3e1c033fb404"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.Stlc.html#STLC.x"><span class="id" title="definition">x</span></a> <a class="idref" href="PLF.StlcProp.html#57e41b5a891130e50f92714e37044a7b"><span class="id" title="notation">×</span></a> <a class="idref" href="PLF.Stlc.html#STLC.y"><span class="id" title="definition">y</span></a> <a class="idref" href="PLF.StlcProp.html#44628e469cfad86f2e95586dcb5be5e8"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#6e1b35529b005ed182a3031d40f7b111"><span class="id" title="notation">$(</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">3</span></a><a class="idref" href="PLF.StlcProp.html#6e1b35529b005ed182a3031d40f7b111"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#6e1b35529b005ed182a3031d40f7b111"><span class="id" title="notation">$(</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">2</span></a><a class="idref" href="PLF.StlcProp.html#6e1b35529b005ed182a3031d40f7b111"><span class="id" title="notation">)</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.:stlc_ty::'Nat'"><span class="id" title="notation">Nat</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">}&gt;</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a>.<br/>
 <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Admitted</span></a>.<br/>

<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a id="lab602"></a><h2 class="section">The Technical Theorems</h2>

<div class="paragraph"> </div>

 The next lemmas are proved <i>exactly</i> as before. 
<div class="paragraph"> </div>

<a id="lab603"></a><h4 class="section">Exercise: 4 stars, standard (STLCArith.weakening)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="STLCArith.weakening" class="idref" href="#STLCArith.weakening"><span class="id" title="lemma">weakening</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="Gamma:94" class="idref" href="#Gamma:94"><span class="id" title="binder">Gamma</span></a> <a id="Gamma':95" class="idref" href="#Gamma':95"><span class="id" title="binder">Gamma'</span></a> <a id="t:96" class="idref" href="#t:96"><span class="id" title="binder">t</span></a> <a id="T:97" class="idref" href="#T:97"><span class="id" title="binder">T</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.Maps.html#includedin"><span class="id" title="definition">includedin</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:94"><span class="id" title="variable">Gamma</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma':95"><span class="id" title="variable">Gamma'</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma:94"><span class="id" title="variable">Gamma</span></a>  <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:96"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.StlcProp.html#Gamma':95"><span class="id" title="variable">Gamma'</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:96"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">}&gt;</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a>.  <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Admitted</span></a>.<br/>

<br/>

<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>

<br/>
</div>

<div class="doc">
<a id="lab604"></a><h4 class="section">Exercise: 4 stars, standard (STLCArith.preservation)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <a id="STLCArith.preservation" class="idref" href="#STLCArith.preservation"><span class="id" title="lemma">preservation</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="t:98" class="idref" href="#t:98"><span class="id" title="binder">t</span></a> <a id="t':99" class="idref" href="#t':99"><span class="id" title="binder">t'</span></a> <a id="T:100" class="idref" href="#T:100"><span class="id" title="binder">T</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:98"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#t:98"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="PLF.StlcProp.html#t':99"><span class="id" title="variable">t'</span></a>  <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t':99"><span class="id" title="variable">t'</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">}&gt;</span></a>.<br/>
<a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Proof</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">with</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">eauto</span></a>.  <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">Admitted</span></a>.<br/>

<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>

<br/>
</div>

<div class="doc">
<a id="lab605"></a><h4 class="section">Exercise: 4 stars, standard (STLCArith.progress)</h4>

</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <a id="STLCArith.progress" class="idref" href="#STLCArith.progress"><span class="id" title="lemma">progress</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">:</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">∀</span></a> <a id="t:101" class="idref" href="#t:101"><span class="id" title="binder">t</span></a> <a id="T:102" class="idref" href="#T:102"><span class="id" title="binder">T</span></a><a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">&lt;{</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_tm:stlc_scope:'empty'"><span class="id" title="notation">empty</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">|--</span></a> <a class="idref" href="PLF.StlcProp.html#t:101"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">\</span></a><a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">in</span></a> <a class="idref" href="PLF.Stlc.html#STLC.:stlc_ty:stlc_scope:x"><span class="id" title="notation">T</span></a> <a class="idref" href="PLF.StlcProp.html#b8345e9f2196b2802cdc280cf09668ce"><span class="id" title="notation">}&gt;</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PLF.StlcProp.html#STLCArith.value"><span class="id" title="inductive">value</span></a> <a class="idref" href="PLF.StlcProp.html#t:101"><span class="id" title="variable">t</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="t':103" class="idref" href="#t':103"><span class="id" title="binder">t'</span></a><a class="idref" href="http://rocq-prover.org/doc/V9.1.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="PLF.StlcProp.html#t:101"><span class="id" title="variable">t</span></a> <a class="idref" href="PLF.StlcProp.html#STLCArith.:::x_'--&gt;'_x"><span class="id" title="notation">--&gt;</span></a> <a class="idref" href="PLF.StlcProp.html#t':103"><span class="id" title="variable">t'</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">eauto</span>.  <span class="id" title="var">Admitted</span>.<br/>
</div>

<div class="doc">
<font size=-2>&#9744;</font> 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="PLF.StlcProp.html#STLCArith"><span class="id" title="module">STLCArith</span></a>.<br/>

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://rocq-prover.org/">coqdoc</a>
</div>

</div>

</body>
</html>